// Copyright 2004, 2005, 2006 Protopage Ltd.  All rights reserved.
var fS=[ ['FT Homepages',[ ['UK','http://news.ft.com/rss/home/uk'],['US','http://news.ft.com/rss/home/us'],['Europe','http://news.ft.com/rss/home/europe'],['Asia','http://news.ft.com/rss/home/asia']
]],['World',[ ['World','http://news.ft.com/rss/world'],['US','http://news.ft.com/rss/world/us'],['Europe','http://news.ft.com/rss/world/europe'],['UK','http://news.ft.com/rss/world/uk'],['Asia-Pacific','http://news.ft.com/rss/world/asiapacific'],['Middle East & Africa','http://news.ft.com/rss/world/mideastafrica'],['Americas','http://news.ft.com/rss/world/americas'],['International Economy','http://news.ft.com/rss/world/economy'],['Brussels Briefing','http://news.ft.com/rss/world/brussels']
]],['Companies',[ ['Companies','http://news.ft.com/rss/companies']
]],['Companies by sector',[ ['Aerospace & defence','http://news.ft.com/rss/companies/aerospace'],['Autos','http://news.ft.com/rss/companies/autos'],['Basic industries','http://news.ft.com/rss/companies/basic'],['Consumer industries','http://news.ft.com/rss/companies/consumer'],['Drugs & Healthcare','http://news.ft.com/rss/companies/drugs'],['Energy, utilities, mining','http://news.ft.com/rss/companies/energy'],['Financial services','http://news.ft.com/rss/companies/financial'],['IT','http://news.ft.com/rss/companies/it'],['Media & internet','http://news.ft.com/rss/companies/media'],['Property','http://news.ft.com/rss/companies/property'],['Retailing & leisure','http://news.ft.com/rss/companies/retailing'],['Telecoms','http://news.ft.com/rss/companies/telecoms'],['Transport','http://news.ft.com/rss/companies/transport']
]],['Companies by region',[ ['US','http://news.ft.com/rss/companies/us'],['Europe','http://news.ft.com/rss/companies/europe'],['UK','http://news.ft.com/rss/companies/uk'],['UK smaller companies','http://news.ft.com/rss/companies/uksmallercompanies'],['Asia-Pacific','http://news.ft.com/rss/companies/asiapacific'],['Middle East & Africa','http://news.ft.com/rss/companies/mideastafrica'],['Americas','http://news.ft.com/rss/companies/americas']
]],['Markets',[ ['Markets','http://news.ft.com/rss/markets'],['Equities','http://news.ft.com/rss/markets/equities'],['US','http://news.ft.com/rss/markets/us'],['Europe','http://news.ft.com/rss/markets/europe'],['UK','http://news.ft.com/rss/markets/uk'],['Asia-Pacific','http://news.ft.com/rss/markets/asiapacific'],['Currencies','http://news.ft.com/rss/markets/currencies'],['Capital markets','http://news.ft.com/rss/markets/bonds'],['Commodities','http://news.ft.com/rss/markets/commodities'],['Emerging markets','http://news.ft.com/rss/markets/emerging'],['Investors notebook','http://news.ft.com/rss/markets/investor']
]],['Lex',[ ['Lex','http://news.ft.com/rss/lex']
]],['Comment & analysis',[ ['Comment & analysis','http://news.ft.com/rss/comment'],['Comment','http://news.ft.com/rss/comment/personalview'],['Analysis','http://news.ft.com/rss/comment/analysis'],['Editorial comment','http://news.ft.com/rss/comment/editorial'],['UK Business blog','http://news.ft.com/rss/ukbusinessblog'],['John Gapper','http://news.ft.com/rss/comment/columnists/johngapper'],['Lombard','http://news.ft.com/rss/comment/columnists/lombard'],['Lucy Kellaway','http://news.ft.com/rss/comment/columnists/lucykellaway'],['Martin Wolf','http://news.ft.com/rss/comment/columnists/martinwolf'],['Notebook','http://news.ft.com/rss/comment/columnists/uknotebook'],['Philip Stephens','http://news.ft.com/rss/comment/columnists/philipstephens']
]],['Technology',[ ['Technology','http://news.ft.com/rss/technology']
]],['Business Life',[ ['Business Life','http://news.ft.com/rss/businesslife'],['Business education','http://news.ft.com/rss/reports/businesseducation'],['Management','http://news.ft.com/rss/businesslife/management'],['Media & marketing','http://news.ft.com/rss/businesslife/marketing'],['Entrepreneurship','http://news.ft.com/rss/businesslife/entrepreneurship'],['Law & professions','http://news.ft.com/rss/businesslife/law'],['Science & technology','http://news.ft.com/rss/businesslife/science'],['Investing in China','http://news.ft.com/rss/businesslife/investinginchina']
]],['Your money',[ ['Your money','http://news.ft.com/rss/yourmoney']
]],['Arts & weekend',[ ['Arts & weekend','http://news.ft.com/rss/artsandweekend']
]]
]; var uh=[ ['Protopage',[ ['Protopage News','http://blog.protopage.com']
]],['Top Stories',[ ['ABC News - Top Stories','http://abcnews.go.com/'],['BBC World News','http://news.bbc.co.uk/1/hi/world/default.stm'],['CBS News - Top Stories','http://www.cbsnews.com/sections/home/main100.shtml','http://www.cbsnews.com/feeds/rss/main.rss'],['CNN.com - Top Stories','http://www.cnn.com/'],['MSNBC - Top Stories','http://www.msnbc.msn.com/'],['New York Times - Top Stories','http://www.nytimes.com/'],['Reuters - Top Stories','http://today.reuters.com/news/default.aspx'],['Washington Post - Top Stories','http://www.washingtonpost.com','http://www.washingtonpost.com/wp-dyn/rss/linkset/2005/03/24/LI2005032400102.xml']
]],['World',[ ['ABC World News','http://abcnews.go.com/International/','http://my.abcnews.go.com/rsspublic/world_rss20.xml'],['BBC World News','http://news.bbc.co.uk/1/hi/world/default.stm'],['CBS World News','http://www.cbsnews.com/sections/world/main202.shtml','http://www.cbsnews.com/feeds/rss/national.rss'],['CNN.com World News','http://www.cnn.com/WORLD/'],['Int\'l Herald Tribune','http://www.iht.com/'],['MSNBC - World News','http://www.msnbc.msn.com/id/3032507/'],['New York Times - Int\'l','http://www.nytimes.com/pages/world/index.html'],['Reuters - Int\'l','http://today.reuters.com/news/newsChannel.aspx?type=worldNews']
]],['Regional',[ ['BBC News - Africa','http://news.bbc.co.uk/1/hi/world/africa/default.stm'],['BBC News - Americas','http://news.bbc.co.uk/1/hi/world/americas/default.stm'],['BBC News - Asia Pacific','http://news.bbc.co.uk/1/hi/world/asia-pacific/default.stm'],['BBC News - Europe','http://news.bbc.co.uk/1/hi/world/europe/default.stm'],['BBC News - Middle East','http://news.bbc.co.uk/1/hi/world/middle_east/default.stm'],['BBC News - South Asia','http://news.bbc.co.uk/1/hi/world/south_asia/default.stm'],]],['Canada',[ ['Radio Canada - Nouvelles','http://www.radio-canada.ca/nouvelles/','http://src.ca/manchettes/rss/'],['CBC News','http://www.cbc.ca/news/','http://www.cbc.ca/rss/']
]],['U.S.',[ ['ABC News - US','http://abcnews.go.com/US/','http://my.abcnews.go.com/rsspublic/us_rss20.xml'],['BBC News - Americas','http://news.bbc.co.uk/1/hi/world/americas/default.stm'],['CBS News - US','http://www.cbsnews.com/sections/national/main201.shtml','http://www.cbsnews.com/feeds/rss/national.rss'],['CNN.com - US','http://www.cnn.com/US/'],['MSNBC - US','http://www.msnbc.msn.com/id/3032525/'],['New York Times - National','http://www.nytimes.com/pages/national/index.html'],['New York Times - NY/Region','http://www.nytimes.com/pages/nyregion/index.html'],['Reuters - U.S.','http://today.reuters.com/news/newsChannel.aspx?type=domesticNews'],['USA Today','http://www.usatoday.com/'],['Washington Post','http://www.washingtonpost.com/','http://www.washingtonpost.com/wp-dyn/rss/linkset/2005/03/24/LI2005032400102.xml']
]],['U.S. Papers',[ ['Arizona Republic','http://www.azcentral.com/news/','http://www.azcentral.com/rss/feeds/news.xml'],['Baltimore Sun','http://www.baltimoresun.com/'],['The Christian Science Monitor','http://www.csmonitor.com/'],['Cincinnati Enquirer','http://news.enquirer.com','http://news.enquirer.com/apps/pbcs.dll/section?category=rss&mime=xml'],['Dallas Morning News','http://www.dallasnews.com/','http://www.dallasnews.com/newskiosk/rss/dallasnewslatestnews.xml'],
['Detroit Free Press','http://www.freep.com/index.htm','http://www.freep.com/avantgo_detroit/index.xml'],['Honolulu Star Bulletin','http://www.starbulletin.com/'],['Houston Chronicle','http://www.chron.com/','http://www.chron.com/rss/chronicle/index.rss'],['Milwaukee-Journal Sentinel','http://www.jsonline.com/','http://www.jsonline.com/rss/frontpage.xml'],['Minneapolis-St. Paul Star Tribune','http://www.startribune.com/'],['New York Times','http://www.nytimes.com/'],['Philadelphia Inquirer, The','http://www.philly.com/mld/inquirer/','http://go.philly.com/rss/www-philly-com-mld-inquirer-news-front-rss.xml'],['Pittsburgh Tribune-Review','http://www.pittsburghlive.com/x/tribune-review/trib/','http://pittsburghlive.com/rss-paper/?pid=1'],['Providence Journal-Bulletin','http://www.projo.com/','http://www.projo.com/newskiosk/rss/projobreaking.xml'],['San Francisco Chronicle','http://www.sfgate.com/chronicle/','http://www.sfgate.com/rss/feeds/news.xml'],['San Jose Mercury News','http://www.mercurynews.com/mld/mercurynews/'],['Seattle Times','http://seattletimes.nwsource.com/html/home/index.html'],['St. Louis Post-Dispatch','http://www.stltoday.com/'],['USA Today','http://usatoday.com/'],['Wall Street Journal','http://online.wsj.com','http://online.wsj.com/xml/rss/0,,3_7011,00.xml'],['Washington Times','http://www.washtimes.com/','http://www.washingtontimes.com/feeds/rss/feedhome/twt_frontpage.rss'],['Washington Post - Top Stories','http://www.washingtonpost.com','http://www.washingtonpost.com/wp-dyn/rss/linkset/2005/03/24/LI2005032400102.xml']
]],['U.K.',[ ['Guardian Unlimited','http://www.guardian.co.uk/'],['Times Online','http://www.timesonline.co.uk/rssfeed/rssIndexFeed/0,,2,00.xml'],['Telegraph','http://news.telegraph.co.uk','http://www.telegraph.co.uk/newsfeed/rss/news_main.xml'],['Independent','http://www.independent.co.uk/','http://news.independent.co.uk/uk/index.jsp?service=rss'],['Financial Times','http://news.ft.com/home/uk'],['Daily Mail','http://www.dailymail.co.uk'],['Scotsman','http://www.scotsman.com/'],['Mirror','http://www.mirror.co.uk/'],['BBC News - UK','http://news.bbc.co.uk/1/hi/uk/default.stm'],['BBC News - England','http://news.bbc.co.uk/1/hi/england/default.stm'],['BBC News - N. Ireland','http://news.bbc.co.uk/1/hi/northern_ireland/default.stm'],['BBC News - Scotland','http://news.bbc.co.uk/1/hi/scotland/default.stm'],['BBC News - Wales','http://news.bbc.co.uk/1/hi/wales/default.stm'],['Sky News','http://www.sky.com/skynews/home']
]],['Business',[ ['ABC News - Business','http://abcnews.go.com/Business/','http://my.abcnews.go.com/rsspublic/business_rss20.xml'],['BBC News - Business','http://news.bbc.co.uk/1/hi/business/default.stm'],['BusinessWeek Online','http://www.businessweek.com/bwdaily/'],['CBS News - Business','http://www.cbsnews.com/sections/business/main500395.shtml','http://www.cbsnews.com/feeds/rss/business.rss'],['CNN Money','http://money.cnn.com/index.html'],['Economist','http://www.economist.com/index.html'],['Fast Company','http://www.fastcompany.com/homepage/index.html'],['Forbes','http://www.forbes.com/'],['Fortune','http://www.fortune.com/fortune/','http://rss.fortune.com/web/fortune/rss/rssfeed/index.xml'],['Kiplinger Personal Finance','http://www.kiplinger.com/personalfinance/'],['MarketWatch','http://www.marketwatch.com','http://www.marketwatch.com/rss/topstories'],['Motley Fool','http://www.fool.com/'],['MSNBC Business','http://www.msnbc.msn.com/id/3032072/'],['MSNBC Business','http://www.msnbc.msn.com/id/3032072/'],['UK Times - Business','http://business.timesonline.co.uk/section/0,,8209,00.html','http://www.timesonline.co.uk/rssfeed/rssIndexFeed/0,,5,00.xml'],['New York Times - Business','http://www.nytimes.com/pages/business/index.html'],['Reuters - Business','http://today.reuters.com/news/newsChannel.aspx?type=businessNews'],['USA Today - Money','http://www.usatoday.com/money/front.htm'],['FT.com UK (Subs. Reqd.)','http://news.ft.com/home/uk'],['FT.com US (Subs. Reqd.)','http://news.ft.com/home/us'],['FT.com Europe (Subs. Reqd.)','http://news.ft.com/home/europe'],['FT.com Asia (Subs. Reqd.)','http://news.ft.com/home/asia'],['Wall St. Journal (Subs. Reqd.)','http://online.wsj.com/public/us']
]],['Entertainment',[ ['ABC News - Entertainment','http://abcnews.go.com/Entertainment/','http://my.abcnews.go.com/rsspublic/entertainment_rss20.xml'],['BBC News - Entertainment','http://news.bbc.co.uk/1/hi/entertainment/default.stm'],['CBS News - Entertainment','http://www.cbsnews.com/sections/entertainment/main207.shtml','http://www.cbsnews.com/feeds/rss/entertainment.rss'],['CNN.com - Entertainment','http://www.cnn.com/SHOWBIZ/'],['Country Music Television News','http://www.cmt.com/news/','http://www.cmt.com/rss/news/latest.jhtml'],['Gamespot News','http://www.gamespot.com/news/index.html','http://www.gamespot.com/misc/rss/gamespot_updates_news.xml'],['E! online','http://www.eonline.com/'],['Hello! Magazine','http://www.hellomagazine.com/','http://ap.hellomagazine.com/feeds/hello_atom.xml'],['LiveDaily - Concert News','http://www.livedaily.com/','http://www.livedaily.com/rss/news-10.xml'],['MSNBC - Entertainment','http://www.msnbc.msn.com/id/3032084/'],['Rolling Stone','http://www.rollingstone.com/'],['Rotten Tomatoes - Top Movies','http://www.rottentomatoes.com/movies/box_office.php','http://i.rottentomatoes.com/syndication/rss/top_movies.xml'],['Variety','http://www.variety.com/'],['MTV News','http://www.mtv.com/news/','http://www.mtv.com/rss/news/latestcached.jhtml'],['VH1 News','http://www.vh1.com/news/','http://www.vh1.com/rss/news/latestcached.jhtml'],['TV Squad','http://www.tvsquad.com/']
]],['Health',[ ['ABC News - Health','http://abcnews.go.com/Health/','http://my.abcnews.go.com/rsspublic/health_rss20.xml'],['BBC News - Health','http://news.bbc.co.uk/1/hi/health/default.stm'],['CBS News - HealthWatch','http://www.cbsnews.com/sections/health/main204.shtml','http://www.cbsnews.com/feeds/rss/health.rss'],['CNN.com - Health','http://www.cnn.com/HEALTH/'],['Medical News Today','http://www.medicalnewstoday.com/'],['MSNBC - Health','http://www.msnbc.msn.com/id/3032076/'],['New York Times - Health','http://www.nytimes.com/pages/health/index.html'],['Reuters - Health','http://today.reuters.com/news/newsChannel.aspx?type=healthNews']
]],['Education',[ ['BBC News - Health','http://news.bbc.co.uk/1/hi/education/default.stm'],['CNN.com - Education','http://www.cnn.com/EDUCATION/'],['New York Times - Education','http://www.nytimes.com/pages/education/index.html']
]],['Politics',[ ['ABC News - Politics','http://abcnews.go.com/Politics/','http://my.abcnews.go.com/rsspublic/politics_rss20.xml'],['BBC News - Politics','http://news.bbc.co.uk/1/hi/uk_politics/default.stm'],['CBS News - Politics','http://www.cbsnews.com/sections/politics/main250.shtml','http://www.cbsnews.com/feeds/rss/politics.rss'],['CNN.com - Politics','http://www.cnn.com/POLITICS/'],['New York Times - Politics','http://www.nytimes.com/pages/politics/index.html'],['Reuters - Politics','http://today.reuters.com/news/newsChannel.aspx?type=politicsNews'],['Salon','http://www.salon.com/','http://www.salon.com/rss/salon.rss'],['Slate','http://www.slate.com/']
]],['Travel',[ ['ABC News - Travel','http://abcnews.go.com/Travel/','http://my.abcnews.go.com/rsspublic/travel_rss20.xml'],['CNN.com - Travel','http://www.cnn.com/TRAVEL/'],['MSNBC - Travel','http://www.msnbc.msn.com/id/3032123/'],['USA Today - Travel','http://www.usatoday.com/travel/front.htm']
]],['Sports',[ ['BBC Sport','http://news.bbc.co.uk/sport/'],['BBC Sport - American Football','http://news.bbc.co.uk/sport1/hi/other_sports/american_football/default.stm'],['BBC Sport - Athletics','http://news.bbc.co.uk/sport1/hi/athletics/default.stm'],['BBC Sport - Baseball','http://news.bbc.co.uk/sport1/hi/other_sports/baseball/default.stm'],['BBC Sport - Boxing','http://news.bbc.co.uk/sport1/hi/boxing/default.stm'],['BBC Sport - Cricket','http://news.bbc.co.uk/sport1/hi/cricket/default.stm'],['BBC Sport - Cycling','http://news.bbc.co.uk/sport1/hi/other_sports/cycling/default.stm'],['BBC Sport - Football (Soccer)','http://news.bbc.co.uk/sport1/hi/football/default.stm'],['BBC Sport - Golf','http://news.bbc.co.uk/sport1/hi/golf/default.stm'],['BBC Sport - Horse Racing','http://news.bbc.co.uk/sport1/hi/other_sports/horse_racing/default.stm'],['BBC Sport - Motorsport','http://news.bbc.co.uk/sport1/hi/motorsport/default.stm'],['BBC Sport - Rugby Union','http://news.bbc.co.uk/sport1/hi/rugby_union/default.stm'],['BBC Sport - Rugby League','http://news.bbc.co.uk/sport1/hi/rugby_league/default.stm'],['BBC Sport - Tennis','http://news.bbc.co.uk/sport1/hi/tennis/default.stm'],['BBC Sport - Sailing','http://news.bbc.co.uk/sport1/hi/other_sports/sailing/default.stm'],['BBC Sport - Snooker','http://news.bbc.co.uk/sport1/hi/other_sports/snooker/default.stm'],['BBC Sport - Swimming','http://news.bbc.co.uk/sport1/hi/other_sports/swimming/default.stm'],['BBC Sport - Winter Sports','http://news.bbc.co.uk/sport1/hi/other_sports/winter_sports/default.stm'],['CBS SportsLine - Top Stories','http://www.sportsline.com/'],['CBS SportsLine - NFL','http://www.sportsline.com/nfl','http://cbs.sportsline.com/partners/feeds/rss/nfl_news'],['CBS SportsLine - MLB','http://www.sportsline.com/mlb','http://cbs.sportsline.com/partners/feeds/rss/mlb_news'],['CBS SportsLine - NBA','http://www.sportsline.com/nba','http://cbs.sportsline.com/partners/feeds/rss/nba_news'],['CBS SportsLine - College Football','http://www.sportsline.com/collegefootball','http://cbs.sportsline.com/partners/feeds/rss/cfb_news'],['CBS SportsLine - College Hoops','http://www.sportsline.com/collegebasketball','http://cbs.sportsline.com/partners/feeds/rss/cb_news'],['CBS SportsLine - NHL','http://www.sportsline.com/nhl','http://cbs.sportsline.com/partners/feeds/rss/nhl_news'],['CBS SportsLine - Tennis','http://www.sportsline.com/tennis','http://www.sportsline.com/partners/feeds/rss/tennis_news'],['CBS SportsLine - Auto Racing','http://www.sportsline.com/autoracing','http://www.sportsline.com/partners/feeds/rss/auto_news'],['CBS SportsLine - WNBA','http://www.sportsline.com/wnba','http://www.sportsline.com/partners/feeds/rss/wnba_news'],['CBS SportsLine - Women\'s College Hoops','http://www.sportsline.com/ncaawbasketball','http://www.sportsline.com/partners/feeds/rss/cbw_news'],['CBS SportsLine - Horse Racing','http://horseracing.sportsline.com/cbs/','http://www.sportsline.com/partners/feeds/rss/horse_news'],['CBS SportsLine - Soccer','http://www.sportsline.com/soccer','http://www.sportsline.com/partners/feeds/rss/soccer_news'],['CBS SportsLine - Boxing ','http://www.sportsline.com/boxing','http://www.sportsline.com/partners/feeds/rss/boxing_news'],['ESPN - Top Stories','http://sports.espn.go.com'],['ESPN - Golf','http://sports.espn.go.com/golf/index'],['ESPN - NFL','http://sports-att.espn.go.com/nfl/index'],['ESPN - NBA','http://sports.espn.go.com/nba/index'],['ESPN - MLB','http://sports.espn.go.com/mlb/index'],['ESPN - NHL','http://sports.espn.go.com/nhl/index'],['ESPN - Motorsports','http://sports.espn.go.com/rpm/index'],['ESPN - Soccer','http://soccernet.espn.go.com/'],['ESPN - College Basketball','http://sports.espn.go.com/ncb/index'],['ESPN - College Football','http://sports.espn.go.com/ncf/index'],['FOX Sports - NFL','http://msn.foxsports.com/nfl'],['FOX Sports - MLB','http://msn.foxsports.com/mlb'],['FOX Sports - NBA','http://msn.foxsports.com/nba'],['FOX Sports - NHL','http://msn.foxsports.com/nhl'],['FOX Sports - Nascar','http://msn.foxsports.com/name/public/NASCAR/Chase','http://msn.foxsports.com/feedout/syndicatedContent?categoryId=142'],['FOX Sports - College Football','http://msn.foxsports.com/cfb'],['FOX Sports - College Basketball','http://msn.foxsports.com/cbk'],['FOX Sports - Golf','http://msn.foxsports.com/golf'],['FOX Sports - Soccer','http://msn.foxsports.com/foxsoccer','http://msn.foxsports.com/feedout/syndicatedContent?categoryId=176'],['FOX Sports - Tennis','http://msn.foxsports.com/tennis','http://msn.foxsports.com/feedout/syndicatedContent?categoryId=199'],['FOX Sports - Horseracing','http://msn.foxsports.com/horseracing','http://msn.foxsports.com/feedout/syndicatedContent?categoryId=241'],['FOX Sports - WNBA','http://msn.foxsports.com/wnba','http://msn.foxsports.com/feedout/syndicatedContent?categoryId=90'],['MSNBC Sports','http://www.msnbc.msn.com/id/3032113/'],['New York Times - Sports','http://www.nytimes.com/pages/sports/index.html'],['Reuters - Sports','http://today.reuters.com/news/newsChannel.aspx?type=sportsNews'],['Sports Illustrated - Top Stories','http://sportsillustrated.cnn.com/index.html'],['Sports Illustrated - NFL','http://sportsillustrated.cnn.com/hockey/nhl/','http://rss.cnn.com/rss/si_nfl.rss'],['Sports Illustrated - NCAAF','http://sportsillustrated.cnn.com/football/ncaa/','http://rss.cnn.com/rss/si_ncaaf.rss'],['Sports Illustrated - MLB','http://sportsillustrated.cnn.com/baseball/mlb/','http://rss.cnn.com/rss/si_mlb.rss'],['Sports Illustrated - NBA','http://sportsillustrated.cnn.com/basketball/nba/','http://rss.cnn.com/rss/si_nba.rss'],['Sports Illustrated - NCAAB','http://sportsillustrated.cnn.com/basketball/ncaa/','http://rss.cnn.com/rss/si_ncaab.rss'],['Sports Illustrated - Golf','http://sportsillustrated.cnn.com/golf/','http://rss.cnn.com/rss/si_golf.rss'],['Sports Illustrated - Racing','http://sportsillustrated.cnn.com/racing/','http://rss.cnn.com/rss/si_motorsports.rss'],['USA Today - Sports','http://www.usatoday.com/sports/front.htm'],['NBA Basketball','http://www.nba.com/'],['WNBA Basketball','http://www.wnba.com','http://www.wnba.com/rss/wnba_rss.xml']
]],['Science / Nature',[ ['About.com Animals & Wildlife News','http://animals.about.com/','http://z.about.com/6/g/animals/b/rss2.xml'],['BBC News - Science/Nature','http://news.bbc.co.uk/1/hi/sci/tech/default.stm'],['CBS News - Sci-Tech','http://www.cbsnews.com/sections/tech/main205.shtml','http://www.cbsnews.com/feeds/rss/scitech.rss'],['CNN.com - Science & Space','http://www.cnn.com/TECH/space/'],['National Geographic News','http://news.nationalgeographic.com/'],['Nature','http://www.nature.com/index.html','http://www.nature.com/nature/current_issue/rss'],['New York Times - Science','http://www.nytimes.com/pages/science/index.html'],['Scientific American','http://www.sciam.com/']
]],['Technology',[ ['ABC News - Tech','http://abcnews.go.com/Business/','http://my.abcnews.go.com/rsspublic/scitech_rss20.xml'],['BBC News - Tech','http://news.bbc.co.uk/1/hi/technology/default.stm'],['CNET News.com - Top Stories','http://news.com.com/'],['Computerworld','http://www.computerworld.com/','http://feeds.computerworld.com/Computerworld/News'],['CNN.com - Tech','http://www.cnn.com/TECH/'],['eWeek','http://www.eweek.com/'],['InfoWorld','http://www.infoworld.com/'],['MSNBC Tech / Science','http://www.msnbc.msn.com/id/3032118/'],['New York Times - Tech','http://tech.nytimes.com/pages/technology/index.html'],['PC World - Latest News','http://www.pcworld.com/','http://rss.pcworld.com/rss/latestnews.rss'],['Reuters - Tech and Science','http://today.reuters.com/news/newsSciTech.aspx'],['Slashdot - News for Nerds','http://slashdot.org/'],['The Register','http://www.theregister.com/'],['Wired News - Top Stories','http://www.wired.com/'],['USA Today - Tech','http://www.usatoday.com/tech/front.htm'],['ZDNet - Top Stories','http://news.zdnet.com/2001-1_22-0.html']
]],['Tech Categories',[ ['BBC News - Tech','http://news.bbc.co.uk/1/hi/technology/default.stm'],['BetaNews','http://www.betanews.com/'],['CNET News.com - Top Stories','http://news.com.com/'],['CNET News.com - Business Tech','http://news.com.com/2001-1001_3-0.html?tag=ne.tab.hd','http://news.com.com/2547-1001_3-0-5.xml'],['CNET News.com - Threats','http://news.com.com/2001-1009_3-0.html?tag=ne.tab.hd','http://news.com.com/2547-1009_3-0-5.xml'],['CNET News.com - Access','http://news.com.com/2001-1035_3-0.html?tag=ne.tab.hd','http://news.com.com/2547-1035_3-0-5.xml'],['CNET News.com - Media 2.0','http://news.com.com/2001-1023_3-0.html?tag=ne.tab.hd','http://news.com.com/2547-1023_3-0-5.xml'],['CNET News.com - Digital Life','http://news.com.com/2001-1040_3-0.html?tag=ne.tab.hd','http://news.com.com/2547-1040_3-0-5.xml'],['CNN.com - Tech','http://www.cnn.com/TECH/'],['Del.icio.us - Popular','http://del.icio.us/popular/'],['Digg.com - Front page','http://www.digg.com/'],['eWeek','http://www.eweek.com/'],['ExtremeTech','http://www.extremetech.com/'],['InfoWorld','http://www.infoworld.com/'],['Macworld','http://www.macworld.com/'],['MSNBC Tech / Science','http://www.msnbc.msn.com/id/3032118/'],['New York Times - Tech','http://tech.nytimes.com/pages/technology/index.html'],['PC World - Latest News','http://www.pcworld.com/','http://rss.pcworld.com/rss/latestnews.rss'],['PC World - Techlog','http://blogs.pcworld.com/techlog/','http://blogs.pcworld.com/techlog/index.rss'],['PC World - Staff Blog','http://blogs.pcworld.com/staffblog/','http://blogs.pcworld.com/staffblog/index.rss'],['Reuters - Tech and Science','http://today.reuters.com/news/newsSciTech.aspx'],['Tom\'s Hardware','http://www.tomshardware.com/index.html'],['Wired News - Top Stories','http://www.wired.com/'],['Wired News - Tech','http://www.wired.com/news/technology/'],['Wired News - Culture','http://www.wired.com/news/culture/'],['Wired News - Business','http://www.wired.com/news/business/'],['Wired News - Politics','http://www.wired.com/news/politics/'],['USA Today - Tech','http://www.usatoday.com/tech/front.htm'],['ZDNet - Top Stories','http://news.zdnet.com/2001-1_22-0.html'],['ZDNet - Application Development','http://news.zdnet.com/2001-9593_22-0.html','http://news.zdnet.com/2509-9593_22-0-10.xml'],['ZDNet - Data Management','http://news.zdnet.com/2001-9592_22-0.html','http://news.zdnet.com/2509-9592_22-0-10.xml'],['ZDNet - Hardware Upgrades','http://news.zdnet.com/2001-9584_22-0.html','http://news.zdnet.com/2509-9584_22-0-10.xml'],['ZDNet - IT Management','http://news.zdnet.com/2001-9589_22-0.html','http://news.zdnet.com/2509-9589_22-0-10.xml'],['ZDNet - OS Migration','http://news.zdnet.com/2001-9590_22-0.html','http://news.zdnet.com/2509-9590_22-0-10.xml'],['ZDNet - Security','http://news.zdnet.com/2001-1009_22-0.html','http://news.zdnet.com/2509-1009_22-0-10.xml'],['ZDNet - Software Infrastructure','http://news.zdnet.com/2001-3513_22-0.html','http://news.zdnet.com/2509-3513_22-0-10.xml'],['ZDNet - Web Technology','http://news.zdnet.com/2001-9588_22-0.html','http://news.zdnet.com/2509-9588_22-0-10.xml'],['ZDNet - Wired & Wireless','http://news.zdnet.com/2001-1035_22-0.html','http://news.zdnet.com/2509-1035_22-0-10.xml']
]],['Lifestyle & Fashion',[ ['Reuters - Life and Leisure','http://today.reuters.com/news/newsChannel.aspx?type=lifeAndLeisureNews'],['New York Times - Fashion & Style','http://www.nytimes.com/pages/fashion/index.html'],['USA Today - Life','http://www.usatoday.com/life/front.htm']
]],['Most Emailed/Popular',[ ['Yahoo! News - Most Emailed','http://news.yahoo.com/i/964','http://rss.news.yahoo.com/rss/mostemailed'],['New York Times - Most Emailed','http://www.nytimes.com/gst/mostemailed.html?partner=rssnyt','http://www.nytimes.com/services/xml/rss/nyt/pop_top.xml'],['MSNBC - Most Emailed','http://www.msnbc.msn.com/id/7468311/','http://www.msnbc.msn.com/id/3058960/?displaymode=1026&eventType=100&rss.xml']
]],['Law',[ ['CNN.com - Law','http://www.cnn.com/LAW/'],['Lawrence Lessig','http://www.lessig.org/blog/']
]],['Comic Strips',[ ['Dilbert','http://www.dilbert.com/','http://feeds.feedburner.com/tapestrydilbert'],['Savage Chickens','http://www.savagechickens.com']
]],['Misc',[ ['Dictionary.com Word of the Day','http://dictionary.reference.com/wordoftheday/wotd.rss'],['Quotes of the Day','http://www.quotationspage.com/qotd.html'],['Reuters - Oddly Enough','http://today.reuters.com/news/newsChannel.aspx?type=oddlyEnoughNews'],['Simply Recipies','http://www.elise.com/recipes/'],['The Food Section','http://www.thefoodsection.com/foodsection/'],['New Urban Legends','http://www.snopes.com/info/whatsnew.asp'],['Slick Deals','http://www.slickdeals.net/'],['Sky News Offbeat','http://www.sky.com/skynews/rss/article/0,,91059-1-100,00.xml']
]],['Humor',[ ['The Onion','http://www.theonion.com/content/index','http://www.theonion.com/content/feeds/daily'],['WastedBlog Humor','http://www.wastedblog.com/','http://www.wastedblog.com/homerss.php?id=1'],['Comedy Central - The Daily Show Clips','http://www.comedycentral.com/shows/the_daily_show/videos/most_recent/index.jhtml?rsspartner=rssMozilla','http://www.comedycentral.com/rss/tdsvideos.jhtml'],['Comedy Central - Joke of the Day','http://www.comedycentral.com/jokes/index.jhtml?rsspartner=rssMozilla','http://www.comedycentral.com/rss/jokes/index.jhtml']
]],['Blogs - Non-Tech',[ ['Gaping Void','http://www.gapingvoid.com/'],['Autoblog','http://www.autoblog.com/'],['AdRants','http://www.adrants.com'],['Gawker','http://www.gawker.com/','http://feeds.gawker.com/gawker/excerpts.xml'],['GridSkipper','http://www.gridskipper.com/'],['Defamer','http://www.defamer.com/'],['Work Happy','http://www.workhappy.net/'],['Educational Weblogs','http://educational.blogs.com/'],['Fark.com','http://www.fark.com/'],['Seth Godin\'s Blog','http://sethgodin.typepad.com/seths_blog/'],['Church of the Customer Blog','http://customerevangelists.typepad.com/blog/'],['Business 2.0 Blog','http://business2.blogs.com/business2blog/'],['Metafilter','http://www.metafilter.com'],['FreshArrival','http://www.fresharrival.com/']
]],['Blogs - Politics',[ ['Huffington Post','http://www.huffingtonpost.com/'],['Andrew Sullivan','http://www.andrewsullivan.com/'],['Instapundit','http://instapundit.com/'],['Wonkette','http://www.wonkette.com/'],['Michelle Malkin','http://michellemalkin.com/'],['Daily Kos: State of the Nation','http://www.dailykos.com/']
]],['Blogs - Tech Related',[ ['PC Mike\'s e-Journal','http://pcmike.com/'],['Style Gala','http://www.stylegala.com/'],['Dwight Silverman\'s TechBlog','http://blogs.chron.com/techblog/'],['I, Cringely','http://www.pbs.org/cringely/'],['Boing Boing ','http://boingboing.net/'],['Joel on Software','http://www.joelonsoftware.com/'],['Om Malik\'s Next Gen Internet Blog','http://gigaom.com/'],['Scripting News','http://www.scripting.com/'],['Engadget','http://www.engadget.com/'],['Gizmodo','http://www.gizmodo.com/','http://feeds.gawker.com/gizmodo/excerpts.xml'],['CommandN Internet TV','http://commandn.typepad.com/'],['Fosfor Gadgets','http://gadgets.fosfor.se/','http://feeds.feedburner.com/fosfor/kYcM'],['Download Squad','http://www.downloadsquad.com/'],['Lifehacker','http://www.lifehacker.com/'],['The Social Software Blog','http://socialsoftware.weblogsinc.com/'],['Waxy Links','http://waxy.org/links/'],['Jeremy Zawodny\'s blog','http://jeremy.zawodny.com/blog/'],['ARS Technica','http://arstechnica.com/index.ars'],['A List Apart','http://www.alistapart.com/'],['Jon\'s Radio','http://weblog.infoworld.com/udell/'],['Techdirt','http://www.techdirt.com/'],['Scobleizer','http://scobleizer.wordpress.com/','http://scobleizer.wordpress.com/feed/'],['Techcrunch','http://www.techcrunch.com/'],['A Venture Forth','http://www.aventureforth.com/'],['Emily Chang','http://www.emilychang.com/go/ehub/'],['Dion and Ben\'s Ajaxian','http://www.ajaxian.com'],['Tip Monkies','http://www.tipmonkies.com/'],['The Red Ferret Journal','http://www.redferret.net/'],['A Gonzo Journal','http://cowboycaleb.liquidblade.com/'],['O\'Reilly Radar','http://radar.oreilly.com/'],['Dion Hichcliffe\'s Web 2.0 Blog','http://web2.wsj2.com/'],['Devil\'s Details','http://www.devilsdetails.com/'],['Micro Persuasion','http://www.micropersuasion.com/'],['BusinessWeek Tech Beat','http://www.businessweek.com/the_thread/techbeat/'],['VentureBlog','http://www.ventureblog.com/'],['MacRumors.com','http://www.macrumors.com/'],['Kevin Kelly - Cool Tools','http://www.kk.org/cooltools/'],['Joi Ito\'s Web','http://joi.ito.com/'],['John Battelle\'s Searchblog','http://battellemedia.com/'],['Hack a Day','http://www.hackaday.com/'],['PVR Blog','http://www.pvrblog.com/pvr/'],['The Unofficial Apple Weblog','http://www.tuaw.com/'],['This Week in Tech','http://www.thisweekintech.com/'],['Amber MacArthur','http://www.ambermac.com/'],['Leo Laporte','http://www.leoville.com/blog/','http://leoville.com/blog/index.php/TLR/rss_2.0/'],['Dan Gillmor','http://bayosphere.com/blog/dangillmor']
]],['Languages',[ ['BBC World Service - Russian','http://www.bbc.co.uk/russian/'],['BBC World Service - Ukranian','http://www.bbc.co.uk/ukrainian/'],['BBC World Service - Polish','http://www.bbc.co.uk/polish/'],['BBC World Service - Czech','http://www.bbc.co.uk/czech/'],['BBC World Service - Hungarian','http://www.bbc.co.uk/hungarian/'],['BBC World Service - Romanian','http://www.bbc.co.uk/romanian/'],['BBC World Service - Bulgarian','http://www.bbc.co.uk/bulgarian/'],['BBC World Service - Slovene','http://www.bbc.co.uk/slovene/'],['BBC World Service - Slovak','http://www.bbc.co.uk/slovak/'],['BBC World Service - Albanian','http://www.bbc.co.uk/albanian/'],['BBC World Service - Serbian','http://www.bbc.co.uk/serbian/'],['BBC World Service - Croatian','http://www.bbc.co.uk/croatian/'],['BBC World Service - Macedonian','http://www.bbc.co.uk/macedonian/'],['BBC World Service - Greek','http://www.bbc.co.uk/greek/'],['BBC World Service - Turkish','http://www.bbc.co.uk/turkish/'],['BBC World Service - Spanish','http://www.bbc.co.uk/spanish/'],['BBC World Service - Portuguese','http://www.bbc.co.uk/portuguese/'],['BBC World Service - Caribbean','http://www.bbc.co.uk/caribbean/'],['BBC World Service - Arabic','http://www.bbc.co.uk/arabic/'],['BBC World Service - Somali','http://www.bbc.co.uk/somali/'],['BBC World Service - Swahili','http://www.bbc.co.uk/swahili/'],['BBC World Service - French','http://www.bbc.co.uk/french/'],['BBC World Service - Hausa','http://www.bbc.co.uk/hausa/'],
['BBC World Service - Great Lakes','http://www.bbc.co.uk/greatlakes/'],['BBC World Service - Persian','http://www.bbc.co.uk/persian/'],['BBC World Service - Pashto','http://www.bbc.co.uk/pashto/'],['BBC World Service - Turkish','http://www.bbc.co.uk/turkish/'],['BBC World Service - Urdu','http://www.bbc.co.uk/urdu/'],['BBC World Service - Hindi','http://www.bbc.co.uk/hindi/'],['BBC World Service - Bengali','http://www.bbc.co.uk/bengali/'],['BBC World Service - Nepali','http://www.bbc.co.uk/nepali/'],['BBC World Service - Sinhala','http://www.bbc.co.uk/sinhala/'],['BBC World Service - Tamil','http://www.bbc.co.uk/tamil/'],['BBC World Service - Chinese','http://www.bbc.co.uk/chinese/'],['BBC World Service - Indonesian','http://www.bbc.co.uk/indonesian/'],['BBC World Service - Vietnamese','http://www.bbc.co.uk/vietnamese/'],['BBC World Service - Thai','http://www.bbc.co.uk/thai/'],['BBC World Service - Burmese','http://www.bbc.co.uk/burmese/'],['BBC World Service - Azeri','http://www.bbc.co.uk/azeri/'],['BBC World Service - Uzbek','http://www.bbc.co.uk/uzbek/'],['BBC World Service - Kazakh','http://www.bbc.co.uk/kazakh/'],['BBC World Service - Kyrgyz','http://www.bbc.co.uk/kyrgyz/'],['Le Monde (French)','http://www.lemonde.fr/'],['Le Figaro (French)','http://www.lefigaro.fr/'],['La Tribune (French)','http://www.latribune.fr/'],['Les Echoes (French)','http://www.lesechos.fr/'],['L\'Express (French)','http://www.lexpress.presse.fr/info/'],['Nouvel Obs (French)','http://permanent.nouvelobs.com/','http://permanent.nouvelobs.com/rss_permanent.xml'],['Le Soir (Belgian)','http://www.lesoir.be/']
]]
]; for(var kD in uh){ var Wt=uh[kD]; Wt[1].sort(function(Su,FO){ try{ return Su[0].localeCompare(FO[0]); }catch(UP){ }if(Su<FO) return-1; if(Su>FO) return 1; return 0; }); }uh.sort(function(Su,FO){ try{ return Su[0].localeCompare(FO[0]); }catch(UP){ }if(Su<FO) return-1; if(Su>FO) return 1; return 0; }); var Ou=null; function cd(){ Ou=null; try{ Ou=new ActiveXObject("Msxml2.XMLHTTP"); }catch(UP){ try{ Ou=new ActiveXObject("Microsoft.XMLHTTP"); }catch(Vm){ Ou=false; }}if(!Ou&&typeof XMLHttpRequest!='undefined'){ Ou=new XMLHttpRequest(); }}cd(); var commandProcessor=new ej(); var wJ=false; function Lj(){ var Uh; Uh=((Ou.readyState==4)&&(Ou.status==200)); var av=((Ou.readyState==4)&&(Ou.status==401)); if(av){ if(OB!=null){ clearTimeout(OB); OB=null; }Vs(6); alert('WARNING: You appear to have logged out of Protopage (perhaps you had two browser windows open, and logged out from one of them while leaving this one open?). Protopage cannot save your changes after you log out. The change you just made will not be saved.'); }if(Uh){ if(OB!=null){ clearTimeout(OB); OB=null; }var gN=commandProcessor.SK[0]; var fZ=Ou.responseText; commandProcessor.SK.shift(); WU=setTimeout(eG(Lm),350); gN.XF(gN,fZ); setTimeout("commandProcessor.processQueuedCommands()",50); }}var OB=null; var WU=null; var Nt=20000; function ej(){ this.SK=new Array(); this.processQueuedCommands=function(){ if(this.SK.length==0){ return; }var gN=this.SK[0]; gN.xk(gN); var qF=''; qF+='<command accountId="'+gN.accountId+'" protopageId="'+gN.protopageId+'" protopagePath="'+gN.protopagePath+'" name="'+gN.name+'">'; for(var kD in gN.Nd){ qF+='<param name="'+gN.Nd[kD].name+'">'+gN.Nd[kD].value+'</param>'; }qF+='</command>'; Ou.open("POST",("/"+protopagePath+"/_api/command"),true); Ou.setRequestHeader("Content-Type","text/xml"); Ou.onreadystatechange=Lj; if(WU!=null){ clearTimeout(WU); WU=null; }Vs(1); OB=setTimeout(eG(Aj),Nt); Ou.send(qF); }; this.pl=function(gN){ if(!loggedIn){ if(protopagePath!='widget-test') Vs(3); if(gN.name=='save-content-panel'||gN.name=='save-links-panel') alert('WARNING: You are not logged in, so any changes will be lost. Please log in BEFORE making changes, or create a new untitled page to start experimenting (No registration required).'); return; }this.SK.push(gN); if(this.SK.length==1){ this.processQueuedCommands(); }}; }function Aj(){ if(!wJ){ wJ=true; try{Ou.abort();}catch(UP){ if(iL) alert("pp error 725: "+UP); }bZ(); return; }else{ wJ=false; }Vs(2); try{Ou.abort();}catch(UP){ if(iL) alert("pp error 724: "+UP); }}function bZ(){ setTimeout("commandProcessor.processQueuedCommands()",250); }var Lu=null; function Vs(state){ if(xA&&(state==3)) return; if(Lu==4) return; if(Lu==5&&state==1) state=5; Lu=state; var wa=document.getElementById('status-indicator'); wa.style.right='8px'; wa.style.bottom='62px'; switch(state){ case 0: wa.style.visibility='hidden'; break; case 1: wa.style.visibility='visible'; wa.innerHTML='Saving...'; break; case 2: wa.style.visibility='visible'; wa.innerHTML='        <div style="border:1px solid #000000; padding:3px;" class="scheme-body">          <div style="font-size:14px">            Could not establish a connection to the Protopage server - <br>            please check your internet connection.             <br>To try saving your changes again,             <a href="" onClick="'+Ck(bZ)+'(); return false;"><u><b>click here</b></u></a>.          </div>        </div>'; break; case 3: wa.style.visibility='visible'; wa.innerHTML='				<div style="border:1px solid #000000; padding:3px;" class="scheme-body">					<div style="font-size:20px">						<div id="createUntitledPagePrompt">							To create your own untitled page, <a onClick="return '+Ck(lw)+'(\'createUntitledPagePrompt\', \'/_api/newUntitledPage\');" href="">click here</a>						</div>						<div>							(No registration required)						</div>					</div>					<div style="padding-top:10px;">						If this is your page, your changes will not be saved unless you <a onclick="'+Ck(Ii)+'(true); return false;" href="">log in</a> first					</div>					<div style="padding-top:10px;">						<a onclick="'+Ck(Qw)+'(); return false;" href="">Hide this warning</a>					</div>				</div>'; break; case 4: wa.style.visibility='visible'; wa.innerHTML='    <img src="/web/images/homepage/wb-corner-nw.gif" style="position:absolute; left:0px; top:0px;">    <img src="/web/images/homepage/wb-corner-ne.gif" style="position:absolute; right:0px; top:0px;">    <img src="/web/images/homepage/wb-corner-sw.gif" style="position:absolute; left:0px; bottom:0px;">    <img src="/web/images/homepage/wb-corner-se.gif" style="position:absolute; right:0px; bottom:0px;">    <table width="970" cellpadding="0" cellspacing="0" border="0" class="scheme-body" style="background-color:#FFFFFF">      <tr>        <td valign="center" align="left" width="468" height="130">          <div style="padding-left:12px">            <img src="/web/images/homepage-logo.gif" border="0">          </div>        </td>        <td valign="center" align="left">          <div style="font-size:22px; color:#000000">            <div id="createUntitledPagePrompt">              To create your own free Protopage, <span style="font-size: 26px; font-weight:bold"><a style="color:#2954d1" onClick="return '+Ck(lw)+'(\'createUntitledPagePrompt\', \'/_api/newUntitledPage\');" href="">click here</a></span>            </div>          <div>            (No registration required)          </div>          <div style="padding-top:16px; font-size:14px; color:#000000">            Try it now - you\'re just one click away!<br><br>          </div>        </td>      </tr></table>'; wa.style.left='10px'; wa.style.top='10px'; wa.style.right=''; wa.style.bottom=''; wa.style.border='none'; wa.style.padding='0px'; break; case 5: wa.style.visibility='visible'; wa.innerHTML='<div style="font-size:20px;">Saving and Logging out...</div>'; break; case 6: wa.style.visibility='visible'; wa.innerHTML='        <div style="border:1px solid #000000; padding:3px;" class="scheme-body">          <div style="font-size:14px">            Could not save your changes because you logged out with a different browser window.<br>            <br>To try again, press CTRL-N to open a new browser window, log in, and then,             <a href="" onClick="'+Ck(bZ)+'(); return false;"><u><b>click here</b></u></a>.          </div>        </div>'; break; }}function lw(dc,url){ Uq(); if(!checkCookiesEnabled()){ return false; }else{ var EU=document.getElementById(dc); EU.innerHTML='You new page is being created - please wait...'; document.location.href=url; return false; }}function Lm(){ Vs(0); }function JX(accountId,protopageId,protopagePath,name,Nd){ this.accountId=accountId; this.protopageId=protopageId; this.protopagePath=protopagePath; this.name=name; this.Nd=Nd; this.XF=function(){return;}; this.xk=function(){return;}; this.tR=function(CD){ for(var kD in this.Nd){ var KJ=this.Nd[kD]; if(KJ.name==CD) return KJ.value; }}; this.Fh=function(CD,rr){ for(var kD in this.Nd){ var KJ=this.Nd[kD]; if(KJ.name==CD){ KJ.value=rr; break; }}}; }function cQ(name,value){ this.name=name; this.value=escape(value); }function Vl(gN){ var VO=gN.tR('id'); var tc=sX(VO); if(tc.Pb==null) return; gN.Fh('id',tc.Pb); }var TT=''; function aa(eH,pn,qR,Eq,nu,qf){ this.eH=eH; this.pn=pn; this.qR=qR; this.Eq=Eq; this.nu=nu; this.qf=qf; this.ZO=new Array(); this.BN=18; this.pX=document.createElement('div'); this.YD=document.createElement('div'); this.BU=document.createElement('div'); this.Dk=aT(); this.ri=aT(); this.Dk.width=this.BN; this.Dk.height=9; this.Dk.src=TT+'/web/dynamicImages/'+Ot+'/horiz-adjust-handle.gif'; this.ri.width=this.eH+this.BN; this.ri.height=1; this.ri.src=TT+'/web/dynamicImages/'+Ot+'/horiz-adjust-track.gif'; this.YD.style.position='relative'; this.YD.appendChild(this.Dk); this.BU.appendChild(this.ri); this.pX.appendChild(this.YD); this.pX.appendChild(this.BU); var cX=this; this.YD.onmousedown=function(UP){ lu(UP,cX.YD,null,function(Su,FO,KJ,EU){cX.jq(Su,FO,KJ,EU);},function(Su,FO,KJ,EU,UP,cp){cX.HP(Su,FO,KJ,EU,UP,cp);},function(Su,FO,KJ,EU,UP,cp){cX.eI(Su,FO,KJ,EU,UP,cp);}); }; }aa.prototype.Ee=function(){ this.Dk.src=TT+'/web/dynamicImages/'+Ot+'/horiz-adjust-handle.gif'; this.ri.src=TT+'/web/dynamicImages/'+Ot+'/horiz-adjust-track.gif'; }; aa.prototype.jq=function(Oj,lI,qk,dI){ this.sE=parseInt(this.YD.style.left); if(this.Eq) this.Eq(this.gL()); }; aa.prototype.HP=function(Oj,lI,PT,rq,qk,dI){ this.fB(PT); if(this.nu) this.nu(this.gL()); }; aa.prototype.eI=function(Oj,lI,PT,rq,qk,dI){ this.fB(PT); if(this.qf) this.qf(this.gL()); }; aa.prototype.qS=function(pn,qR){ this.pn=pn; this.qR=qR; }; aa.prototype.Rf=function(wN){ this.value=wN; var to=Math.round(((wN-this.pn)/(this.qR-this.pn))*this.eH); this.YD.style.left=to+'px'; this.ji(); }; aa.prototype.fB=function(PT){ var x=this.sE+PT; if(x<0) x=0; if(x>this.eH) x=this.eH; this.YD.style.left=x+'px'; this.value=((x/this.eH)*(this.qR-this.pn))+this.pn; this.ji(); }; aa.prototype.gL=function(){ return this.value; }; aa.prototype.kh=function(Co){ this.ZO.push(Co); }; aa.prototype.ji=function(){ var wN=this.gL(); for(var kD in this.ZO){ this.ZO[kD](wN); }}; function HV(nT,GW,RA){ this.nT=nT; this.GW=GW; this.RA=RA; var cX=this; this.rl=document.createElement('select'); for(var kD in this.GW){ var Pr=this.nT[kD]; var wN=this.GW[kD]; var kM=document.createElement('option'); kM.value=wN; kM.innerHTML=Pr; this.rl.appendChild(kM); }this.rl.onchange=function(){ RA(GW[cX.rl.selectedIndex]); }; this.rl.style.width='198px'; this.rl.style.margin='0px'; }HV.prototype.Rf=function(wN){ for(var kD in this.GW){ if(wN==this.GW[kD]) this.rl.selectedIndex=kD; }}; function MP(nT,GW,RA){ this.nT=nT; this.GW=GW; this.DC=new Array(); this.RA=RA; var cX=this; this.rl=document.createElement('div'); this.QL=uid(); var Kp=''; for(var kD in this.GW){ Kp+='<input type="radio" name="'+this.QL+'" value="'+this.GW[kD]+'">'; }this.rl.innerHTML=Kp; this.rl.style.textAlign='left'; var EM=this.rl.getElementsByTagName('INPUT'); for(var kD=0;kD<EM.length;kD++){ this.DC[kD]=EM[kD]; this.DC[kD].style.margin='0px'; this.DC[kD].style.padding='0px'; this.DC[kD].style.width='5ex'; this.DC[kD].onclick=function(){cX.IA();}; }for(var kD in this.DC){ var label=document.createElement('div'); label.style.display='inline'; label.className='scheme-body'; label.style.padding='10px'; label.innerHTML=this.nT[kD]+''; this.rl.replaceChild(label,this.DC[kD]); this.rl.insertBefore(this.DC[kD],label); }var span=document.createElement('span'); span.style.width='100%'; this.rl.appendChild(span); }MP.prototype.IA=function(){ for(var kD in this.DC){ if(this.DC[kD].checked){ this.RA(this.GW[kD]); break; }}}; MP.prototype.Rf=function(wN){ for(var kD in this.DC){ this.DC[kD].checked=(this.GW[kD]==wN); }}; function Yk(label,RA){ this.label=label; this.RA=RA; var cX=this; this.rl=document.createElement('div'); this.QZ=document.createElement('input'); this.QZ.type='checkbox'; this.QZ.onclick=function(){cX.ps();}; this.QZ.style.margin='1px'; this.QZ.style.width='4ex'; var text=document.createElement('span'); text.className='scheme-body'; text.innerHTML=label; text.style.paddingLeft='6px'; this.rl.appendChild(this.QZ); this.rl.appendChild(text); }Yk.prototype.ps=function(){ if(this.QZ.checked) this.RA(true); else this.RA(false); }; Yk.prototype.Rf=function(wN){ this.QZ.checked=wN; }; function Mv(RA){ this.rl=document.createElement('input'); this.rl.type='text'; this.rl.style.width='194px'; this.rl.style.margin='0px'; this.rl.style.padding='0px'; }Mv.prototype.Rf=function(wN){ this.rl.value=wN; }; Mv.prototype.gL=function(){ return this.rl.value; };var xb=new Array(); function hD(rl,Ns,UB,nx,GT,Yj,gB){ this.rl=rl; this.Ns=Ns; this.nx=nx; this.GT=GT; this.UB=UB; this.Yj=Yj; this.gB=gB; this.VQ=null; this.TX=null; this.PG=GT?'3x-sw.png':'drop-shadow-bottom-left.png'; this.fY=GT?'3x-s.png':'drop-shadow-bottom.png'; this.EC=GT?'3x-se.png':'drop-shadow-bottom-right.png'; this.ZH=GT?'3x-e.png':'drop-shadow-right.png'; this.pj=GT?'3x-ne.png':'drop-shadow-top-right.png'; this.Xj=(GT&&gB)?'3x-nw.png':null; this.DA=(GT&&gB)?'3x-n.png':null; this.fb=(GT&&gB)?'3x-w.png':null; this.Rb=this.GT?13:8; this.be=this.GT?4:4; var vd=nx; this.XC=document.createElement('div'); this.XC.style.position='absolute'; this.XC.style.overflow='visible'; this.XC.style.left='0px'; this.XC.style.top='0px'; this.fD(); this.xx=document.createElement('div'); this.WY=document.createElement('div'); Ue(this.xx,this.PG,vd); Ue(this.WY,this.fY,vd); this.Do(this.xx); this.Do(this.WY); this.XC.appendChild(this.xx); this.XC.appendChild(this.WY); if(this.Ns){ this.UZ=document.createElement('div'); this.WL=document.createElement('div'); this.dC=document.createElement('div'); Ue(this.UZ,this.EC,vd); Ue(this.WL,this.ZH,vd); Ue(this.dC,this.pj,vd); this.Do(this.UZ); this.Do(this.WL); this.Do(this.dC); this.XC.appendChild(this.UZ); this.XC.appendChild(this.WL); this.XC.appendChild(this.dC); }if(this.gB){ this.wd=document.createElement('div'); this.xn=document.createElement('div'); this.bc=document.createElement('div'); Ue(this.wd,this.Xj,vd); Ue(this.xn,this.DA,vd); Ue(this.bc,this.fb,vd); this.Do(this.wd); this.Do(this.xn); this.Do(this.bc); this.XC.appendChild(this.wd); this.XC.appendChild(this.xn); this.XC.appendChild(this.bc); }UB.appendChild(this.XC); this.EW(this.nx); this.position(); xb.push(this); }hD.prototype.remove=function(){ this.UB.removeChild(this.XC); var KJ=null; for(var kD in xb) if(xb[kD]==this) KJ=kD; if(KJ){ if(KJ==0) xb.shift(); else xb=xb.slice(0,KJ).concat(xb.slice(KJ+1)); }}; hD.prototype.EW=function(state){ this.sf=state; this.XC.style.display=this.sf?'block':'none'; }; hD.prototype.PP=function(AZ){ PP(this.XC,AZ); }; hD.prototype.fD=function(){ if(this.Yj) this.XC.style.zIndex=this.rl.style.zIndex-1; }; hD.prototype.position=function(){ try{ var pX=this.rl; var Kk=parseInt(pX.style.left); var wM=Kk+parseInt(pX.style.width); var Ko=parseInt(pX.style.top); var cU; if(pX.style.height!=null){ cU=Ko+parseInt(pX.style.height); }else{ cU=Ko+pX.offsetHeight; }if(isNaN(Kk)||isNaN(wM)||isNaN(Ko)||isNaN(cU)){ var wm=parseInt(pX.style.left); var ph=parseInt(pX.style.top); var Sc=parseInt(pX.style.right); var wW=parseInt(pX.style.bottom); if(isNaN(wm)) wm=0; if(isNaN(ph)) ph=0; if(isNaN(Sc)) Sc=0; if(isNaN(wW)) wW=0; Kk=wm; wM=Kk+pX.offsetWidth; Ko=ph; cU=Ko+pX.offsetHeight; }var BV=this.GT?-5:0; var rU=this.xx.style; if(this.gB){ rU.left=(Kk+BV)+"px"; }else{ rU.left=(Kk+this.be)+"px"; }rU.top=cU+BV+"px"; var FO=this.WY.style; FO.left=(Kk+this.be+this.Rb)+"px"; FO.top=cU+BV+"px"; if(this.gB){ FO.left=(Kk+BV+this.Rb)+"px"; FO.width=(wM-(Kk+BV+this.Rb))+BV+"px"; }else{ FO.left=(Kk+this.be+this.Rb)+"px"; FO.width=(wM-(Kk+this.be+this.Rb))+BV+"px"; }if(this.Ns){ var gP=this.dC.style; gP.left=wM+BV+"px"; if(this.gB){ gP.top=(Ko+BV)+"px"; }else{ gP.top=(Ko+this.be)+"px"; }var CP=this.WL.style; if(this.gB){ CP.height=(cU-(Ko+BV+this.Rb))+BV+"px"; CP.top=(Ko+BV+this.Rb)+"px"; CP.left=wM+BV+"px"; }else{ CP.height=(cU-(Ko+this.be+this.Rb))+BV+"px"; CP.top=(Ko+this.be+this.Rb)+"px"; CP.left=wM+BV+"px"; }var jP=this.UZ.style; jP.left=wM+BV+"px"; jP.top=cU+BV+"px"; }if(this.gB){ var Jp=this.wd.style; Jp.left=Kk+BV+"px"; Jp.top=(Ko+BV)+"px"; var TS=this.xn.style; TS.left=Kk+this.Rb+BV+"px"; TS.top=(Ko+BV)+"px"; TS.width=(wM-(Kk+BV+this.Rb))+BV+"px"; var Pr=this.bc.style; Pr.left=Kk+BV+"px"; Pr.top=Ko+this.Rb+BV+"px"; Pr.height=(cU-(Ko+BV+this.Rb))+BV+"px"; }}catch(UP){}}; hD.prototype.Do=function(rl){ rl.style.position='absolute'; rl.style.top='0px'; rl.style.left='0px'; rl.style.width=this.Rb+'px'; rl.style.height=this.Rb+'px'; rl.style.fontSize='1px'; }; function Ue(rl,Ev,state){ if(fW){ rl.style.backgroundImage='url(/web/images/'+Ev+')'; rl.style.backgroundRepeat='repeat'; }if(isIE){ rl.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/web/images/"+Ev+"', sizingMethod='scale')"; rl.style.backgroundRepeat='no-repeat'; }}; function YB(){ for(var kD in panelDatas){ if(panelDatas[kD].IL==uN) panelDatas[kD].bC(); }};var iL=false; var aB=(new Date()).getTime(); bk=''; var removedPanelDatas=new Array(); var Lg=true; var maxPanelZIndex; var co=false; var qC; isIE=((kD=navigator.userAgent.indexOf("MSIE"))>=0); fW=isIE?false:true; Am=false; IO=false; Am=navigator.userAgent.indexOf("Safari")!=-1; IO=navigator.userAgent.indexOf("Opera")!=-1; var ZN=null; var en=null; var Jr=null; var dr=null; var pr=null; var mg=false; var nl=false; var rK=false; var nA,QR,oD,SM,uV,eA,tG,aU,Hv; var ur=false; var eO=null; var tJ; var Jm; var Jq; var Ru; var nv; var Nu; var ir=-1; var xA=false; var sP=0; var NV=0; var uN=0; var tt=8; var DI=4; var vt=8; var DK=8; var Ae=127; var Sv=39; var ZE=2; var Us=-1; var bf=-2; var Ei=-3; var lA=-4; var YJ=-5; var Eh=-6; var fl=-101; var RB=-102; var DZ=-103; var RT=-104; var kK="onmousemove"; var HH="onmousedown"; var lL="onmouseover"; var Pc="onmouseup"; var tv="onmouseout"; var kk="onclick"; var aM="ondblclick"; var Px="mousemove"; var Hl="mousedown"; var Mf="mouseover"; var jL="mouseup"; var rW="mouseout"; var ED="click"; var HE="dblclick"; function uP(id,title,Kp,eZ,Ps,dR,Fv){ if(Kp==null) Kp=''; var pX=document.createElement('div'); pX.id=id; pX.className='panel'; pX.style.display='none'; var gE=document.createElement('div'); gE.className='panel-header scheme-header'; if(eZ){ pX.style.left=Ps+'px'; pX.style.top=dR+'px'; gE.style.cursor='Move'; gE.onmousedown=function(UP){ lu(UP,pX,null,vs,vC,BG); }; }else{ gE.style.cursor='default'; }gE.innerHTML='<div class="panel-title" style="padding: 2px 4px 2px 4px;">'+title+'</div>'; pX.appendChild(gE); var kl=document.createElement('div'); kl.innerHTML=Kp; if(Fv){ kl.appendChild(Fv); }pX.appendChild(kl); eM().appendChild(pX); }function TH(id,ag){ var Cj=document.getElementById(id); Cj.style.display=ag?'block':'none'; }var pQ,Pv; function vs(FT,Hr,bK,jD){ pQ=parseInt(FT.style.left); Pv=parseInt(FT.style.top); }function vC(FT,Hr,PT,rq,bK,jD){ FT.style.left=(pQ+PT)+'px'; FT.style.top=(Pv+rq)+'px'; }function BG(){ }var XG=true; function updateCalendar(){ var EU=new Date(); document.getElementById('calendar-day-of-month').innerHTML=EU.getDate()+''; document.getElementById('calendar-top-line').innerHTML=Ff[EU.getMonth()]+' '+xv(EU); document.getElementById('calendar-bottom-line').innerHTML=sI[EU.getDay()]+' '+oU(EU); Jm.rl.style.width=document.getElementById('calendar-main-table').offsetWidth+'px'; if(XG){ XG=false; return; }Ia(); }function MM(){ Jm=new Object(); Jm.rl=document.createElement('div'); var qI=''; if(Am) qI='padding-top:0.3em; '; var Kp=
'<table id="calendar-main-table" cellpadding="0" cellspacing="4" class="toolbar" border="0">			<tr valign="middle">				<td rowspan="2" valign="middle" style="vertical-align: middle; height:100%">					<div id="calendar-day-of-month" style="white-space:nowrap; padding-left:5px; padding-right:3px; font-size:26px; font-family:Arial, Helvetica, sans-serif; font-weight:bold; font-style:italic;">x</div>				</td>				<td valign="middle" style="vertical-align: middle; height:100%">					<div id="calendar-top-line" style="'+qI+'white-space:nowrap; font-size:10px; font-family:Arial, Helvetica, sans-serif; font-weight:bold;">x</div>					<div id="calendar-bottom-line" style="white-space:nowrap; font-size:10px; font-family:Arial, Helvetica, sans-serif; font-weight:bold;">x</div>				</td>			</tr></table>'; Jm.rl.id='calendar'; Jm.rl.style.position='absolute'; Jm.rl.style.left='0px'; Jm.rl.style.top='0px'; Jm.rl.style.backgroundColor='#ffffff'; Jm.rl.style.cursor='default'; Jm.rl.style.zIndex=100000; Jm.rl.innerHTML=Kp; eM().appendChild(Jm.rl); updateCalendar(); Jm.dL=new hD(Jm.rl,false,eM(),true,false,true); Jm.popup=new Object(); Jm.xF=false; var popup=Jm.popup; popup.rl=document.createElement('div'); popup.rl.style.position='absolute'; popup.rl.style.visibility='hidden'; popup.rl.style.top='0px'; popup.rl.style.left='0px'; popup.rl.style.backgroundColor='#ffffff'; popup.rl.style.cursor='default'; popup.rl.style.textAlign='left'; popup.rl.style.width='36ex'; popup.rl.style.padding='10px'; popup.rl.style.zIndex=100000; popup.rl.innerHTML='testing 123'; eM().appendChild(popup.rl); popup.dL=new hD(popup.rl,false,eM(),false,false,true); Jm.rl.onmouseover=function(){ if(Jm.xF) return; var EU=new Date(); EU.setDate(1);EU.setHours(0,0,0,0); Jm.popup.currentDate=EU; Bg(); popup.rl.style.top=Jm.rl.offsetHeight+'px'; popup.rl.style.left=(FX()-popup.rl.offsetWidth)+'px'; popup.rl.style.visibility='visible'; popup.dL.position(); popup.dL.EW(true); }; Rm([Jm.rl,popup.rl],function(){ popup.rl.style.visibility='hidden'; popup.rl.style.top='-10000px'; popup.rl.style.left='-10000px'; Jm.popup.dL.EW(false); Jm.xF=false; }); }function Bg(){ var eQ=Ff; var df=Jm.popup.rl; df.innerHTML=BM(Jm.popup.currentDate); df.style.border='1px dashed #777777'; var vu=document.createElement("table"); var Sm=document.createElement("tbody"); var dU=document.createElement("tr"); var Qq=document.createElement("td"); var Vx=document.createElement("td"); var oM=document.createElement("td"); var JA=document.createElement("img"); var SX=document.createElement("img"); vu.border=0; vu.align='center'; vu.width='100%'; vu.style.paddingBottom='1em'; Qq.appendChild(JA); oM.appendChild(SX); dU.appendChild(Qq); dU.appendChild(Vx); dU.appendChild(oM); Sm.appendChild(dU); vu.appendChild(Sm); MD=function(){ var KV=Jm.popup.currentDate.getMonth(); if(KV==0){ Jm.popup.currentDate.setMonth(11); Jm.popup.currentDate.setFullYear(Jm.popup.currentDate.getFullYear()-1); }else{ Jm.popup.currentDate.setMonth(KV-1); }Bg(); Jm.popup.dL.position(); }; if(isIE){ JA.onmouseup=MD; }else{ Lo(JA,MD); }JA.src='/web/images/chevron-left.gif'; Vx.innerHTML=eQ[Jm.popup.currentDate.getMonth()]+"&nbsp;&nbsp;"+xv(Jm.popup.currentDate); Vx.align="center"; Vx.style.width="100%"; Vx.style.fontFamily='arial, helvetica'; Vx.style.fontSize='14px'; var oj=function(){ var KV=Jm.popup.currentDate.getMonth(); if(KV==11){ Jm.popup.currentDate.setMonth(0); Jm.popup.currentDate.setFullYear(Jm.popup.currentDate.getFullYear()+1); }else{ Jm.popup.currentDate.setMonth(KV+1); }Bg(); Jm.popup.dL.position(); }; if(isIE){ SX.onmouseup=oj; }else{ Lo(SX,oj); }SX.src='/web/images/chevron-right.gif'; df.insertBefore(vu,df.firstChild); return df; }function BM(){ var bW=new Date(); var ef=['Mon','Tue','Wed','Thu','Fri','Sat','Sun']; var QD="<table align='center' border=0 style='font-family: arial,helvetica; font-size: 11px; text-align: center;'>"; QD+="<tr style='font-family: arial,helvetica; font-size: 10px;'>"; for(var kD in ef){ QD+='<td style="width:12ex">'+ef[kD]+'</td>'; }QD+="</tr><tr>"; Sq=Jm.popup.currentDate.getDay(); if(Sq==0) { Sq=7; }ob=Sq-((Jm.popup.currentDate.getDate()%7)-1); if(ob<0) { ob+=7; }Sq=1; var EU=new Date(Jm.popup.currentDate.getTime()); var HU=0; EU.setDate(27); var Ne=EU.getMonth(); while(true){ EU.setTime(EU.getTime()+1000*60*60*24); if(EU.getMonth()==Ne) HU=EU.getDate(); else break; }for(kD=1;kD<(HU+ob);kD++) { currentStyle=""; if(kD<ob) { QD+="<td></td>"; continue; }if(kD%7==6||kD%7==0) { currentStyle='color: #565656;'; }else { currentStyle='color: #000000;'; }if(Sq==bW.getDate()&&Jm.popup.currentDate.getMonth()==bW.getMonth()&&Jm.popup.currentDate.getFullYear()==bW.getFullYear()){ currentStyle+=' font-weight:bold; font-size:13px'; }QD+="<td style='"+currentStyle+"'>"+Sq+"</td>"; Sq+=1; if((kD%7)==0) { QD+="</tr><tr>"; }}QD+="</tr></table>"; return QD; }function kq(){ if(!loggedIn){ tJ=new sj(BZ(),false,true,eM(),null); }else{ if(Cw()){ tJ=new sj(Fc(),false,true,eM(),null); }else{ tJ=new sj(Fr(),false,true,eM(),null); }}tJ.QV(function(){ tJ.EI(); tJ.pX.style.zIndex=10000000; tJ.dL.XC.style.zIndex=9999999; tJ.mf(LS(),LY()); tJ.EW(true); HX(false,false,false,true); Nu=new ZV(); uP('scheme-config','Color Scheme','',true,0,0,Nu.pX); }); }function uY(){ var Ch=new Array(); if(branding=='FT'){ Ch.push(new bF('Add FT currency converter','add-widget',null,function(){ fg(fl,'FT currency converter',282,124); })); Ch.push(new bF('Add FT market summary','add-widget',null,function(){ fg(RB,'FT market summary',493,178); })); Ch.push(new bF('Add FT news and quotes search','add-widget',null,function(){ fg(RT,'FT Search',160,108); })); Ch.push(new bF('Add FT archive search','add-widget',null,function(){ fg(DZ,'FT archive search',484,292); })); }Ch.push(new bF('Add web page','add-widget',null,function(){ fg(YJ,'Web page',460,490); })); Ch.push(new bF('Add photo','add-widget',null,function(){ fg(lA,'Photo upload',248,352); })); Ch.push(new bF('Add email inbox','add-widget',null,function(){ fg(Ei,'Email inbox'); })); Ch.push(new bF('Add weather','add-widget',null,function(){ fg(bf,'Santa Monica, CA'); })); Ch.push(new bF('Add bookmarks','add-panel',null,function(){ Ib(); })); Ch.push(new bF('Add news feeds','add-panel',null,function(){ pS(); })); Ch.push(new bF('Add sticky note','add-panel',null,function(){ var bV=Ur(); XT(bV); })); return Ch; }function Fr(){ var Wh=[ new bF('Read the Protopage news blog','more',null,function(){ return Sp('http://blog.protopage.com'); }),new bF('Set this as your homepage','settings',null,function(){ return Sp('/_api/setAsHomepage?path='+protopagePath); }),new bF('Invite a friend ','more',null,function(){ return Sp('/'+protopagePath+'/_api/sendInvitations'); }),new bF('Send us feedback / suggestions','more',null,function(){ return Sp('/_api/contact'); }),new bF('More about Protopage','more',null,function(){ return Sp('/protopage/about'); }),
new bF('Your account settings','settings',null,function(){ return Sp('/'+protopagePath+'/_api/editAccount'); }) ]; var sq=[ new bF('About','more',Wh,null),new bF('Log out','key',null,function(){ Ii(true); return false; }),new bF('Colors / settings','colors',null,function(){ Ro(); return false; }),
new bF('Add widget','add-widget',uY(),null) ]; return sq; }function BZ(){ var sq=new Array(); sq.push(new bF('Legal / privacy','more',null,function(){ return Sp('/web/terms.html'); })); if(protopagePath=='v2'){ sq.push(new bF('More About Protopage','more',null,function(){ return Sp('/protopage/about'); })); }else{ sq.push(new bF('About Protopage','more',null,function(){ return Sp('/'); })); }sq.push(new bF('Log in','key',null,function(){ Ii(true); return false; })); return sq; }function Fc(){ var sq=[ new bF('Legal / privacy','more',null,function(){ return Sp('/web/terms.html'); }),new bF('About Protopage','more',null,function(){ return Sp('/'); }),new bF('Colors / settings','colors',null,function(){ Ro(); return false; }),
new bF('Add widget','add-widget',uY(),null) ]; return sq; }function bF(label,Pp,eD,PU){ this.label=label; this.Pp=Pp; this.eD=eD; this.PU=PU; }bF.prototype.Fg=function(){ if(!this.Tk){ this.Tk=aT(); this.Tk.src=this.Xs('000000'); PP(this.Tk,15,true); this.Tk.style.position='absolute'; this.Tk.style.width=parseInt(this.pX.style.width)+'px'; this.Tk.style.height=parseInt(this.pX.style.height)+'px'; this.Tk.style.zIndex=10; this.Tk.style.visibility='hidden'; this.pX.appendChild(this.Tk); }if(!this.pZ){ this.pZ=aT(); this.pZ.src=this.Xs('ffffff'); PP(this.pZ,75,true); this.pZ.style.position='absolute'; this.pZ.style.width=parseInt(this.pX.style.width)+'px'; this.pZ.style.height=parseInt(this.pX.style.height)+'px'; this.pZ.style.zIndex=10; this.pZ.style.visibility='hidden'; this.pX.appendChild(this.pZ); }if(this.eD==null){ this.Tk.style.visibility='visible'; }else{ this.pZ.style.visibility='visible'; this.lX.EW(true); this.xc(); }}; bF.prototype.xc=function(){ var da=parseInt(this.lX.pX.style.width); var xd=parseInt(this.pX.style.width); var rU=parseInt(this.pX.style.left); var Ml=parseInt(this.pX.parentNode.style.width); if((rU+da)>Ml) da=xd; this.dN.style.width=da+'px'; this.dN.style.visibility='visible'; }; bF.prototype.DD=function(){ this.dN.style.visibility='hidden'; }; bF.prototype.FW=function(){ this.Tk.style.visibility='hidden'; this.pZ.style.visibility='hidden'; if(this.eD!=null){ this.lX.EW(false); this.DD(); }}; bF.prototype.click=function(){ this.FW(); if(this.PU) this.PU(); }; bF.prototype.Xs=function(DM){ return '/web/dynamicImages/'+DM+'/pixel.gif'; }; var de='/web/images/toolbar/'; var gl='/web/toolbarText/'; function sj(CL,DJ,hj,parentElement,LE){ this.CL=CL; this.DJ=DJ; this.hj=hj; this.parentElement=parentElement; this.LE=LE; for(var kD in this.CL) this.CL[kD].LE=this; }sj.prototype.EW=function(state){ this.pX.style.visibility=state?'visible':'hidden'; if(this.dL) this.dL.EW(state); }; sj.prototype.QV=function(Dj){ var qa=new Array(); for(var kD in this.CL){ var FO=this.CL[kD]; FO.CO=aT(); FO.CO.src=de+FO.Pp+'.gif'; qa.push(FO.CO); if(this.DJ){ FO.pJ=aT(); FO.pJ.src=gl+escape(FO.label); qa.push(FO.pJ); }if(FO.eD==null) continue; for(var kG in FO.eD){ var kM=FO.eD[kG]; kM.CO=aT(); kM.CO.src=FO.CO.src; qa.push(kM.CO); if(this.DJ){ kM.pJ=aT(); kM.pJ.src=gl+escape(kM.label); qa.push(kM.pJ); }}}var cX=this; var Kv=new hX(); Kv.QX(qa,function(){ Dj(); }); }; sj.prototype.EI=function(){ var Bb=12; var Ad=this.hj?7:5; var eP=6; this.pX=document.createElement('div'); this.rl=this.pX; this.pX.id='dynamic-toolbar-'+uid(); this.pX.style.position='absolute'; this.pX.style.visibility='hidden'; this.pX.style.backgroundColor='#ffffff'; var xJ=0; var cb=0; var ed=0; for(var kD=0;kD<this.CL.length;kD++){ var FO=this.CL[kD]; FO.pX=document.createElement('a'); FO.pX.style.position='absolute'; FO.pX.style.overflow='visible'; FO.pX.style.backgroundColor='#ffffff'; FO.pX.style.cursor=(FO.eD==null)?'pointer':'default'; if(this.hj){ FO.pX.style.left=xJ+'px'; FO.pX.style.top=0+'px'; }else{ FO.pX.style.left=0+'px'; }FO.CO.style.position='absolute'; FO.CO.style.left=12+'px'; FO.pX.appendChild(FO.CO); FO.fm=document.createElement('div'); FO.fm.style.position='absolute'; var body=eM(); var Pm; var RM; if(this.DJ){ FO.fm.innerHTML='<img src="'+FO.pJ.src+'">'; Pm=FO.pJ.width; RM=FO.pJ.height; }else{ FO.fm.innerHTML=FO.label; FO.fm.style.color='#000000'; FO.fm.style.fontFamily='Arial, Helvetica, sans-serif'; FO.fm.style.fontSize='11px'; FO.fm.style.visibility='hidden'; body.appendChild(FO.fm); Pm=FO.fm.offsetWidth; RM=FO.fm.offsetHeight; body.removeChild(FO.fm); FO.fm.style.visibility=''; }FO.fm.style.height=RM+'px'; FO.fm.style.width=Pm+'px'; FO.fm.style.left=(Bb+FO.CO.width+eP)+'px'; FO.pX.appendChild(FO.fm); var BS=Bb+FO.CO.width+Ad+Pm+Bb; FO.pX.style.width=BS+'px'; xJ+=BS; if(cb<RM) cb=RM; if(ed<Pm) ed=Pm; }var mx=cb+Ad+Ad; var qh=Bb+FO.CO.width+Ad+ed+Bb; if(this.hj){ this.pX.style.height=mx+'px'; this.pX.style.width=xJ+'px'; }else{ this.pX.style.height=(mx*this.CL.length)+'px'; this.pX.style.width=qh+'px'; }for(var kD=0;kD<this.CL.length;kD++){ var FO=this.CL[kD]; FO.pX.style.height=mx+'px'; if(!this.hj){ var BS=Bb+this.CL[0].CO.width+Ad+ed+Bb; FO.pX.style.width=BS+'px'; FO.pX.style.top=(mx*kD)+'px'; }FO.CO.style.top=this.hG(FO.CO.height,mx)+'px'; FO.fm.style.top=this.hG(parseInt(FO.fm.style.height),mx)+'px'; this.pX.appendChild(FO.pX); if(FO.eD!=null){ FO.dN=document.createElement('div'); FO.dN.style.backgroundImage='url(/web/images/toolbar/options-delimiter.gif)'; FO.dN.style.backgroundRepeat='repeat-x'; FO.dN.style.position='absolute'; FO.dN.style.top='0px'; FO.dN.style.left='0px'; FO.dN.style.height='1px'; FO.dN.style.width='0px'; FO.dN.style.zIndex=40; FO.dN.style.visibility='hidden'; FO.pX.appendChild(FO.dN); FO.lX=new sj(FO.eD,this.DJ,false,FO.pX,this); FO.lX.EI(); FO.lX.pX.style.overflow='hidden'; FO.lX.mf(0,0-parseInt(FO.lX.pX.style.height)); }this.ei(FO); }this.parentElement.appendChild(this.pX); this.dL=new hD(this.pX,true,this.parentElement,false,false,true); }; sj.prototype.Hx=function(mA){ return this.CL[mA]; }; sj.prototype.mf=function(x,y){ this.pX.style.left=x+'px'; this.pX.style.top=y+'px'; if(this.dL) this.dL.position(); for(var kD=0;kD<this.CL.length;kD++){ var FO=this.CL[kD]; if(FO.eD!=null){ }}}; sj.prototype.ei=function(wO){ LD(wO.pX,function(Ek){ wO.Fg(); }); Xq(wO.pX,function(Ek){ wO.FW(); }); qe(wO.pX,function(Ek){ wO.click(); return false; }); }; sj.prototype.hG=function(height,dj){ var Su=Math.floor(dj/2); var FO=Math.floor(height/2); return Su-FO; }; function ng(){ document.write('	<form style="margin:0px; padding:0px;" id="registerForm" method="POST" action="'+protopagePath+'/_api/register">	</form>'); }function kS(){ document.write('		<div id="status-indicator" class="status-indicator scheme-body" style="visibility:hidden;">		Saving...	</div>'); }function qd(){ document.write('		<div id="expiry-warning" class="expiry-warning scheme-body" style="visibility:hidden;">			</div>'); }function iF(){ uP('login','Login','			<div style="position: relative; top:0px; left:0px;">				<div class="panel-content scheme-body" style="position:relative; padding: 6px; font-size:11px;">					<form name="loginForm" id="loginForm" action="_api/login" style="margin:0px; padding:0px;" method="POST">						<div style="margin-top: 0px;">							<div>Protopage name</div>							<div style="margin-top: 3px;">								<input id="loginField-protopagePath" name="protopagePath" type="text" value="" tabindex="1">							</div>						</div>						<div style="margin-top: 10px;">							<div>Password</div>							<div style="margin-top: 3px;">								<input onKeyPress="'+Ck(HR)+'(\'loginForm\', event);" id="loginField-password" name="password" type="password" tabindex="2">							</div>						</div>					</form>										<div style="text-align:right; padding-right:6px; padding-top:10px; font-size:11px; overflow:visible;">						<a tabindex="4" class="scheme-body" href="" onClick="'+Ck(Ii)+'(false); return false;">Cancel</a>						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;						<a tabindex="3" class="scheme-body" href="" onClick="document.getElementById(\'loginForm\').action = \'/\'+document.getElementById(\'loginField-protopagePath\').value+\'/_api/login\'; document.getElementById(\'loginForm\').submit(); return false;">OK</a>					</div>						<div style="text-align:right; padding-right:6px; padding-top:10px; overflow:visible;">						<a class="scheme-body" style="font-size:11px;" href="/_api/forgottenPassword">Forgot your password?</a>					</div>					</div>			</div>'); }function es(){ uP('add-new-link','Add item to your protopage','		<div style="position: relative; top:0px; left:0px;">			<div class="panel-content scheme-body" style="position:relative; padding: 6px; font-size:11px;">				<div style="margin-top: 0px;">					<div>Add item as a:</div>					<div style="margin-top: 3px; font-size:12px; padding-bottom:10px">						Bookmark link<input id="add-new-item-as-link-radio" name="add-new-item-as-radio-group" type="radio" checked class="scheme-body" >						News feed<input id="add-new-item-as-feed-radio" name="add-new-item-as-radio-group" type="radio" class="scheme-body" >	        </div>				</div>				<div style="margin-top: 0px;">					<div>Link title</div>					<div style="margin-top: 3px;">						<input id="add-new-link-title" name="title" type="text" value="title text" class="scheme-body" style="width:300px" >					</div>				</div>				<div style="margin-top: 10px;">					<div>Link address</div>					<div style="margin-top: 3px;">						<input id="add-new-link-address" name="address" type="text" value="address text" class="scheme-body" style="width:300px"  >					</div>				</div>				<div id="add-new-link-panel-div" style="margin-top: 10px;">					<div>Choose a panel to add the link to</div>					<div style="margin-top: 3px;">						<select class="scheme-body" id="add-new-link-panel-choice" style="padding:0px; font-size:11px; width:300px;">							<option value="jim">test content</option>						</select>					</div>				</div>				<div id="add-new-feed-panel-div" style="margin-top: 10px; display:none">					<div>Choose a panel to add the feed to</div>					<div style="margin-top: 3px;">						<select class="scheme-body" id="add-new-feed-panel-choice" style="padding:0px; font-size:11px; width:300px;">							<option value="jim">test content</option>						</select>					</div>				</div>				<div style="position:relative; margin-top: 12px; text-align:right;">					<div>						<a class="scheme-body" href="" onClick="document.getElementById(\'add-new-link\').style.display = \'none\'; return false;">Cancel</a>						&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;						<a class="scheme-body" href="" onClick="document.getElementById(\'add-new-link\').style.display = \'none\'; addNewLink(); return false;">OK</a>					</div>				</div>			</div>		</div>'); }function rN(){ uP('choose-protopage-for-new-link','Please make a selection','		<div style="position: relative; top:0px; left:0px;">			<div class="panel-content scheme-body" style="position:relative; padding: 16px; font-size:11px;">								<div>					<h1>Which page would you like to add this bookmark/feed to?</h1>				</div>												<div style="font-size:16px;">					<ul id="choose-protopage-for-new-link-ul" style="padding-right:16px;">						<li style="padding-top:14px;"><div id="createUntitledPagePrompt2"><a onclick="return '+Ck(lw)+'(\'createUntitledPagePrompt2\', \'/_api/newUntitledPage?newLinkLabel='+escape(pageParams['label'])+'&newLinkUrl='+escape(pageParams['url'])+'&newType='+escape(pageParams['type'])+'\');" href="">Create a new untitled page</a> (no registration required)</div></li>					</ul>				</div>												<div style="padding-top:28px; font-size:12px;">					If you wish to add the bookmark/feed to a page not listed above, please log in first.				</div>											</div>		</div>',true,100,100); var ku=document.getElementById('choose-protopage-for-new-link-ul'); var Tq=pI(); for(var kD in Tq){ var oY=document.createElement('li'); oY.innerHTML='<a href="/'+Tq[kD]+'?newLinkLabel='+escape(pageParams['label'])+'&newLinkUrl='+escape(pageParams['url'])+'&newType='+escape(pageParams['type'])+'">'+Tq[kD]+'</a>'; ku.insertBefore(oY,ku.firstChild); }}function dk(){ uP('processing-invitation','Protopage Invitation','		<div style="position: relative; top:0px; left:0px;">			<div class="panel-content scheme-body" style="position:relative; padding: 40px; font-size:11px;">								<div>					<h1><div id="processingInvitationMessage"><a onclick="return '+Ck(lw)+'(\'processingInvitationMessage\', \'/_api/newUntitledPage\');" href="">Create your new untitled page</a> (no registration required)</div></h1>				</div>											</div>		</div>',true,100,100); }function Qb(){ nv=new Object(); nv.pX=document.createElement('div'); nv.rl=nv.pX; if(!loggedIn) return; var Kp='<table cellpadding=0 cellspacing=0><tr><td class="panel-dock"><div id="panel-dock-label" style="white-space:nowrap">x</div></td><td valign="middle">	<div style="padding-left:8px"><img id="panel-dock-undock-img" src="/web/dynamicImages/000000/undock-centered.gif"></div></td></tr></table>'; nv.pX.innerHTML=Kp; nv.pX.style.position='absolute'; nv.pX.style.left='180px'; nv.pX.style.top='0px'; nv.pX.style.backgroundColor='#ffffff'; nv.pX.className='panel-dock'; nv.pX.style.paddingLeft='10px'; nv.pX.style.paddingRight='9px'; nv.pX.style.paddingTop='4px'; nv.pX.style.paddingBottom='4px'; nv.pX.style.cursor='default'; nv.pX.style.zIndex=10000000; nv.pX.style.overflow='visible'; eM().appendChild(nv.pX); nv.OG=document.getElementById('panel-dock-label'); nv.oP=document.getElementById('panel-dock-undock-img'); nv.Fv=document.createElement('div'); nv.Fv.innerHTML='abcdefg<br>abcdefg<br>abcdefg<br>abcdefg<br>abcdefg<br>'; nv.Fv.style.position='absolute'; nv.Fv.style.zIndex=10000000; nv.pX.appendChild(nv.Fv); LD(nv.pX,function(){DX(true);}); Xq(nv.pX,function(){DX(false);}); nv.dg=new hD(nv.Fv,true,nv.pX,true); nv.dg.position(); DX(false); uo(); nv.dg.position(); nv.dL=new hD(nv.pX,true,eM(),true); nv.dL.XC.style.zIndex=1; }function uo(){ var KJ=0; for(var kD in panelDatas) if(panelDatas[kD].IL==-1) KJ++; if(KJ==0){ nv.OG.innerHTML='No panels docked'; nv.OG.style.color='#aaaaaa'; nv.oP.src='/web/dynamicImages/aaaaaa/undock-centered.gif'; }if(KJ==1) nv.OG.innerHTML='1 panel docked'; if(KJ>1) nv.OG.innerHTML=KJ+' panels docked'; if(KJ>=1){ nv.OG.style.color='#000000'; nv.oP.src='/web/dynamicImages/000000/undock-centered.gif'; }SU(nv.Fv); var ks=new Array(); for(var kD in panelDatas){ if(panelDatas[kD].IL==-1) ks.push(panelDatas[kD]); }ks.sort(Ng); var table=document.createElement('table'); nv.Fv.appendChild(table); table.cellPadding=0; table.cellSpacing=0; var KR=document.createElement('tbody'); table.appendChild(KR); for(var kD in ks){ var tc=ks[kD]; var EU=document.createElement('div'); EU.className='scheme-header '+tc.YV(); EU.style.cursor='pointer'; var fr=document.createElement('tr'); KR.appendChild(fr); var QC=document.createElement('td'); fr.appendChild(QC); QC.appendChild(EU); var VD=uid(); var Kp='<table cellpadding=4 cellspacing=0><tr class="'+EU.className+'"><td><div style="white-space:nowrap" id="'+VD+'"></div></td><td align="left" valign="middle" width="100%">		<div style="padding-left:8px"><img src="/web/dynamicImages/'+ht+'/undock-centered.gif"></div></td></tr></table>'; EU.innerHTML=Kp; EU.onmousedown=aS(tc); document.getElementById(VD).innerHTML=tc.title; }nv.Fv.style.width=table.offsetWidth+'px'; nv.Fv.style.height=table.offsetHeight+'px'; }function aS(tc){ return function(){ DX(false); tu(tc,uN); }}function Ng(Su,FO){ if(Su.Fp==FO.Fp){ if(Su.JK==FO.JK) return Su.title.localeCompare(FO.title); return Su.JK.localeCompare(FO.JK); }else{ return Su.Fp.localeCompare(FO.Fp); }}function DX(state){ if(state){ var Kh=false; for(var kD in panelDatas) if(panelDatas[kD].IL==-1) Kh=true; if(!Kh) return; nv.Fv.style.visibility='visible'; nv.Fv.style.top=nv.pX.offsetHeight+'px'; nv.Fv.style.left=0+'px'; nv.dg.EW(true); nv.dg.position(); }else{ nv.Fv.style.visibility='hidden'; nv.dg.EW(false); }}function Iq(){ Jq=new Object(); var rl=document.createElement('div'); Jq.rl=rl; rl.id='top-left-logo'; eM().appendChild(rl); var Kp='<a href="/"><img src="/web/images/protopage_logo.gif" width="162" height="51" border="0"></a>'; rl.style.overflow='visible'; rl.style.position='absolute'; rl.style.left='0px'; rl.style.top='0px'; rl.style.width='162px'; rl.style.height='51px'; rl.style.zIndex='100001'; rl.innerHTML=Kp; Jq.dL=new hD(Jq.rl,true,eM(),true); return rl; }function aL(){ Jq=new Object(); var rl=document.createElement('div'); Jq.rl=rl; rl.id='top-left-logo'; eM().appendChild(rl); var Kp='<img src="/web/images/branding/ft/logo.gif" width="147" height="58" border="0">'; rl.style.overflow='visible'; rl.style.position='absolute'; rl.style.left='0px'; rl.style.top='0px'; rl.style.width='147px'; rl.style.height='58px'; rl.style.zIndex='100001'; rl.innerHTML=Kp; Jq.dL=new hD(Jq.rl,true,eM(),true); return rl; }function UV(){ if(document.getElementById('top-left-logo')!=null) eM().removeChild(document.getElementById('top-left-logo')); if(branding=='FT'){ if(loggedIn) aL(); else{ eM().style.backgroundColor='#000000'; }}else if(protopagePath=='protopage/welcome'||protopagePath=='v2'||panelDatas.length==0){ }else{ var text=unescape(window.document.title); var sh=false; vS(text,sh); }}function vS(text,sh){ Jq=new Object(); var rl=document.createElement('div'); Jq.rl=rl; rl.id='top-left-logo'; eM().appendChild(rl); if(loggedIn) rl.style.cursor='text'; else rl.style.cursor='pointer'; rl.style.overflow='visible'; rl.style.position='absolute'; rl.style.left='0px'; rl.style.top='0px'; rl.style.zIndex='100001'; var lV=new Array(); if(!sh){ rl.style.backgroundColor='#FFFFFF'; var fm=document.createElement('div'); fm.style.fontSize='20px'; fm.style.fontStyle='italic'; fm.style.fontWeight='bold'; fm.style.fontFamily='Arial, Helvetica, sans-serif'; fm.appendChild(document.createTextNode(text)); fm.style.position='relative'; fm.style.left='12px'; fm.style.top='6px'; var BL=aT(); BL.src='/web/images/custom-logo/poweredby.gif'; BL.style.position='absolute'; BL.style.left='12px'; BL.style.top='32px'; rl.appendChild(fm); rl.appendChild(BL); }else{ var FM='/web/imageConstructor/'+escape(text); var Su=document.createElement('a'); Su.border=0; var ax=aT(); ax.src=FM; Su.appendChild(ax); rl.appendChild(Su); lV.push(ax); }var Kv=new hX(); Kv.QX(lV,function(){ if(sh){ rl.style.width=rl.offsetWidth+'px'; rl.style.height=rl.offsetHeight+'px'; }else{ var da=rl.offsetWidth+8+18; if(da<136) da=136; var FU=51; rl.style.width=da+'px'; rl.style.height=FU+'px'; }Jq.dL=new hD(Jq.rl,true,eM(),true); if(!loggedIn){ rl.onclick=function(){ document.location.href='/'; }; }else{ rl.onclick=function(){ Jq.rl.style.visibility='hidden'; Jq.dL.EW(false); var AF=document.createElement('input'); AF.style.position='absolute'; AF.style.left='0px'; AF.style.top='0px'; AF.style.width='200px'; AF.style.height='30px'; AF.style.fontSize='22px'; AF.style.fontFamily='Arial, Helvetica, sans-serif'; AF.style.fontStyle='italic'; AF.style.fontWeight='bold'; eM().appendChild(AF); var IT=document.createElement('div'); IT.style.position='absolute'; IT.style.left='0px'; IT.style.top='0px'; IT.style.fontSize='22px'; IT.style.fontFamily='Arial, Helvetica, sans-serif'; IT.style.fontStyle='italic'; IT.style.fontWeight='bold'; IT.style.visibility='hidden'; eM().appendChild(IT); AF.value=window.document.title; AF.onblur=function(){ window.document.title=AF.value; eM().removeChild(IT); eM().removeChild(AF); eM().removeChild(Jq.rl); UV(); sv(AF.value); }; AF.onkeyup=function(UP){ var ib=UP; if(!ib) ib=window.event; if(ib) if(ib.keyCode==13) AF.onblur(); IT.innerHTML=AF.value; AF.style.width=(IT.offsetWidth+40)+'px'; window.document.title=AF.value; }; AF.onmouseup=AF.onkeyup; AF.onkeyup(); AF.focus(); AF.select(); }; }; }); }function sv(title){ var iu=new Array(); iu.push(new cQ('title',title)); var gN=new JX(accountId,protopageId,protopagePath,'save-page-title',iu); commandProcessor.pl(gN); }function hd(){ var body=document.getElementById('body'); var pX=document.createElement('div'); pX.id='vpc'; Ru=new Object(); Ru.pX=pX; Ru.pX.style.zIndex=100001; Ru.rl=Ru.pX; Ru.mf=function(x,y){ this.pX.style.left=x+'px'; this.pX.style.top=y+'px'; var vq=null; try{ if(this.pX.childNodes[0]&&this.pX.childNodes[0].tagName.toLowerCase()=='table') vq=this.pX.childNodes[0]; }catch(UP){}try{ if(this.pX.childNodes[1]&&this.pX.childNodes[1].tagName.toLowerCase()=='table') vq=this.pX.childNodes[1]; }catch(UP){}if(vq!=null) this.pX.style.width=vq.offsetWidth+'px'; if(Ru.dL) this.dL.position(); }; Ru.pX.style.position='absolute'; Ru.pX.style.visibility='hidden'; Ru.pX.style.paddingLeft='6px'; Ru.pX.style.paddingRight='0px'; Ru.pX.style.paddingTop='3px'; Ru.pX.style.paddingBottom='3px'; Ru.pX.style.backgroundColor='#ffffff'; Md(); if(loggedIn||((!loggedIn)&&JF(false)>0)) body.appendChild(Ru.pX); Ru.mf(Ol(),PH()); Ru.dL=new hD(Ru.rl,true,eM(),true,false,true); Ru.pX.style.visibility='visible'; pX.onmouseover=function(){ if(!loggedIn) return; Ru.pX.style.top=(parseInt(Ru.pX.style.top)-21)+'px'; var images=Ru.pX.getElementsByTagName('IMG'); for(var kD=0;kD<images.length;kD++){ var ax=images[kD]; if(ax.src.indexOf('/web/images/vp-')!=-1){ ax.height=21; ax.style.visibility='visible'; }}Ru.mf(Ol(),PH()); }; Ru.LJ=function(){ if(!loggedIn) return; var images=Ru.pX.getElementsByTagName('IMG'); for(var kD=0;kD<images.length;kD++){ var ax=images[kD]; if(ax.src.indexOf('/web/images/vp-')!=-1){ ax.height=0; ax.style.visibility='hidden'; }}Ru.mf(Ol(),PH()); }; Xq(pX,Ru.LJ); }function TZ(tm){ for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.IL==tm) return false; }return true; }function JF(Hw){ var Bc=Hw?ir:0; for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.IL>Bc) Bc=tc.IL; }return Bc; }function HS(tm){ var CE=bv(tm); var uF; if(CE==0) uF=1; else uF=0; var ol=confirm('This will make virtual page no. '+(parseInt(tm)+1)+' '+(uF==0?'PUBLIC (others can view it, but only you can edit it)':'PRIVATE (only you can view or edit it)')+'. \nAre you sure?'); if(!ol) return; JO(tm,uF); Md(); bi(); }function qV(){ if(panelDatas.length==0) return 0; var min=100000000; var TB=new Object(); for(var kD in panelDatas){ var eJ=panelDatas[kD].IL; if(eJ<min) min=eJ; }return min; }function Cc(){ var gu=0; var TB=new Object(); for(var kD in panelDatas){ var eJ=panelDatas[kD].IL; if(!TB[eJ]){ gu++; TB[eJ]=true; }}return gu; }function Md(){ if(!Ru) return; var UK=Ru.pX; while(UK.childNodes.length>0) UK.removeChild(UK.childNodes[0]); var Bc=JF(true); var Yp='onmouseover="this.style.backgroundColor=\'#D9D9D9\'" '; var Mr=' onmouseout="this.style.backgroundColor=\'#FFFFFF\'" '; var eS='<table cellpadding="0" cellspacing="0">'; if(loggedIn){ eS+='<tr>'; var OJ=0; for(var kD=0;kD<=Bc;kD++){ OJ++; var ZX='<img style="visibility:hidden" border=0 width=24 height=0 src="/web/images/vp-'+(bv(kD)==0?'public':'private')+'.gif">'; eS+='<td align="center" '+Yp+Mr+' onclick="'+Ck(HS)+'('+kD+');" style="cursor:pointer">'+ZX+'</td>'; }eS+='</tr>'
}eS+='<tr>'; OJ=0; for(var kD=0;kD<=Bc;kD++){ if(!loggedIn){ if(TZ(kD)||(bv(kD)!=0)) continue; }OJ++; eS+='<td '+(kD!=uN?Yp:'')+Mr+' onclick="'+Ck(Zu)+'(\''+kD+'\');" style=" '+(isIE?'padding-right:2px':'')+'" class="vpc-numeral '+(kD==uN?'vpc-numeral-selected':'')+'">'+(OJ)+'</td>'; }if(loggedIn){ eS+='<td '+Yp+Mr+'onclick="'+Ck(gg)+'(); return false;" class="vpc-new-page">add<br>page</td>'; }else{ eS+='<td '+Yp+Mr+'onclick="'+Ck(gg)+'(); return false;" style="width:8px"></td>'; }eS+='			</tr>		</table>'; UK.innerHTML=eS; }function gg(){ if(ir==-1) ir=JF(true); var Wn=JF(true)+1; ir=Wn; JO(Wn,1); bi(); Zu(Wn); }function Zu(tm){ if(tm==uN) return; for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.IL==uN) tc.hide(); }uN=tm; Zm(panelDatas); Md(); uZ(); uZ(); for(var kD in panelDatas){ var tc=panelDatas[kD]; if(!tc.Ed&&tc.IL==uN) Wd(Sl(tc.id),tc.left,tc.top); }}function tu(tc,tm){ if(tc.IL==uN) bD(tc); tc.IL=tm; if(tm==uN) oF(tc); WV(tc); uo(); uZ(); }function rj(tc){ tu(tc,-1); }function Vh(tc){ tu(tc,uN); }function bi(){ var iu=new Array(); iu.push(new cQ('virtualPageRestrictions',virtualPageRestrictions)); var gN=new JX(accountId,protopageId,protopagePath,'save-virtual-page-restrictions',iu); commandProcessor.pl(gN); }function bv(am){ if(virtualPageRestrictions==null||virtualPageRestrictions=='null') virtualPageRestrictions=''; var Su=virtualPageRestrictions.split(','); var il=new Array(); for(var kD in Su){ var FO=Su[kD].split(':'); il[FO[0]]=FO[1]; }if(il[am]==undefined) return requiresLogin?1:0; else return il[am]; }function JO(am,uF){ if(virtualPageRestrictions==undefined||virtualPageRestrictions==null||virtualPageRestrictions=='null') virtualPageRestrictions=''; if(virtualPageRestrictions.indexOf('undefined')!=-1) virtualPageRestrictions=''; var Su=virtualPageRestrictions.split(','); var il=new Array(); for(var kD in Su){ if(Su[kD]=="") continue; var FO=Su[kD].split(':'); il[FO[0]]=FO[1]; }il[am]=uF; var KJ=new Array(); for(var kD in il){ KJ.push(kD+':'+il[kD]); }virtualPageRestrictions=KJ.join(','); }function NH(){ rv['protopage-widget-config']=KZ; }function XT(tc){ if(!loggedIn) return; if(tc.pr=='MAXIMIZED') return; if(tc.kE=='protopage-widget-config') return; if(tc.mn) return; else tc.mn=true; var attributes=new Object(); attributes['pid']=tc.id; var se=new Object(); var bV; if(tc.JK=='links'){ var ID=new Array(); var Uw=new Array(); for(var kD in tc.XD){ var rZ=tc.XD[kD]; Uw.push([rZ.label,rZ.url]); }ID['links']=Uw; se['associatedWidgetAttributes']=ID; se['associatedWidgetConfigTemplate']=Pi(); bV=uS('widget','Panel edit',100,Fs()+100,684,392,tc.Fp,true,'protopage-widget-config','',attributes,se); BC(bV.id); }if(tc.JK=='html'||tc.JK=='note'){ if(tc.JK=='note'){ tc.JK='html'; var KJ=tc.content; if(KJ==null) KJ=''; KJ=Xw(KJ); KJ=KJ.split('\n').join('<br>'); tc.content=KJ; }var ID=new Object(); ID['content']=tc.content; se['associatedWidgetAttributes']=ID; se['associatedWidgetConfigTemplate']=sg(); bV=uS('widget','Panel edit',100,100+Fs(),616,466,tc.Fp,true,'protopage-widget-config','',attributes,se); }if(tc.JK=='widget'){ se['associatedWidgetConfigTemplate']=tc.Sj.uc.nS(); se['associatedWidgetAttributes']=tc.Sj.uc.Tj(); se['associatedWidgetInstance']=tc.Sj; bV=uS('widget','Panel edit',100,100+Fs(),692,568,tc.Fp,true,'protopage-widget-config','',attributes,se); BC(bV.id); }if(tc.JK=='widget'&&tc.kE==Us) gm(bV.id,'MAXIMIZED'); if(tc.JK=='widget'&&tc.kE!=Us) BC(bV.id); }function KZ(){ }KZ.prototype=new DH(); KZ.prototype.vR=function(){ var cX=this; this.uc.Mh(); this.uc.sS(function(nf){ cX.uc.NU(!nf); }); var pX=document.createElement('div'); this.ES=pX; pX.style.position='relative'; this.uc.EF().appendChild(pX); var Kp=''; var nZ=uid(); var XY=uid(); var PJ=uid(); var tE=uid(); var lB=uid(); var Oc=uid(); Kp+='<table id="'+lB+'" cellpadding=0 cellspacing=0>'; Kp+='<tr><td><div class="scheme-body" id="'+XY+'"></div></td><td align="right"><div id="'+PJ+'"></div></td></tr>'; Kp+='<tr><td colspan=2><div class="scheme-body" id="'+tE+'"></div></td></tr>'; Kp+='<tr><td colspan=2><div style="text-align: right" id="'+nZ+'"></div></td></tr>'; Kp+='</table>'; pX.innerHTML=(Kp); pX.style.padding='14px'; this.GG=document.getElementById(nZ); this.gH=document.getElementById(XY); var mQ=uid(); var Sk=uid(); var gs=uid(); document.getElementById(nZ).innerHTML='<a id="'+mQ+'" class="scheme-body" href="">Delete panel</a> &nbsp;&nbsp;&nbsp; <a id="'+Sk+'" class="scheme-body" href="">Cancel changes</a> &nbsp;&nbsp;&nbsp; <a id="'+gs+'" class="scheme-body" style="font-weight:bold" href="">Save changes</a>'; document.getElementById(nZ).style.paddingTop='20px'; document.getElementById(XY).innerHTML='Panel title&nbsp;&nbsp;&nbsp;<input style="width:200px;" id="'+Oc+'" type="text" value="Untitled" class="scheme-header">'; document.getElementById(XY).style.whiteSpace='nowrap'; document.getElementById(Oc).value=cX.LI().title; document.getElementById(XY).style.paddingBottom='20px'; document.getElementById(PJ).appendChild(hw(function(kD){ var Fp=(kD<10)?'0'+kD:''+kD; cX.uc.Bn.Fp=Fp; cX.uc.Bn.cI(); cX.uc.Bn.pM(); var tc=cX.LI(); tc.Fp=Fp; tc.cI(); tc.pM(); for(var kG in cX.rO){ var qr=cX.rO[kG]; if(qr.Ee) qr.Ee(); }})); this.rk=cX.LI().Fp; document.getElementById(PJ).style.paddingBottom='20px'; this.lN=document.getElementById(Oc); var DE=document.getElementById(mQ); var ZK=document.getElementById(Sk); var cv=document.getElementById(gs); DE.onclick=function(event){ stopPropagation(event); var ol=confirm("This will remove and delete the panel that you are currently editing. Are you sure?"); if(!ol) return false; var tc=cX.LI(); Wf(tc); gm(cX.uc.Bn.id,'FLOATING'); cX.aZ(); Wf(cX.uc.Bn); return false; }; ZK.onclick=function(event){ stopPropagation(event); cX.LI().Fp=cX.rk; cX.LI().cI(); cX.LI().pM(); gm(cX.uc.Bn.id,'FLOATING'); cX.aZ(); Wf(cX.uc.Bn); cX.LI().mn=false; return false; }; cv.onclick=function(event){ stopPropagation(event); WV(cX.LI()); var tc=cX.LI(); tc.title=document.getElementById(Oc).value; if(tc.JK=='links'){ for(var kD in cX.rO){ var qr=cX.rO[kD]; if(qr.YI=='links'){ var rows=qr.gL(); var XD=new Array(); for(var kG in rows){ var ia=rows[kG]; if(ia[0]==''&&ia[1]=='') continue; XD.push(new LinkData(ia[0],ia[1])); }tc.XD=XD; bA(tc); DY(tc); wX(tc); }}}if(tc.JK=='html'){ for(var kD in cX.rO){ var qr=cX.rO[kD]; if(qr.YI=='content'){ tc.content=qr.gL(); UR(tc); DY(tc); Si(tc); }}}if(tc.JK=='widget'){ tc.title=document.getElementById(Oc).value; DY(tc); for(var kD in cX.rO){ var qr=cX.rO[kD]; if(qr.Pa) qr.Pa(); else if(qr.gL){ if(qr.YI) tc.Sj.uc.setAttribute(qr.YI,qr.gL()); }}for(var kD in cX.rO){ var qr=cX.rO[kD]; if(qr.wG) qr.wG(); }tc.Sj.uc.AM(); tc.Sj.uc.KO(); }gm(cX.uc.Bn.id,'FLOATING'); cX.aZ(); Wf(cX.uc.Bn); cX.LI().mn=false; return false; }; this.aZ=function(){ for(var kD in this.rO){ var qr=this.rO[kD]; if(qr.Gu) qr.Gu(); }}; this.table=document.getElementById(lB); var tc=cX.uc.Bn; this.rO=Ye(document.getElementById(tE),this.se['associatedWidgetConfigTemplate'],this.se['associatedWidgetAttributes'],this.se['associatedWidgetInstance'],this,function(jd){ if(tc.pr=='MAXIMIZED'){ jW(tc.id); }else{ if(jd) UM(tc); jQ(tc); }}); for(var kD in this.rO){ if(this.rO[kD].MH) this.rO[kD].MH(); }this.uc.Ov(this.jM); this.jM(tc.width,false); }; KZ.prototype.jM=function(sx,xq){ this.ES.style.width=sx-2+'px'; var tc=this.uc.Bn; var uD; if(tc.pr!='MAXIMIZED'){ var Fd=0; Fd+=this.GG.offsetHeight; Fd+=this.gH.offsetHeight; Fd+=NA(tc.id); uD=tc.height-Fd; }else{ uD=Bk()-NA()-200; }EX(this.rO,sx-40,uD); }; KZ.prototype.LI=function(){ return sX(this.uc.getAttribute('pid')); }; function ki(tc){ bA(tc); DY(tc); wX(tc); }; function wX(tc){ var iu=new Array(); var KJ=0; iu.push(new cQ('id',tc.id)); iu.push(new cQ('title',tc.title)); iu.push(new cQ('objectType',tc.JK)); for(var kD in tc.XD){ iu.push(new cQ('_labels',tc.XD[kD].label)); iu.push(new cQ('_urls',tc.XD[kD].url)); KJ++; }var gN=new JX(accountId,protopageId,protopagePath,'save-links-panel',iu); gN.xk=Vl; commandProcessor.pl(gN); }function Si(tc){ var iu=new Array(); iu.push(new cQ('id',tc.id)); iu.push(new cQ('title',tc.title)); iu.push(new cQ('objectType',tc.JK)); iu.push(new cQ('content',tc.content)); var gN=new JX(accountId,protopageId,protopagePath,'save-content-panel',iu); gN.xk=Vl; commandProcessor.pl(gN); }function jf(tc){ var iu=new Array(); iu.push(new cQ('id',tc.id)); iu.push(new cQ('title',tc.title)); iu.push(new cQ('content',tc.content)); var gN=new JX(accountId,protopageId,protopagePath,'save-widget-attributes',iu); gN.xk=Vl; commandProcessor.pl(gN); }function Wd(kU,Vu,cG){ kU.style.left=Vu+"px"; kU.style.top=cG+"px"; sX(kU.id).lU(); }function EE(kU,ND,WA,Xx){ var Bn=sX(kU.id); var tc=Bn; if(tc.PQ){ if(WA==tc.PQ&&Xx==tc.KX) return; }tc.PQ=WA; tc.KX=Xx; var Vb=NA(kU.id); ND.style.width=WA+"px"; if(isIE) tc.nq().style.width=WA+'px'; else tc.nq().style.width=(WA-(10+10))+'px'; if(Xx!=null) ND.style.height=(Xx-Vb)+"px"; else ND.style.height=null; kU.style.width=WA+"px"; if(Xx!=null){ kU.style.height=Xx+"px"; }else{ kU.style.height=null; }Bn.lU(); if(Xx!=null){ if(Bn.pr!='MAXIMIZED'){ jQ(Bn); }}if(tc.JK=='links') bA(Bn); if(tc.JK=='widget'){ if(tc.Sj){ tc.Sj.uc.jM(nl); }}}function Xf(){ for(var kD in panelDatas){ if(panelDatas[kD].IL!=uN) continue; if(panelDatas[kD].pr=='MAXIMIZED') return true; }return false; }function gm(id,state){ var GF=Sl(id); var tc=sX(id); var PR=tc.pr; tc.pr=state; if(tc.pr=='MAXIMIZED'){ for(var kD in panelDatas){ if(panelDatas[kD].IL!=uN) continue; if(panelDatas[kD].pr=='MAXIMIZED'&&(panelDatas[kD]!=tc)) gm(panelDatas[kD].id,'FLOATING'); }EP(tc,true); document.getElementById(id+'-eci').style.display='none'; document.getElementById(id+'-maxi').onmousedown=function(){ gm(id,'FLOATING'); }; }else if(tc.pr=='FLOATING'){ Wd(GF,tc.left,tc.top); var AC=va(id); EE(GF,AC,tc.width,tc.height); if(PR=='MAXIMIZED'){ document.getElementById(id+'-eci').style.display=''; document.getElementById(id+'-maxi').onmousedown=function(){ gm(id,'MAXIMIZED'); }; EP(tc,false); }}if(PR!=state){ WV(tc); if(tc.Sj!=undefined) tc.Sj.uc.fd(); }}function BC(id){ EE(Sl(id),va(id),sX(id).width,NA(id)*(1.5)+nq(id).offsetHeight); }function jW(id){ Wd(Sl(id),mt()+vt,60); var tc=sX(id); var WT=0; if(tc.pr=='MAXIMIZED') WT=2; if(tc.pr=='MAXIMIZED'&&tc.Ed) WT=0.5; EE(Sl(id),va(id),FX()-(mt()+vt+10),NA(id)*(1+WT)+nq(id).offsetHeight); }function UM(tc){ EE(tc.Sl(),va(tc.id),tc.width,NA(tc.id)*1+nq(tc.id).offsetHeight+1); }function EP(tc,state){ var id=tc.id; var GF=tc.Sl(); if(state==true){ if(tc.LW) bX(GF,tc); jW(id); jW(id); uR(id); an(tJ); if(Ru) an(Ru); for(var kD in panelDatas){ if(panelDatas[kD].IL!=uN) continue; if(panelDatas[kD].id!=id) panelDatas[kD].hide(); }tc.iT=tc.Fk; fU(id,true); var Ca=nq(id); Ca.style.top='0px'; sP=Rc(); NV=Fs(); window.scrollTo(0,0); }else{ nW(tJ); if(Ru) nW(Ru); uZ(); Gm(id); for(var kD in panelDatas){ if(panelDatas[kD].IL!=uN) continue; if(panelDatas[kD].id!=id) oF(panelDatas[kD]); }tc.Fk=tc.iT; fU(id,tc.Fk); jQ(tc); if(tc.LW) gZ(GF,tc); }}function RE(Ve,Qx){ var x=Ve; var y=Qx; while(true){ var ig=false; for(var kD in panelDatas){ if(panelDatas[kD].IL!=uN) continue; if(panelDatas[kD].left==x&&panelDatas[kD].top==y){ x+=10; y+=10; ig=true; }}if(!ig) break; }return new pb(x,y); }function WV(tc){ if(tc.Ed) return; var iu=new Array(); iu.push(new cQ('id',tc.id)); iu.push(new cQ('left',tc.left)); iu.push(new cQ('top',tc.top)); iu.push(new cQ('width',tc.width)); iu.push(new cQ('height',tc.height)); iu.push(new cQ('collapsed',tc.LW?'true':'false')); iu.push(new cQ('zIndex',tc.zIndex)); iu.push(new cQ('verticalScrollProportion',tc.xj==null?0:tc.xj)); iu.push(new cQ('mode',tc.pr)); iu.push(new cQ('virtualPage',tc.IL)); iu.push(new cQ('schemeOffset',tc.Fp)); var gN=new JX(accountId,protopageId,protopagePath,'save-panel-geometry',iu); gN.xk=Vl; commandProcessor.pl(gN); }function bj(IL){ if(colorsAndSettings.widgetPositioning=='GRAVITY'){ var wY=YL(IL); for(var kD in wY){ var kU=Sl(wY[kD].id); if(kU) Wd(kU,wY[kD].left,wY[kD].top); }}}function YL(IL){ var YF=0; for(var kD in panelDatas){ if(panelDatas[kD].IL==IL){ var tc=panelDatas[kD]; var y=tc.top+tc.height+1; if(YF<y) YF=y; }}return RL(IL,0,1000000,YF,new Array(),new Array()); }function RL(IL,gr,VL,y,Jd,GE){ var Ea=new Array(); var mY=new Array(); var ek=new Array(); for(var kD in panelDatas){ if(panelDatas[kD].IL==IL){ var tc=panelDatas[kD]; var ao=false; if(tc.Ed) ao=true; for(var kG in GE){ if(GE[kG]==tc){ ao=true; break; }}for(var kG in Jd){ if(Jd[kG]==tc){ ao=true; break; }}if(ao) continue; if(tc.top>y) continue; if(JR(tc.left,tc.width,gr,VL-gr)){ Ea.push(tc); }}}Ea.sort(MW); while(true){ if(Ea.length==0) break; var tc=Ea.shift(); var MU=RL(IL,tc.left,tc.left+tc.width,tc.top,Jd.concat([tc]),mY.concat(ek).concat(GE)); while(MU.length>0){ var Bm=MU.shift(); ek.push(Bm); for(var kD in Ea){ if(Ea[kD]==Bm){ Ea.splice(kD,1); break; }}}var vj=new Array(); vj=vj.concat(mY); vj=vj.concat(ek); vj=vj.concat(GE); var YF=60; for(var kD in vj){ var Xg=vj[kD]; if(JR(tc.left,tc.width,Xg.left,Xg.width)){ var Uj=Xg.LW?(Xg.top+NA(Xg.id)):(Xg.top+Xg.height); Uj+=8; if(YF<Uj) YF=Uj; }}if(tc.top!=YF){ tc.top=YF; tc.qH=true; }mY.push(tc); }var Mx=new Array(); Mx=Mx.concat(mY); Mx=Mx.concat(ek); return Mx; }function JR(CF,YN,XO,ce){ var Mb=CF+YN; var xw=XO+ce; if((CF>=XO)&&(CF<=xw)) return true; if((Mb>=XO)&&(Mb<=xw)) return true; if((XO>=CF)&&(XO<=Mb)) return true; if((xw>=CF)&&(xw<=Mb)) return true; return false; }function MW(Br,Xg){ if(Br.left>Xg.left) return-1; if(Br.left<Xg.left) return 1; if(Br.left==Xg.left){ if(Br.top>Xg.top) return-1; if(Br.top==Xg.top) return 0; if(Br.top<Xg.top) return 1; }if(iL) throw('Panel dimensions not specified'); else return 0; }function sO(){ var YF=60; for(var kD in panelDatas){ if(panelDatas[kD].IL==uN){ var tc=panelDatas[kD]; if(tc.Ed) continue; var Uj=tc.LW?(tc.top+NA(tc.id)):(tc.top+tc.height); Uj+=8; if(YF<Uj) YF=Uj; }}return YF; }function aA(){ for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.qH){ WV(tc); tc.qH=false; }}}function PanelData(id,JK,title,left,top,width,height,LW,zIndex,xj,XD,content,pr,IL,Fp,kE,UQ,Ed){ this.id=id;this.JK=JK;this.title=title;this.left=left;this.top=top;this.width=width;this.height=height; this.LW=LW;this.zIndex=zIndex;this.xj=xj; this.XD=XD;this.content=content; this.Pb=null; this.pr=pr; this.IL=IL; this.Fp=Fp; this.kE=kE; this.UQ=UQ; this.Ed=Ed; var cX=this; this.Jk=false; this.qH=false; if(this.kE==Us) this.xj=0; if((this.IL==null)||(this.IL=='')||(this.IL=='null')){ this.IL=0; }if((this.Fp==null)||(this.Fp=='')||(this.Fp=='null')){ this.Fp='00'; }if((this.pr==null)||(this.pr=='')||(this.pr=='null')){ this.pr='FLOATING'; }this.eW=false; this.Fk=false; this.rl=null; this.dL=null; this.Sj=null; this.oR=function(){ var AZ=colorsAndSettings.opacity; PP(this.Sl(),AZ); if(this.dL) this.dL.PP(AZ); }; this.AT=function(){ var Wg=document.getElementById('body'); Wg.removeChild(this.Sl()); if(this.dL) this.dL.remove(); }; this.Mc=function(){ if(Xe()){ this.dL=new hD(this.rl,true,eM(),true,true,(this.Ed||Lg),(this.Ed||Lg)); this.oR(); }}; this.LB=function(){ if(this.dL){ this.dL.remove(); delete this.dL; }}; this.bC=function(){ if(Xe()&&(!this.dL)) this.Mc(); if((!Xe())&&(this.dL)) this.LB(); }; this.lU=function(){ if(this.dL) this.dL.position(); }; this.GP=function(){ if((this.Ed||Lg)&&this.dL&&Xe()) this.dL.fD(); }; this.hide=function(){ this.EH=parseInt(this.rl.style.left); this.Ux=parseInt(this.rl.style.top); this.rl.style.left='-100000px'; this.rl.style.top='-100000px'; this.rl.style.visibility='hidden'; if(this.dL) this.dL.EW(false); }; this.Yr=function(){ try{ this.rl.style.left=this.EH+'px'; this.rl.style.top=this.Ux+'px'; this.rl.style.visibility='visible'; if(this.dL) this.dL.EW(true); }catch(UP){}}; this.YV=function(){ return 'scheme-offset-'+this.Fp; }; this.cI=function(){ this.rl.className='panel '+this.YV(); }; this.DF=function(){ return qt[this.Fp]; }; this.Iu=function(){ return sc[this.Fp]; }; this.Pk=function(){ var nE=this.DF(); var nQ=this.Iu(); var baseScheme=cC(colorsAndSettings.baseScheme); var vi=baseScheme.OR.Ww(colorsAndSettings.hueOffset,colorsAndSettings.saturationOffset); this.mi.style.backgroundImage='url(/web/dynamicImages/'+this.Iu()+Vq(TN,this.Iu(),vi)+'/header-delimiter.gif)'; Gj(this.gd,'/web/dynamicPng/'+nE+'/corner-nw.png'); Gj(this.QK,'/web/dynamicPng/'+nE+'/corner-ne.png'); Gj(this.tL,'/web/dynamicPng/'+nQ+'/corner-sw.png'); Gj(this.AX,'/web/dynamicPng/'+nQ+'/corner-se.png'); this.Jk=false; }; this.pM=function(){ if(this.IL==uN){ if(this.eW) this.Pk(); }else{ this.Jk=true; }}; this.VA=function(){ var eT=document.getElementById('body'); var pX=document.createElement('div'); pX.id=this.id; pX.className=this.YV(); pX.style.position='absolute'; pX.style.visibility='visible'; pX.style.overflow='visible'; pX.style.zIndex=this.zIndex; pX.style.height=this.height+'px'; pX.style.width=this.width+'px'; pX.style.left=this.left+'px'; pX.style.top=this.top+'px'; pX.style.overflow='visible'; if(isIE){ pX.attachEvent(kk,ME); pX.attachEvent(aM,hK); }else{ pX.addEventListener(ED,ME,true); pX.addEventListener(HE,hK,true); }Xq(pX,UY); var gd=document.createElement('div'); var QK=document.createElement('div'); var tL=document.createElement('div'); var AX=document.createElement('div'); this.gd=gd; this.QK=QK; this.tL=tL; this.AX=AX; gd.style.position='absolute'; gd.style.left='0px'; gd.style.top='0px'; gd.style.width='5px'; gd.style.height='5px'; QK.style.position='absolute'; QK.style.right=(false?-1:0)+'px'; QK.style.top='0px'; QK.style.width='5px'; QK.style.height='5px'; tL.style.position='absolute'; tL.style.left='0px'; tL.style.bottom=(false?-1:0)+'px'; tL.style.width='5px'; tL.style.height='5px'; AX.style.position='absolute'; AX.style.right=(false?-1:0)+'px'; AX.style.bottom=(false?-1:0)+'px'; AX.style.width='5px'; AX.style.height='5px'; var gE=document.createElement('div'); gE.id=(this.id+'-ph'); gE.style.overflow='hidden'; gE.ondblclick=function(){ XT(cX); }; gE.onmouseover=function(UP){ tV(UP,cX.id); }; var pa=document.createElement('div'); pa.className='scheme-header'; pa.style.fontSize='1px'; pa.style.marginLeft='5px'; pa.style.marginRight='5px'; pa.style.height='5px'; pa.appendChild(gd); pa.appendChild(QK); gE.appendChild(pa); var bN=document.createElement('div'); bN.style.display='inline'; bN.style.whiteSpace='nowrap'; bN.style.cursor='Move'; bN.style.position='absolute'; bN.style.right='6px'; bN.style.top='5px'; var Kp='			<div class="panel-modify-icon"><img id="'+(this.id+'-eci')+'" src="'+(this.LW?eR:iX)+'" width="8" height="13" onmousedown="'+Ck(km)+'(\''+this.id+'\')"></div>			<div class="panel-modify-icon"><img style="padding-right:3px; padding-left:1px;" id="'+(this.id+'-maxi')+'" src="'+ll+'" width="8" height="13" onmousedown="'+Ck(gm)+'(\''+this.id+'\', \'MAXIMIZED\'); return false;"></div>'; if(loggedIn) Kp+='<div id="'+(this.id+'-ae')+'" class="panel-modify-link"><a id="'+(this.id+'-aea')+'" onmouseover="'+Ck(qj)+'(\''+this.id+'\'); return false;" onclick="return false;" style="font-size: 9px;" class="scheme-header" href="">edit</a></div>'; bN.innerHTML=Kp; gE.appendChild(bN); gE.onmousedown=function(UP){ Xo(UP,cX.id,'drag'); }; var pN=document.createElement('div'); pN.className='scheme-header'; pN.id=(this.id+'-pt'); pN.style.height='1.6em'; pN.style.paddingTop='0.1em'; pN.style.paddingLeft='10px'; pN.style.cursor='Move'; pN.style.whiteSpace='nowrap'; pN.onmousedown=function(UP){ Xo(UP,cX.id,'drag'); }; gE.appendChild(pN); var mi=document.createElement('div'); this.mi=mi; mi.style.height='1px'; mi.style.fontSize='1px'; mi.style.padding='0px'; mi.style.margin='0px'; mi.style.overflow='hidden'; mi.style.backgroundRepeat='repeat-x'; this.Pk(); gE.appendChild(mi); pX.appendChild(gE); eT.appendChild(pX); DY(this); var eX=NA(this.id); var Nw=this.width; var IE=this.height-eX; var Mu=document.createElement('div'); this.ND=Mu; Mu.id=(this.id+'-sp'); Mu.className='scheme-body'; Mu.style.position='relative'; Mu.style.overflow='hidden'; Mu.style.width=Nw+'px'; Mu.style.height=IE+'px'; Mu.style.left='0px'; Mu.style.top='0px'; try{ if(Mu.addEventListener){ Mu.addEventListener('DOMMouseScroll',function(HY){ try{oX.blur();}catch(UP){}if(cX.pr=='MAXIMIZED'||cX.Fk||!cX.Lr) return true; var jR=Math.round(HY.detail/3); if(jR>0&&cX.xj==1) return true; if(jR<0&&cX.xj==0) return true; iU(cX,jR); HY.preventDefault(); HY.stopPropagation(); return false; },false); }else{ Mu.onmousewheel=function(){ try{oX.blur();}catch(UP){}if(cX.pr=='MAXIMIZED'||cX.Fk||!cX.Lr) return true; var jR=Math.round(event.wheelDelta/-120); if(jR>0&&cX.xj==1) return true; if(jR<0&&cX.xj==0) return true; iU(cX,jR); window.event.cancelBubble=true; window.event.returnValue=false; return false; }; }}catch(UP){ }var qi=document.createElement('div'); qi.id=(this.id+'-pc'); qi.style.position='absolute'; qi.style.paddingLeft='10px'; qi.style.paddingRight='18px'; qi.style.paddingTop='5px'; qi.style.paddingBottom='0px'; qi.style.marginLeft='0px'; qi.style.marginRight='0px'; qi.style.marginTop='0px'; qi.style.marginBottom='0px'; if(isIE) qi.style.width=(this.width)+'px'; else qi.style.width=(this.width-20)+'px'; qi.style.left='0px'; qi.style.top='0px'; if(JK=='links'){ qi.style.fontSize='1px'; var tn=document.createElement('div'); tn.id=this.id+'-hidden-column-container'; tn.style.visibility='hidden'; tn.style.position='absolute'; tn.style.top='-1000px'; tn.style.left='-1000px'; var ah=document.createElement('div'); ah.id=this.id+'-visible-column-container'; ah.style.paddingBottom='0px'
qi.appendChild(ah); qi.appendChild(tn); }Mu.appendChild(qi); var SN=document.createElement('div'); SN.id=this.id+'-vsbt'; SN.className='scheme-body'; SN.style.position='absolute'; SN.style.right='0px'; SN.style.top='0px'; SN.style.width='17px'; SN.style.height='0px'; var ix=document.createElement('div'); ix.id=this.id+'-vsbh'; ix.style.position='absolute'; ix.style.backgroundRepeat='repeat'; ix.style.zIndex=100001; ix.onmousedown=function(UP){ Xo(UP,cX.id,'scroll'); }; ix.style.left='4px'; ix.style.top='3px'; ix.style.width='9px'; ix.style.height='20px'; ix.style.backgroundImage='url(\'/web/dynamicImages/'+Ot+'/vertical-scroll-bar.gif\')'; SN.appendChild(ix); Mu.appendChild(SN); var cu=document.createElement('div'); cu.id=this.id+'-rs'; cu.style.position='absolute'; cu.style.right='2px'; cu.style.bottom='2px'; cu.style.zIndex=100001; var qW=aT(); qW.id=this.id+'-rsi'; if(!Am) qW.style.cursor='se-resize'; qW.src='/web/dynamicImages/'+Ot+'/resizer.gif'; qW.width='16'; qW.height='16'; qW.onmousedown=function(UP){ Xo(UP,cX.id,'resize'); }; cu.appendChild(qW); var lk=document.createElement('div'); lk.id=this.id+'-bspcr'; lk.style.position='absolute'; lk.style.top='74px'; lk.style.left='0px'; var gM=aT(); gM.src='/web/images/spacer.gif'; gM.width=1; gM.height=1; lk.appendChild(gM); cu.appendChild(lk); pX.appendChild(cu); pX.appendChild(Mu); var eg=document.createElement('div'); eg.className='scheme-body'; eg.style.marginLeft='5px'; eg.style.marginRight='5px'; eg.style.height='5px'; eg.style.fontSize='0.1px'; eg.appendChild(tL); eg.appendChild(AX); pX.appendChild(eg); if(this.JK=='html'||this.JK=='note') UR(this); this.rl=pX; this.eW=true; this.oR(); }; this.xW=function(se){ XI(this.kE,this.UQ,function(RX){ var Sj=new RX(); cX.Sj=Sj; cX.Sj.uc=new xu(cX,RX); if(se) cX.Sj.se=se; cX.Sj.vR(); }); }; this.Sl=function(){ return document.getElementById(this.id); }; this.va=function(){ return va(this.id); }; this.nq=function(){ return nq(this.id); }; }function protopageInit(){ eM().removeChild(document.getElementById('troubleshootingLink')); if(branding=='FT') qC=fS; else qC=uh; if(colorsAndSettings.widgetPositioning==null) colorsAndSettings.widgetPositioning='FREE'; for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.top<0) tc.top=60; }maxPanelZIndex=1; for(var kD=0;kD<panelDatas.length;kD++){ maxPanelZIndex=Math.max(maxPanelZIndex,panelDatas[kD].zIndex); if(panelDatas[kD].zIndex==0) panelDatas[kD].zIndex=1; }if(!loggedIn){ uN=qV(); }var JE=vB(); if(JE!=null){ var message='Your web browser software is out of date or unsupported. This site may not work correctly for you.\n\n'+JE+'\n\nTo try Protopage with Firefox, go to www.getfirefox.com where you can download a new web browser.'; alert(message); }HX(true,true,true,false); var baseScheme=cC(colorsAndSettings.baseScheme); var ht=baseScheme.jn.Ww(colorsAndSettings.hueOffset,colorsAndSettings.saturationOffset); var Ot=baseScheme.OR.Ww(colorsAndSettings.hueOffset,colorsAndSettings.saturationOffset); NH(); xB(); iF(); kS(); qd(); ng(); es(); rN(); dk(); UV(); Qb(); if(protopagePath=='protopage/welcome'||protopagePath=='v2'||panelDatas.length==0){ }else{ MM(); var eS=((60-new Date().getSeconds())*1000)+500; setTimeout('updateCalendar(); setInterval("updateCalendar();", 60000);',eS); }kq(); if(hoursUntilExpiry!=null) hA(); if(protopagePath=='protopage/addlink') TH('choose-protopage-for-new-link',true); if(pageParams['newLinkUrl']!=null&&protopagePath!='protopage/addlink'){ importNewLink(pageParams['newLinkLabel'],pageParams['newLinkUrl'],pageParams['newType']); }if((!loggedIn)&&(panelDatas.length==0)&&(protopagePath!='protopage/addlink')) Ii(true); WP(); }function WP(){ sH(panelDatas); Gb(); }function Gb(){ for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.IL==uN){ bA(tc); }}IQ(); bB(); }function bB(){ for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.IL!=uN) continue; if(tc.LW){ }else{ jQ(tc); }}BD(); }function BD(){ oZ(); uZ(); if(isIE){ window.attachEvent('onresize',FZ); window.attachEvent('onscroll',FZ); }else{ window.onresize=FZ; window.onscroll=FZ; }if(protopagePath=='protopage/loginrequired'){ Vs(3); }if(protopagePath=='protopage/welcome'||protopagePath=='v2'){ Vs(4); }SR(); }function SR(){ if(loggedIn||(Cc()>1)) hd(); if(protopagePath=='protopage/inviteReceived'){ TH('processing-invitation',true); setTimeout(Ck(lw)+"('processingInvitationMessage', '/_api/newUntitledPage');",1); }setTimeout('setInterval("'+eG(Nb)+'", 200);',1000); HX(false,false,false,true); for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.IL!=uN) continue; if(tc.JK=='widget'){ tc.xW(); }}try{ if(eM().addEventListener){ eM().addEventListener('DOMMouseScroll',function(HY){ try{oX.blur();}catch(UP){}return true; },false); }else{ eM().onmousewheel=function(){ try{oX.blur();}catch(UP){}return true; }; }}catch(UP){ }}function sH(panelDatas){ for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.IL==uN){ tc.VA(); if(tc.LW){ gZ(tc.Sl(),tc); }}}for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.IL==uN){ if(tc.pr=='MAXIMIZED') gm(tc.id,tc.pr); }}}function Xe(){ return nj(); }function bD(tc){ tc.hide(); }function Zm(panelDatas){ for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.IL==uN){ oF(tc); tc.oR(); tc.pM(); }}}function oF(tc){ if(!tc.eW){ tc.VA(); bA(tc); jQ(tc); if(tc.LW){ gZ(tc.Sl(),tc); }if(tc.pr=='MAXIMIZED') gm(tc.id,tc.pr); if(Xe()) tc.Mc(); if(tc.JK=='widget'){ tc.xW(); }}else{ tc.Yr(); }tc.bC(); }function oZ(){ for(var kD in panelDatas){ if(panelDatas[kD].IL!=uN) continue; panelDatas[kD].Mc(); }}function an(rc){ if(!rc) return; if(!rc.rl) return; rc.rl.style.visibility='hidden'; rc.VQ=rc.rl.style.left; rc.TX=rc.rl.style.top; rc.rl.style.left='-10000px'; rc.rl.style.top='-10000px'; Gh(rc); }function Gh(rc){ if(rc.dL){ rc.dL.EW(false); }}function nW(rc,Kl){ if(Kl){ rc.rl.style.left=rc.VQ; rc.rl.style.top=rc.TX; }rc.rl.style.visibility='visible'; if(rc.dL){ rc.dL.EW(true); rc.dL.position(); }}function Qw(){ xA=true; Vs(0); }function Gm(id){ var DN=document.getElementById(id+'-rs'); var nt=document.getElementById(id+'-rsi'); var HJ=document.getElementById(id+'rttpl'); nt.style.visibility=''; try{ DN.removeChild(HJ); }catch(UP){}}function uR(id){ var DN=document.getElementById(id+'-rs'); var nt=document.getElementById(id+'-rsi'); nt.style.visibility='hidden'; var HJ=document.createElement('div'); HJ.id=id+'rttpl'; HJ.className='scheme-header'; HJ.style.padding='0.2em'; HJ.style.fontSize='1.3em'; HJ.innerHTML='<a class="scheme-header" href="" onclick="'+Ck(stopPropagation)+'(event); '+Ck(gm)+'('+id+', \'FLOATING\'); return false;">Return to page</a>'; DN.appendChild(HJ); }function uZ(){ an(Jm); if(loggedIn) an(nv); if(tJ){ an(tJ); }if(Ru){ an(Ru); }if(Jm){ var cR=(FX()-Jm.rl.offsetWidth); Jm.rl.style.left=cR+'px'; Jm.rl.style.top=0+'px'; Jm.dL.position(); Jm.popup.dL.position(); }if(loggedIn){ nv.pX.style.left=cR-17-nv.pX.offsetWidth+'px'; nv.pX.style.top=0+'px'; nv.dL.position(); }if(tJ&&tJ.rl){ tJ.mf(LS(),LY()); }if(Ru){ Ru.mf(Ol(),PH()); }if(Jm){ nW(Jm); }if(loggedIn) nW(nv); if(!Xf()){ if(tJ&&tJ.rl){ nW(tJ); }if(Ru){ nW(Ru); }}}function Ia(){ an(Jm); Jm.rl.style.left=(FX()-Jm.rl.offsetWidth)+'px'; Jm.rl.style.top=0+'px'; Jm.dL.position(); nW(Jm); }function LS(){ return 10; }function LY(){ if(!tJ.rl){ }return(Bk()-tJ.rl.offsetHeight)-9; }function Ol(){ return(FX()-Ru.rl.offsetWidth)-11; }function PH(){ return(Bk()-Ru.rl.offsetHeight)-9; }var hO=null; var Ss=null; function Nb(){ var Td=isIE?document.body.scrollLeft:window.pageXOffset; var Fx=isIE?document.body.scrollTop:window.pageYOffset; var KF=false; if(hO!=Td||Fx!=Ss){ KF=FZ(); }if(KF){ hO=Td; Ss=Fx; }}var Xb=0; function FZ(){ var bW=new Date().getTime(); if((bW-Xb)>=300){ Xb=bW; setTimeout(function(){windowResizeOrScrollEvent();},1); return true; }else return false; }function windowResizeOrScrollEvent(){ uZ(); for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.IL!=uN) continue; if(tc.pr=='MAXIMIZED'){ jW(tc.id); }}}function FV(ZN){ ZN.style.zIndex=10000000; sX(ZN.id).GP(); }function cO(ZN){ ZN.style.zIndex=sX(ZN.id).zIndex; sX(ZN.id).GP(); }function qj(id){ var kU=Sl(id); var Bn=sX(id); if(Bn.Dq) return; Bn.Dq=true; FV(kU); var FJ=document.getElementById(id+'-ae'); FJ.style.height=wE(id)+'px'; FJ.style.paddingLeft='60px'; var uU=document.getElementById(id+'-aea'); uU.style.fontSize='12px'; uU.onmousedown=function(event){ stopPropagation(event); if(Bn.pr=='MAXIMIZED') gm(Bn.id,'FLOATING'); XT(Bn); cO(kU); return false; }; uU.onmouseup=function(event){ cO(kU); return false; }; var pX=document.createElement('div'); var JJ=document.getElementById(Bn.id+'-maxi').style.display=='none'; pX.className='scheme-header'; pX.style.position='absolute'; pX.style.paddingLeft='6px'; pX.style.paddingRight='4px'; pX.style.paddingTop='2px'; pX.style.paddingBottom='6px'; var ru=((Bn.pr=='MAXIMIZED')?27:36); if(JJ) ru-=12; pX.style.right=ru+'px'; pX.style.top=wE(id)-2+'px'; pX.style.zIndex='200002'; pX.style.overflow='visible'; pX.appendChild(Nx('delete',kU,pX,function(){ var ol=confirm("This will remove and delete this panel. Are you sure?"); if(!ol) return false; Wf(sX(id)); bj(uN); aA(); })); if(Bn.JK=='html'||Bn.JK=='links'||(Bn.kE!=undefined&&Bn.kE==Us)){ pX.appendChild(Nx('create duplicate',kU,pX,function(){ var bV=uS(Bn.JK,Bn.title,Bn.left,Bn.top,Bn.width,Bn.height,Bn.Fp,false,Bn.kE,Bn.UQ,Bn.JK=='widget'?bU(Bn.Sj.uc.attributes):null,null,Bn.content,Bn.XD); })); }for(var kD=0;kD<=JF(true);kD++){ if(kD==uN) continue; pX.appendChild(Nx('send to page '+(kD+1),kU,pX,qZ(Bn,kD,false))); }pX.appendChild(Nx('send to new page',kU,pX,qZ(Bn,kD,true))); pX.appendChild(Nx('send to dock',kU,pX,qZ(Bn,-1,false))); pX.zIndex=101; var iframe=null; if(Bn.kE==YJ) iframe=document.createElement('iframe'); Rm([pX,FJ,uU],function(Ek){ try{ if(iframe) kU.removeChild(iframe); kU.removeChild(pX); }catch(UP){ return; }FJ.style.paddingLeft='0px'; uU.style.fontSize='9px'; cO(kU); Bn.Dq=false; }); kU.appendChild(pX); if(iframe!=null){ iframe.style.zIndex=100; iframe.style.position='absolute'; iframe.style.right=parseInt(pX.style.right)+'px'; iframe.style.top=parseInt(pX.style.top)+'px'; iframe.frameBorder=0; var Su=pX.offsetWidth; var FO=pX.offsetHeight; iframe.style.width=Su+'px'; iframe.style.height=FO+'px'; iframe.width=Su; iframe.width=FO; kU.appendChild(iframe); }}function Wf(tc){ if(tc.Sj) tc.Sj.uc.HA(); for(var kD in panelDatas){ if(panelDatas[kD].id==tc.id){ panelDatas[kD].AT(); removedPanelDatas.push(panelDatas[kD]); panelDatas.splice(kD,1); }}if(!tc.Ed){ var iu=new Array(); iu.push(new cQ('id',tc.id)); var gN=new JX(accountId,protopageId,protopagePath,'remove-panel',iu); gN.xk=Vl; commandProcessor.pl(gN); }}function qZ(Bn,tm,XS){ return function(){ tu(Bn,tm); if(XS){ Md(); uZ(); }KW(Bn); }; }function Nx(label,kU,wK,PU){ var Su=document.createElement('a'); Su.style.display='block'; Su.style.textAlign='right'; Su.style.padding='1px'; Su.style.whiteSpace='pre'; Su.className='scheme-header'; Su.innerHTML=label; Su.href=''; Su.onmousedown=function(event){ stopPropagation(event); cO(kU); PU(); if(isIE){ window.event.cancelBubble=true; window.event.returnValue=false; }else{ event.cancelBubble=true; event.preventDefault(); event.stopPropagation(); }return false; }; Su.onclick=function(){return false;}; return Su; }function Cw(){ return protopagePath.indexOf('untitled-')==0; }var ni=null; function wE(id){ if(!ni) ni=parseInt(document.getElementById(id+'-ph').offsetHeight); return ni; }function NA(id){ var qB=5; var CP=wE(id)+qB; return CP; }function lh(content,JK){ var KJ; if(JK=='note'){ KJ=Xw(content); KJ=KJ.split('\n').join('<br>'); var eq='\\b(http://[^\\s]+)\\b'; var OS='<a onclick="return '+Ck(RV)+'(\'$1\', event);" href="$1">$1</a>'; var YR=new RegExp(eq,"g"); KJ=KJ.replace(YR,OS); }if(JK=='html'){ KJ=content; }return '<div class="rich-text" style="font-size: 92%;">'+KJ+'</div>'; }function HG(GF,mV,FK){ var Xc=''; Xc+='<div class="links-area" style="padding:0px; margin:0px">'; Xc+='<table border="0" cellpadding="0" cellspacing="0" style="padding:0px; margin:0px"><tbody><tr>'; var lR=Math.ceil(GF.XD.length/mV); var nh=GF.XD.length%mV; var NL=0; for(var kD=0;kD<GF.XD.length;kD++){ var ug=GF.XD[kD]; if(NL==0){ Xc+='<td valign="top">'; }Xc+='<div class="link-item"><a onclick="return '+Ck(RV)+'(\''+ug.url+'\', event);" class="links-panel-link scheme-body" href="'+ug.url+'">'+ug.label+'</a></div>'; NL++; if((NL==lR)||kD==(GF.XD.length-1)){ NL=0; Xc+='<div><img src="/web/images/spacer.gif" border="0" width="'+FK+'" height="1"></div>'; Xc+='</td>'; if(nh>0){ nh--; if(nh==0) lR--; }}}Xc+='</tr></tbody></table>'; Xc+='</div>'; return Xc; }function DY(tc){ var title=Xw(tc.title); if(title=='') title='&nbsp;'; document.getElementById(tc.id+'-pt').innerHTML=title; }function UR(tc){ document.getElementById(tc.id+'-pc').innerHTML=lh(tc.content,tc.JK); }function bA(tc){ if(tc.JK!='links') return; var If=document.getElementById(tc.id+'-sp').offsetWidth; var ZJ=document.getElementById(tc.id+'-sp').offsetHeight; var NQ=document.getElementById(tc.id+'-hidden-column-container'); NQ.style.paddingTop='5px'; NQ.innerHTML=HG(tc,1,1); tc.Uv=document.getElementById(tc.id+'-hidden-column-container').offsetHeight; tc.vM=document.getElementById(tc.id+'-hidden-column-container').offsetWidth; var mV=Math.floor(If/tc.vM); var TW=document.getElementById(tc.id+'-visible-column-container'); TW.style.paddingTop='5px'; Xc=HG(tc,mV,tc.vM); TW.innerHTML=Xc; var eS=tc.nq().style; tc.nq().style.marginLeft='0px'; tc.nq().style.marginRight='0px'; tc.nq().style.marginTop='0px'; tc.nq().style.marginBottom='0px'; tc.nq().style.paddingLeft='10px'; tc.nq().style.paddingRight='18px'; tc.nq().style.paddingTop='0px'; tc.nq().style.paddingBottom='0px'; }function LinkData(label,url){ this.label=label;this.url=url; if(url.indexOf('://')==-1||url.indexOf('://')>10) this.url='http://'+url; }function Sl(id){ return document.getElementById(id); }function sX(id){ for(var kD in panelDatas) if(panelDatas[kD].id==id) return panelDatas[kD]; for(var kD in removedPanelDatas) if(removedPanelDatas[kD].id==id) return removedPanelDatas[kD]; }function va(id){ return document.getElementById(id+'-sp'); }function nq(id){ return document.getElementById(id+'-pc'); }function lO(rl){ var Av=rl; var tc=null; while(true){ if(Av.id!=undefined){ for(var kD in panelDatas){ tc=panelDatas[kD]; if(tc.id==Av.id){ return tc; }}}Av=Av.parentNode; if(!Av){ if(iL) alert('Error code 1138 - Please report this bug to Protopage using the feedback form'); return null; }}}function ME(UP){ if(window.event){ Av=window.event.srcElement; }else{ Av=UP.currentTarget; }var tc=lO(Av); if(!ur){ if(KW(tc)){ WV(tc); }}}function hK(UP){ if(window.event){ Av=window.event.srcElement; }else{ Av=UP.currentTarget; }var tc=lO(Av); XT(tc); }function km(id){ var tc=sX(id); var GF=document.getElementById(id); if(tc.LW){ ur=false; bX(GF,tc); var ZU=document.getElementById(tc.id+"-eci"); ZU.src=iX; tc.LW=false; }else{ gZ(GF,tc); var ZU=document.getElementById(tc.id+"-eci"); ZU.src=eR; tc.LW=true; }WV(tc); }function bX(GF,tc){ fU(tc.id,false); GF.style.height=tc.height+"px"; document.getElementById(GF.id+'-sp').style.display='block'; var DN=document.getElementById(tc.id+"-rs"); DN.style.visibility="visible"; jQ(tc); tc.lU(); }function fU(id,state){ sX(id).Fk=state; var uQ=document.getElementById(id+'-vsbt'); uQ.style.visibility=state?'hidden':'inherit'; }function gZ(GF,tc){ fU(tc.id,true); var Vb=NA(tc.id); GF.style.height=Vb+"px"; document.getElementById(GF.id+'-sp').style.display='none'; var DN=document.getElementById(tc.id+"-rs"); DN.style.visibility="hidden"; tc.lU(); }function tV(UP,id){ if(sX(id).pr=='MAXIMIZED') return; var tc=sX(id); if(!tc.LW) return; if(mg) return; if(ur) return; ur=true; ZN=document.getElementById(id); FV(ZN); bX(ZN,tc); bA(tc); jQ(tc); }function UY(Ek){ if(!ur) return; if(rK) return; if(nl) return; var tc=lO(Ek.rl); if(tc.pr=='MAXIMIZED') return; cO(ZN); ur=false; gZ(ZN,tc); ur=false; }function jQ(tc,EA){ try{ if(tc.Fk) return; var dr=document.getElementById(tc.id+'-pc'); var Jr=document.getElementById(tc.id+'-sp'); var AI=document.getElementById(tc.id+'-vsbh'); var uQ=document.getElementById(tc.id+'-vsbt'); var Vb=NA(tc.id); var as=tc.height-Vb; if(!EA){ uQ.style.height=as+"px"; }var sA=4; var cL=parseInt(uQ.style.height)-15; var bM=dr.offsetHeight; var Bl=Jr.offsetHeight; var NB=Bl/bM; var Sw=parseInt(dr.style.top); var lo=Math.round(NB*cL); var ZI=Math.round(tc.xj*(cL-lo))+4; var Lr=(NB<=1); if(lo>cL) lo=cL; try{ AI.style.top=ZI+"px"; }catch(UP){ AI.style.top='0px'; }if(!EA){ AI.style.height=lo+"px"; uQ.style.visibility=(Lr?'inherit':'hidden'); tc.nq().style.paddingRight=Lr?'18px':'10px'; }dr.style.top=Math.round(tc.xj*-1*(bM-Bl))+"px"; if(NB>=1){ dr.style.top="0px"; }; if(Lr){ if(!isIE) tc.nq().style.width=(tc.width-28)+'px'; }tc.Lr=Lr; }catch(UP){ if(iL) alert("resizeScrollbar: "+UP); }}function eB(NS,XH){ if(NS<0) return 0; var wN=Math.ceil(NS/XH)*XH; return wN; }function oV(NS){ return eB(NS,tt); }function rd(NS){ return eB(NS,DI); }function Xo(event,id,cB){ pr=cB; ZN=document.getElementById(id); en=sX(id); Jr=va(id); dr=document.getElementById(id+'-pc'); if((cB=='drag')&&(en.pr=='MAXIMIZED')) return; if(pr=='drag') mg=true; if(pr=='resize') nl=true; if(pr=='scroll') rK=true; FV(ZN); jr(); if(isIE){ nA=window.event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft; QR=window.event.clientY+document.documentElement.scrollTop+document.body.scrollTop; }else{ nA=event.clientX+window.scrollX; QR=event.clientY+window.scrollY; }oD=parseInt(ZN.style.left); SM=parseInt(ZN.style.top); uV=parseInt(ZN.style.width); eA=parseInt(ZN.style.height); var Kw=document.getElementById(en.id+'-vsbh'); tG=parseInt(Kw.style.top); aU=en.xj; Hv=parseInt(dr.style.top); if(isIE){ document.attachEvent(kK,pv); document.attachEvent(Pc,fe); window.event.cancelBubble=true; window.event.returnValue=false; }else{ document.addEventListener(Px,pv,true); document.addEventListener(jL,fe,true); event.preventDefault(); }}function pv(event){ var x,y,PT,rq; if(isIE){ x=window.event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft; y=window.event.clientY+document.documentElement.scrollTop+document.body.scrollTop; }else{ x=event.clientX+window.scrollX; y=event.clientY+window.scrollY; }PT=x-nA; rq=y-QR; if(pr=='drag'){ var Vu=oV((oD+PT)); var cG=rd((SM+rq)); Vu=Math.max(vt,Vu); cG=Math.max(DK,cG); if(en.left!=Vu||en.top!=cG){ en.left=Vu; en.top=cG; Wd(ZN,Vu,cG); }}if(pr=='resize'){ var WA=oV(Math.max(Ae,(uV+PT)),true); var Xx=rd(Math.max(Sv,(eA+rq)),true); if(en.width!=WA||en.height!=Xx){ en.width=WA; en.height=Xx; EE(ZN,Jr,WA,Xx); }}if(pr=='scroll'){ var gk=tG+rq; var uQ=document.getElementById(en.id+'-vsbt'); var cL=parseInt(uQ.style.height)-15; var AI=document.getElementById(en.id+'-vsbh'); var ja=AI.offsetHeight; en.xj=aU+(rq/(cL-ja)); if(en.xj<0) en.xj=0; if(en.xj>1) en.xj=1; jQ(en,true); }if(isIE){ window.event.cancelBubble=true; window.event.returnValue=false; }else{ event.preventDefault(); }hi(); }function iU(tc,xL){ var IS=54*xL; tc.xj=tc.xj+(IS/(tc.nq().offsetHeight-parseInt(tc.va().offsetHeight))); if(tc.xj<0) tc.xj=0; if(tc.xj>1) tc.xj=1; jQ(tc,true); }function fe(event){ mg=false; nl=false; rK=false; cO(ZN); if(isIE){ document.detachEvent(kK,pv); document.detachEvent(Pc,fe); }else{ document.removeEventListener(Px,pv,true); document.removeEventListener(jL,fe,true); }KW(en); jQ(en); bA(en); if(pr=='resize'){ var tc=en; if(tc.JK=='widget'){ if(tc.Sj){ tc.Sj.uc.jM(nl); }}}if(!(en.kE==Us&&pr=='resize')){ WV(en); }if(pr!='scroll'){ bj(uN); aA(); }gw(); uZ(); }function is(event){ if(isIE){ window.event.cancelBubble=true; window.event.returnValue=false; }else{ event.preventDefault(); }}function contains(Hc,LZ){ try{ if(!LZ) return false; while(LZ.parentNode) if((LZ=LZ.parentNode)==Hc) return true; return false; }catch(UP){ return false; }}function KW(tc){ var CP=new Object(); CP.left=tc.left; CP.top=tc.top; CP.width=tc.width; CP.height=tc.LW?NA(tc.id):tc.height; for(var kD in panelDatas){ var SZ=panelDatas[kD]; if(SZ.IL!=uN) continue; if(tc.id==SZ.id) continue; if(!tc.Ed&&SZ.Ed) continue; var eS=new Object(); eS.left=SZ.left; eS.top=SZ.top; eS.width=SZ.width; eS.height=SZ.LW?wE(SZ.id):SZ.height; var Su=(CP.left>=eS.left)&&(CP.left<=(eS.left+eS.width)); var FO=((CP.left+CP.width)>=eS.left)&&((CP.left+CP.width)<=(eS.left+eS.width)); var KJ=(CP.top>=eS.top)&&(CP.top<=(eS.top+eS.height)); var EU=((CP.top+CP.height)>=eS.top)&&((CP.top+CP.height)<=(eS.top+eS.height)); var UP=(eS.left>=CP.left)&&(eS.left<=(CP.left+CP.width)); var cp=((eS.left+eS.width)>=CP.left)&&((eS.left+eS.width)<=(CP.left+CP.width)); var EV=(eS.top>=CP.top)&&(eS.top<=(CP.top+CP.height)); var FU=((eS.top+eS.height)>=CP.top)&&((eS.top+eS.height)<=(CP.top+CP.height)); if(((Su||FO)&&(KJ||EU))||((UP||cp)&&(EV||FU))) { if(tc.zIndex<=SZ.zIndex){ tc.zIndex=++maxPanelZIndex; if(tc.Ed||Lg) tc.zIndex=++maxPanelZIndex; tc.Sl().style.zIndex=tc.zIndex; tc.GP(); return true; }}}return false; }function JU(){ document.location.reload(); }function Ii(show){ if(loggedIn){ var Vj=LG('protopage'); var iu=new Array(); iu.push(new cQ('authToken',Vj)); var gN=new JX(accountId,protopageId,protopagePath,'clear-auth-token',iu); gN.XF=function(){ SC('protopage','/'+protopagePath); th(protopagePath); JU(); }; Vs(5); setTimeout(function(){ commandProcessor.pl(gN); },800); setTimeout(function(){JU();},20000); return; }if(show==true){ var ar=checkCookiesEnabled(); if(!ar) return; document.getElementById('login').style.display='block'; var it=document.getElementById('loginField-protopagePath'); if(protopagePath=='protopage/loginrequired'){ it.value=pageParams['pagePathAttempted']; }else if(protopagePath=='protopage/welcome'){ it.value=''; }else if(protopagePath=='protopage/addlink'){ it.value=''; }else{ it.value=protopagePath; }if(it.value!=''){ document.getElementById('loginField-password').focus(); }else{ it.focus(); }}else{ document.getElementById('login').style.display='none'; }}function Ib(){ return uS('links','Links panel',56,sO(),254,100,'00',false,'',''); }function Ur(){ return uS('html','Sticky note',56,sO(),254,100,'00',false,'',''); }function pS(TL){ var wD=new Object(); wD['headlinesOnly']=true; wD['maxHeadlinesPerFeed']=3; wD['showFullArticlesWhenMaximized']=true; wD['maxHeadlinesPerFeedWhenMaximized']=7; if(TL){ wD['feeds']=new Array(); for(var kD in TL) wD.feeds.push([TL[kD]]); }else{ }return uS('widget','News feed',56,sO(),351,215,'00',false,Us,'',wD); }function fg(kE,SH,width,height){ var da=(width!=null)?width:351; var FU=(height!=null)?height:215; var wD=new Object(); return uS('widget',SH,56,sO(),da,FU,'00',false,kE,'',wD); }function uS(JK,title,Iv,rt,width,height,Fp,Ed,kE,UQ,wD,se,content,XD){ if(Iv<10) Iv=10; if(rt<60) rt=60; var qo='new'+Math.ceil(10000000*Math.random()); var wU=RE(Iv,rt); if(content==undefined||content==null){ if(JK=='links') content=null; if(JK=='html') content=''; if(JK=='widget'&&wD!=null) content=bL.stringify(wD); }if(XD==null) XD=[new LinkData('Example link','http://www.bbc.co.uk/news')]; var tc=new PanelData(qo,JK,title,wU.x,wU.y,width,height,false,++maxPanelZIndex,0,XD,content,'FLOATING',uN,Fp,kE,UQ,Ed); if(!kE) tc.kE=''; if(!UQ) tc.UQ=''; panelDatas.push(tc); tc.VA(); tc.Mc(); bA(tc); jQ(tc); bj(uN); aA(); if(kE!='protopage-widget-config'){ var aY=tc.left; var vk=tc.top; scrollTo(aY,vk); }if(!tc.Ed){ var iu=new Array(); iu.push(new cQ('protopageId',protopageId)); iu.push(new cQ('objectType',JK)); iu.push(new cQ('zIndex',tc.zIndex)); iu.push(new cQ('left',tc.left)); iu.push(new cQ('top',tc.top)); iu.push(new cQ('width',tc.width)); iu.push(new cQ('height',tc.height)); iu.push(new cQ('widgetId',tc.kE)); iu.push(new cQ('widgetKey',tc.UQ)); iu.push(new cQ('content',content)); var gN=new JX(accountId,protopageId,protopagePath,'request-new-panel-id',iu); gN.mb=qo; gN.XF=Kn; commandProcessor.pl(gN); }if(tc.JK=='links'){ if(!tc.Ed) wX(tc); }if(tc.JK=='html'||tc.JK=='note'){ if(!tc.Ed) Si(tc); }if(tc.JK=='widget'){ if(se) tc.xW(se); else tc.xW(); if(!tc.Ed){ tc.Sj.uc.AM(); }}if(!tc.Ed){ WV(tc); }return tc; }function Kn(gN,fZ){ var mb=gN.mb; var tc=sX(mb); tc.Pb=fZ; }function hA(){ if(!loggedIn) return; var da=document.getElementById('expiry-warning'); var LU=(branding=='FT'?'ft':'www')+'.protopage.com/yourname'; da.innerHTML='<div style="border:1px solid #000000; padding:3px;"><div style="font-size:16px;">REGISTER HERE</div><a class="scheme-body" onclick="document.getElementById(\'registerForm\').submit(); return false;" href=""><div style="display:inline; font-size:14px;">Click here to name this page</div></a><div style="font-size:12px;">(e.g. as '+LU+')<br>It will otherwise expire in '+hoursUntilExpiry+' hours.</div></div>'; da.style.visibility='visible'; }function IQ(){ if(protopagePath==''||protopagePath=='protopage/welcome') return; var hs=null; for(var kD in panelDatas){ var tc=panelDatas[kD]; if(tc.IL!=uN) continue; if(tc.LW) continue; if(tc.JK=='html'&&!tc.LW){ var Ca=document.getElementById(tc.id+'-pc'); var EM=Ca.getElementsByTagName('INPUT'); for(var kG in EM){ if(EM[kG].type!=null&&EM[kG].type.toUpperCase()=='TEXT'){ hs=EM[kG]; break; }}}}if(hs!=null){ try{ hs.focus(); oX=hs; }catch(UP){}}}function importNewLink(label,url,type){ var La=document.getElementById('add-new-link-panel-choice'); var Mk=document.getElementById('add-new-feed-panel-choice'); var JQ=document.getElementById('add-new-item-as-link-radio'); var YU=document.getElementById('add-new-item-as-feed-radio'); var Pg=document.getElementById('add-new-link-panel-div'); var hf=document.getElementById('add-new-feed-panel-div'); JQ.onmousedown=function(){ Pg.style.display='block'; hf.style.display='none'; return true; }; YU.onmousedown=function(){ Pg.style.display='none'; hf.style.display='block'; return true; }; if(type=='feed'){ JQ.checked=false; YU.checked=true; YU.onmousedown(); }document.getElementById('add-new-link').style.display='block'; document.getElementById('add-new-link-title').value=label; document.getElementById('add-new-link-address').value=url; while(La.childNodes.length>0) La.removeChild(La.childNodes[0]); for(var kD in panelDatas){ if(panelDatas[kD].JK=='links'){ oE(panelDatas[kD].id,panelDatas[kD].title,La); }}oE('','(create new panel for this link)',La); while(Mk.childNodes.length>0) Mk.removeChild(Mk.childNodes[0]); for(var kD in panelDatas){ if(panelDatas[kD].IL!=uN) continue; if(panelDatas[kD].JK=='widget'&&panelDatas[kD].kE==Us){ oE(panelDatas[kD].id,panelDatas[kD].title,Mk); }}oE('','(create new panel for this link)',Mk); }function addNewLink(){ var La=document.getElementById('add-new-link-panel-choice'); var Mk=document.getElementById('add-new-feed-panel-choice'); var JQ=document.getElementById('add-new-item-as-link-radio'); var YU=document.getElementById('add-new-item-as-feed-radio'); var WH; var label; var url; var type; if(JQ.checked==true){ type='link'; WH=La.value; }else{ type='feed'; WH=Mk.value; }label=document.getElementById('add-new-link-title').value; url=document.getElementById('add-new-link-address').value; var CI; if(type=='link'){ if(WH==''||WH==null){ CI=uS('links','Untitled bookmarks',56,sO(),254,100,'00',false,'',''); CI.XD=new Array(); }else{ CI=sX(WH); }CI.XD.push(new LinkData(label,url)); ki(CI); }if(type=='feed'){ var cF=url; if(url.indexOf('http://')!=0) cF='http://'+url; var locatorUrl='('+label+')     '+cF; if(WH==''||WH==null){ CI=pS([locatorUrl]); }else{ CI=sX(WH); var feeds=CI.Sj.uc.getAttribute('feeds'); feeds.unshift([locatorUrl]); }CI.Sj.uc.AM(); CI.Sj.uc.KO(); }}function th(Mo){ var Tq=pI(); var Aq=new Array(); for(var kD in Tq){ if(Tq[kD]==Mo) continue; Aq.push(Tq[kD]); }var CB=Aq.join(":"); At("login",CB,"/"); }function pI(){ var KJ=LG("login"); if(KJ==null) return new Array(); else return KJ.split(":"); }function Ua(){ Cv(tJ); Cv(Jm); Cv(Jm.popup); Cv(Jq); Cv(Ru); Cv(nv); }function Cv(rc){ if(!rc) return; var AZ=colorsAndSettings.opacity+25; if(AZ>100) AZ=100; PP(rc.rl,AZ); if(rc.dL) rc.dL.PP(AZ); }function hi(){ eO.style.width=FX()+'px'; eO.style.height=Bk()+'px'; }function gw(){ if(eO){ try{ eM().removeChild(eO); }catch(UP){}}eO=null; }function jr(){ if(eO!=null) gw(); eO=document.createElement('div'); eO.style.position='absolute'; eO.style.left=0+'px'; eO.style.top=0+'px'; eO.style.width=FX()+'px'; eO.style.height=Bk()+'px'; eO.style.zIndex=10000000000000; eM().appendChild(eO); }function ZV(){ this.pX=document.createElement('div'); this.pX.id='scheme-chooser'; this.pX.className='scheme-body'; this.pX.style.position='relative'; this.pX.style.padding='6px'; this.pX.style.fontSize='11px'; var cX=this; this.ew=new Array(); var YO=function(wN){colorsAndSettings.hueOffset=wN;HX(true,false,false);}; var XR=function(wN){colorsAndSettings.saturationOffset=wN;HX(true,false,false);}; var Xp=function(wN){colorsAndSettings.opacity=Math.round(wN);HX(false,false,false,true);}; this.Ys=new aa(180,-180,180,null,null,YO); this.vN=new aa(180,-100,100,null,null,XR); this.Hu=new aa(180,15,100,null,Xp,Xp); var cZ=new Array(); for(var kD in baseSchemes) cZ.push(baseSchemes[kD].label); var dJ=new Array(); for(var kD in baseSchemes) dJ.push(baseSchemes[kD].id); this.CZ=new HV(cZ,dJ,function(wN){ colorsAndSettings.hueOffset=0; colorsAndSettings.saturationOffset=0; cX.Ys.Rf(colorsAndSettings.hueOffset); cX.vN.Rf(colorsAndSettings.saturationOffset); if(colorsAndSettings.backgroundMode=='PLAIN_COLOR'){ colorsAndSettings.backgroundHueOffset=0; colorsAndSettings.backgroundSaturationOffset=0; colorsAndSettings.backgroundLightnessOffset=0; cX.pu.Rf(0); cX.bs.Rf(0); cX.SD.Rf(0); }colorsAndSettings.baseScheme=wN;HX(true,true,false); }); this.To=new MP(['Wallpaper image','Pattern','Plain color'],['WALLPAPER_IMAGE','PATTERN','PLAIN_COLOR'],function(wN){ if(wN==colorsAndSettings.backgroundMode) return; var OQ=50; cX.pu.Rf(0); cX.bs.Rf(OQ); cX.SD.Rf(0); cX.pu.Ee(); cX.bs.Ee(); cX.SD.Ee(); colorsAndSettings.backgroundHueOffset=0; colorsAndSettings.backgroundSaturationOffset=OQ; colorsAndSettings.backgroundLightnessOffset=0; colorsAndSettings.backgroundMode=wN; cX.fv(); HX(true,false,true,false); }); this.OW=new HV(['Stitches','Dots','Fine diagonal stripes','Fine diagonal stripes 2','Diagonal tubes','Diagonal tubes 2','Fine horizontal stripes','Fine horizontal stripes 2','Horizontal tubes','Horizontal tubes 2','Fine vertical stripes','Mistle'],['stitches','dots','diagonal-stripes','diagonal-stripes2','diagonal-tubes','diagonal-tubes2','horizontal-stripes','horizontal-stripes2','horizontal-tubes','horizontal-tubes2','vertical-stripes','mistle'],function(wN){colorsAndSettings.backgroundPattern=wN;HX(false,false,true);}); this.pu=new aa(180,-180,180,null,function(wN){ colorsAndSettings.backgroundHueOffset=wN; if(colorsAndSettings.backgroundMode=='PLAIN_COLOR') HX(true,false,false,false); },function(wN){ colorsAndSettings.backgroundHueOffset=wN; if(colorsAndSettings.backgroundMode=='PLAIN_COLOR') HX(true,false,false,false); else HX(false,false,true,false); }); this.bs=new aa(180,-100,100,null,function(wN){ colorsAndSettings.backgroundSaturationOffset=wN; if(colorsAndSettings.backgroundMode=='PLAIN_COLOR') HX(true,false,false,false); },function(wN){ colorsAndSettings.backgroundSaturationOffset=wN; if(colorsAndSettings.backgroundMode=='PLAIN_COLOR') HX(true,false,false,false); else HX(false,false,true,false); }); this.SD=new aa(180,-100,100,null,function(wN){ colorsAndSettings.backgroundLightnessOffset=wN; if(colorsAndSettings.backgroundMode=='PLAIN_COLOR') HX(true,false,false,false); },function(wN){ colorsAndSettings.backgroundLightnessOffset=wN; if(colorsAndSettings.backgroundMode=='PLAIN_COLOR') HX(true,false,false,false); else HX(false,false,true,false); }); var Sh=new Array(); for(var kD in wallpaperChoices) Sh[kD]=wallpaperChoices[kD].label; var ow=new Array(); for(var kD in wallpaperChoices) ow[kD]=wallpaperChoices[kD].url; this.BI=new HV(Sh,ow,function(wN){ colorsAndSettings.wallpaperImageUrl=wN; cX.Fn.Rf(colorsAndSettings.wallpaperImageUrl); HX(false,false,true); }); this.Fn=new Mv(function(wN){colorsAndSettings.wallpaperImageUrl=wN; HX(false,false,true);}); this.uA=new HV(['Centered','Tiled'],['CENTER','TILE'],function(wN){colorsAndSettings.wallpaperMode=wN;HX(false,false,true);}); this.Gk=new Yk('Enable widget shadows (untick for faster page display)',function(wN){ if(colorsAndSettings.panelDropShadowPreference==wN) return; colorsAndSettings.panelDropShadowPreference=wN?'ALWAYS':'NEVER'; YB(); }); this.iw=new Yk('Open links in new windows',function(wN){colorsAndSettings.openLinksInNewWindow=wN;}); this.oN=new MP(['Free positioning','Gravity'],['FREE','GRAVITY'],function(wN){ var Tg=colorsAndSettings.widgetPositioning; if(Tg==null||Tg=='FREE'){ if(wN=='GRAVITY'){ if(!co){ for(var kD in panelDatas){ var tc=panelDatas[kD]; if(!tc.Ed){ tc.Kr=tc.left; tc.MF=tc.top; }}co=true; }colorsAndSettings.widgetPositioning=wN; var Qu=JF(true); for(var kD=0;kD<=Qu;kD++) bj(kD); }}else if(Tg=='GRAVITY'){ if(wN=='FREE'){ if(co){ for(var kD in panelDatas){ var tc=panelDatas[kD]; if(!tc.Ed){ tc.left=tc.Kr; tc.top=tc.MF; if(Sl(tc.id)) Wd(Sl(tc.id),tc.left,tc.top); }}co=false; }for(var kD in panelDatas){ var tc=panelDatas[kD]; tc.qH=false; }colorsAndSettings.widgetPositioning=wN; }}}); this.tC=document.createElement('table'); this.tC.cellSpacing=5; this.table=document.createElement('tbody'); this.tC.appendChild(this.table); this.table.appendChild(jb('Panel colors')); this.table.appendChild(lZ('Drag to rotate page colors',this.Ys)); this.table.appendChild(lZ('Adjust the amount of color',this.vN)); if(he()){ this.table.appendChild(lZ('Adjust panel transparency',this.Hu)); }this.table.appendChild(WN('Choose different base schemes',this.CZ)); this.table.appendChild(TQ()); this.table.appendChild(jb('Page background')); this.table.appendChild(nN(this.To)); this.fI=new Array(); this.fI.push(WN('Choose a background pattern',this.OW)); this.fI.push(lZ('Rotate background color',this.pu)); this.fI.push(lZ('Adjust amount of background color',this.bs)); this.fI.push(lZ('Adjust background brightness',this.SD)); this.VU=new Array(); this.VU.push(this.fI[1]); this.VU.push(this.fI[2]); this.VU.push(this.fI[3]); this.hQ=new Array(); this.hQ.push(WN('Choose your wallpaper',this.BI)); this.hQ.push(tZ('(or enter your own wallpaper url)',this.Fn)); this.hQ.push(WN('Wallpaper display mode',this.uA)); this.NR=TQ(); this.table.appendChild(this.NR); this.table.appendChild(jb('Page preferences')); this.table.appendChild(El('',this.Gk)); this.table.appendChild(El('Open links in new windows',this.iw)); this.table.appendChild(TQ()); this.table.appendChild(jb('Widget positioning')); this.table.appendChild(nN(this.oN)); this.table.appendChild(TQ()); var Vr=document.createElement('tr'); var ov=document.createElement('td'); ov.colSpan=3; ov.innerHTML='		<div style="text-align:right;">			<a class="scheme-body" href="" onClick="'+Ck(iR)+'(false); return false;">Cancel</a>			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;			<a class="scheme-body" href="" onClick="'+Ck(iR)+'(true); return false;">OK</a></div>'; Vr.appendChild(ov); this.table.appendChild(Vr); this.pX.appendChild(this.tC); this.Yi(); }ZV.prototype.fv=function(){ for(var kD in this.fI){ try{this.table.removeChild(this.fI[kD]);}catch(UP){}}for(var kD in this.VU){ try{this.table.removeChild(this.VU[kD]);}catch(UP){}}for(var kD in this.hQ){ try{this.table.removeChild(this.hQ[kD]);}catch(UP){}}if(colorsAndSettings.backgroundMode=='PATTERN'){ for(var kD in this.fI){ this.table.insertBefore(this.fI[kD],this.NR); }this.bs.qS(0,100); }else if(colorsAndSettings.backgroundMode=='PLAIN_COLOR'){ for(var kD in this.VU){ this.table.insertBefore(this.VU[kD],this.NR); }this.bs.qS(-100,100); }else if(colorsAndSettings.backgroundMode=='WALLPAPER_IMAGE'){ for(var kD in this.hQ){ this.table.insertBefore(this.hQ[kD],this.NR); }}vQ(); }; ZV.prototype.open=function(){ this.ew=new Array(); for(var kD in colorsAndSettings) this.ew[kD]=colorsAndSettings[kD]; this.kw(); }; ZV.prototype.close=function(Lh){ if(!Lh){ this.oN.RA(this.ew['widgetPositioning']); for(var kD in this.ew) colorsAndSettings[kD]=this.ew[kD]; HX(true,true,true); }else{ colorsAndSettings.wallpaperImageUrl=this.Fn.gL(); HX(false,false,true); Dn(); aA(); }Ro(); }; ZV.prototype.Yi=function(){ this.Ys.Rf(0); this.vN.Rf(100); this.Hu.Rf(100); this.pu.Rf(0); this.bs.Rf(0); this.SD.Rf(0); this.OW.Rf('diagonal-stripes'); }; ZV.prototype.kw=function(){ this.Ys.Rf(colorsAndSettings.hueOffset); this.vN.Rf(colorsAndSettings.saturationOffset); this.Hu.Rf(colorsAndSettings.opacity); this.CZ.Rf(colorsAndSettings.baseScheme); this.OW.Rf(colorsAndSettings.backgroundPattern); this.pu.Rf(colorsAndSettings.backgroundHueOffset); this.bs.Rf(colorsAndSettings.backgroundSaturationOffset); this.SD.Rf(colorsAndSettings.backgroundLightnessOffset); this.To.Rf(colorsAndSettings.backgroundMode); this.fv(); this.BI.Rf(colorsAndSettings.wallpaperImageUrl); this.Fn.Rf(colorsAndSettings.wallpaperImageUrl); this.uA.Rf(colorsAndSettings.wallpaperMode); this.Gk.Rf(colorsAndSettings.panelDropShadowPreference!='NEVER'); this.iw.Rf(colorsAndSettings.openLinksInNewWindow); this.oN.Rf(colorsAndSettings.widgetPositioning); }; function jb(label){ var ia=document.createElement('tr'); var Np=document.createElement('td'); var pX=document.createElement('div'); pX.innerHTML=label; pX.className='scheme-body'; pX.style.fontWeight='bold'; pX.style.height='1.4em'; Np.colSpan=3; Np.appendChild(pX); ia.appendChild(Np); return ia; }function mR(label){ var ia=document.createElement('tr'); var Np=document.createElement('td'); Np.colSpan=3; Np.innerHTML=label; Np.className='scheme-body'; Np.style.fontSize='11px'; Np.style.paddingLeft='42px'; ia.appendChild(Np); return ia; }function TQ(){ var ia=document.createElement('tr'); var Np=document.createElement('td'); Np.innerHTML='&nbsp;'; Np.className='scheme-body'; Np.style.fontSize='20%'; ia.appendChild(Np); return ia; }function El(label,QZ){ var ia=document.createElement('tr'); var Np=document.createElement('td'); Np.colSpan=3; ia.appendChild(Np); Np.appendChild(QZ.rl); return ia; }function nN(Ic){ var ia=document.createElement('tr'); var Np=document.createElement('td'); Np.colSpan=3; Np.style.textAlign='left'; Np.align='left'; ia.appendChild(Np); Np.appendChild(Ic.rl); return ia; }function WN(label,uu){ var ia=document.createElement('tr'); var Np=document.createElement('td'); var Be=document.createElement('td'); Np.innerHTML=label; Np.className='scheme-body'; Be.colSpan=2; ia.appendChild(Np); ia.appendChild(Be); Be.appendChild(uu.rl); return ia; }function tZ(label,GK){ var ia=document.createElement('tr'); var Np=document.createElement('td'); var Be=document.createElement('td'); Np.innerHTML=label; Np.className='scheme-body'; Be.colSpan=2; ia.appendChild(Np); ia.appendChild(Be); Be.appendChild(GK.rl); return ia; }function lZ(label,ux){ var ia=document.createElement('tr'); var Np=document.createElement('td'); var Be=document.createElement('td'); var Ql=document.createElement('td'); ia.appendChild(Np); ia.appendChild(Be); ia.appendChild(Ql); ia.className='scheme-body'; Np.innerHTML=label; Np.className='scheme-body'; Be.appendChild(ux.pX); Ql.style.textAlign='right'; Ql.style.width='4.5ex'; Ql.className='scheme-body'; ux.kh(function(wN){ Ql.innerHTML=''+Math.round(wN); }); return ia; }var vK=95.047
var sW=100.000
var ref_LL=108.883 
function rm(id,label,jn,kt,OR,Oe,rA){ this.id=id; this.label=label; this.jn=jn; this.kt=kt; this.OR=OR; this.Oe=Oe; this.rA=rA; }function ColorsAndSettings(hueOffset,saturationOffset,opacity,baseScheme,backgroundMode,backgroundPattern,backgroundHueOffset,backgroundSaturationOffset,backgroundLightnessOffset,wallpaperImageUrl,wallpaperMode,panelDropShadowPreference,openLinksInNewWindow,widgetPositioning){ this.hueOffset=hueOffset; this.saturationOffset=saturationOffset; this.opacity=opacity; this.baseScheme=baseScheme; this.backgroundMode=backgroundMode; this.backgroundPattern=backgroundPattern; this.backgroundHueOffset=backgroundHueOffset; this.backgroundSaturationOffset=backgroundSaturationOffset; this.backgroundLightnessOffset=backgroundLightnessOffset; this.wallpaperImageUrl=wallpaperImageUrl; this.wallpaperMode=wallpaperMode; this.panelDropShadowPreference=panelDropShadowPreference; this.openLinksInNewWindow=openLinksInNewWindow; this.widgetPositioning=widgetPositioning; }var baseSchemes=[ new rm(18,'Cappuccino',new Cg('#000000'),new Cg('#FFFFFF'),new Cg('#000000'),new Cg('#FFFFC8'),new Cg('#71A1D1'),null),new rm(19,'Espresso',new Cg('#FFFFFF'),new Cg('#000000'),new Cg('#000000'),new Cg('#FFFFC8'),new Cg('#71A1D1'),null),new rm(2,'Paper',new Cg('#000000'),new Cg('#BEE2D4'),new Cg('#000000'),new Cg('#FFFFFF'),new Cg('#E9F8F2'),null),new rm(13,'Banana',new Cg('#000000'),new Cg('#FFFAA1'),new Cg('#000000'),new Cg('#FFFFFF'),new Cg('#71A1D1'),null),new rm(14,'Lemon cheesecake',new Cg('#000000'),new Cg('#FFE873'),new Cg('#000000'),new Cg('#FEFFD8'),new Cg('#FFF7B7'),null),new rm(20,'Championship',new Cg('#000000'),new Cg('#FFFFFF'),new Cg('#FFFFFF'),new Cg('#B60000'),new Cg('#D40B15'),null),new rm(21,'Snowcap',new Cg('#000000'),new Cg('#FFFFFF'),new Cg('#FFFFFF'),new Cg('#2353D6'),new Cg('#D40B15'),null),new rm(3,'Flex',new Cg('#FFFFFF'),new Cg('#2854D1'),new Cg('#000000'),new Cg('#FFFFFF'),new Cg('#71A1D1'),null),new rm(17,'Live wire',new Cg('#FFFFFF'),new Cg('#4775F4'),new Cg('#FFFFFF'),new Cg('#2B57D4'),new Cg('#71A1D1'),null),new rm(8,'Washed',new Cg('#05255C'),new Cg('#E0E9FF'),new Cg('#05255C'),new Cg('#FFFFFF'),new Cg('#FCFFDF'),null),new rm(15,'Ocean breeze',new Cg('#FFFFFF'),new Cg('#5A9AFF'),new Cg('#000000'),new Cg('#E3EEFF'),new Cg('#71A1D1'),null),new rm(16,'Zest',new Cg('#FFFFFF'),new Cg('#FF6A54'),new Cg('#000000'),new Cg('#FFC3BA'),new Cg('#71A1D1'),null),new rm(1,'Solid',new Cg('#FFFFFF'),new Cg('#14305A'),new Cg('#FFFFFF'),new Cg('#0A182C'),new Cg('#525D7A'),null),new rm(4,'Fizzy',new Cg('#FFFFFF'),new Cg('#F63A6C'),new Cg('#FFFFFF'),new Cg('#AB2045'),new Cg('#F18BA6'),null),new rm(5,'Pro',new Cg('#FFFFFF'),new Cg('#913D3D'),new Cg('#000000'),new Cg('#FFFFFF'),new Cg('#E8F8D3'),null),new rm(6,'Slate',new Cg('#FFFFFF'),new Cg('#41330B'),new Cg('#FFFFFF'),new Cg('#262621'),new Cg('#353530'),null),new rm(7,'Mocha',new Cg('#FFFFFF'),new Cg('#654B08'),new Cg('#FFFFFF'),new Cg('#322604'),new Cg('#7A6F52'),null),new rm(9,'Loud',new Cg('#000000'),new Cg('#FFE500'),new Cg('#000000'),new Cg('#FFCC00'),new Cg('#FFB200'),null),new rm(10,'Sheer',new Cg('#FFFFFF'),new Cg('#001C75'),new Cg('#FFFFFF'),new Cg('#002EA5'),new Cg('#96C6F4'),null),new rm(11,'Tangerine',new Cg('#FFFFFF'),new Cg('#DC8050'),new Cg('#FFFFFF'),new Cg('#FF7E47'),new Cg('#D4470B'),null),new rm(12,'Sanguine',new Cg('#FFFFFF'),new Cg('#A70000'),new Cg('#FFFFFF'),new Cg('#FF3B3B'),new Cg('#D40B15'),null)]; var wallpaperChoices=[new UI('(No wallpaper)',''),new UI('Dove','/web/images/wallpaper/dove.jpg'),new UI('Leaf floating in pond','/web/images/wallpaper/floating-leaf.jpg'),new UI('Blue sky','/web/images/wallpaper/blue-sky.jpg'),new UI('Blue sky 2','/web/images/wallpaper/blue-sky2.jpg'),new UI('Blue sky 3','/web/images/wallpaper/blue-sky3.jpg'),new UI('Night sky','/web/images/wallpaper/night-sky.jpg'),new UI('Green leaf','/web/images/wallpaper/green-leaf.gif'),new UI('Green leaf 2','/web/images/wallpaper/green-leaf-2.jpg'),new UI('Coffee beans','/web/images/wallpaper/coffee-beans.jpg'),new UI('Garden','/web/images/wallpaper/garden.jpg'),new UI('Red and yellow flower','/web/images/wallpaper/red-and-yellow-flower.jpg'),new UI('Winter berries','/web/images/wallpaper/winter-berries.jpg'),new UI('Peppercorns','/web/images/wallpaper/peppercorns.jpg'),new UI('Dog','/web/images/wallpaper/dog.jpg'),new UI('Purple flower','/web/images/wallpaper/purple-flower.jpg'),new UI('Cat','/web/images/wallpaper/cat.jpg'),new UI('Frozen grass','/web/images/wallpaper/frozen-grass.jpg'),new UI('Blueberries','/web/images/wallpaper/blueberries.jpg'),new UI('Daisies','/web/images/wallpaper/daisies.jpg'),new UI('Tropical','/web/images/wallpaper/tropical.jpg'),new UI('Swan','/web/images/wallpaper/swan.jpg'),new UI('Laser trace','/web/images/wallpaper/laser-trace.jpg')]; function UI(label,url){ this.label=label; this.url=url; }function Jg(Rp,Lv){ var Jh=new Cg(Rp); var FE=new Cg(Lv); Jh.me=(Jh.me+FE.me)/2; return Jh.Ww(0,0,0); }function Vq(Rp,Nv,Lv){ var pV=Jg(Nv,Lv); var WB=Jg(Rp,Lv); var DM=Ja(pV,WB); return DM; }function Cg(DM){ if(DM.substring(0,1)=='#') DM=DM.substring(1); this.Jn=DM; var var_xS=parseInt(DM.substring(0,2),16)/255; var Ix=parseInt(DM.substring(2,4),16)/255; var var_uq=parseInt(DM.substring(4,6),16)/255; var Zq=Math.min(Math.min(var_xS,Ix),var_uq); var fJ=Math.max(Math.max(var_xS,Ix),var_uq); var nP=fJ-Zq; this.me=(fJ+Zq)/2; if(nP==0) { this.Cb=0; this.Nc=0; }else { if(this.me<0.5) this.Nc=nP/(fJ+Zq); else           this.Nc=nP/(2-fJ-Zq); var del_xS=(((fJ-var_xS)/6)+(nP/2))/nP; var Bw=(((fJ-Ix)/6)+(nP/2))/nP; var del_uq=(((fJ-var_uq)/6)+(nP/2))/nP; if(var_xS==fJ) this.Cb=del_uq-Bw; else if(Ix==fJ) this.Cb=(1/3)+del_xS-del_uq; else if(var_uq==fJ) this.Cb=(2/3)+Bw-del_xS; if(this.Cb<0) this.Cb+=1; if(this.Cb>1) this.Cb-=1; }}Cg.prototype.Ww=function(hueOffset,saturationOffset,Ef){ var Ri=this.Cb; var En=this.Nc; var tp=this.me; if(hueOffset!=null) Ri=(((this.Cb*360)+hueOffset+360)%360)/360; if(saturationOffset!=null){ if(saturationOffset<-100) saturationOffset=-100; if(saturationOffset<=0){ En=(this.Nc*(saturationOffset+100))/100; }else{ En=this.Nc+((1-this.Nc)*(saturationOffset/100)); }}if(En>1) En=1; if(Ef!=null){ if(Ef<=0){ tp=(this.me*(Ef+100)/100); }else{ tp=this.me+((1-this.me)*(Ef/100)); }}if(tp>1) tp=1; if(En==0) { var xS=tp*255; var bP=tp*255; var uq=tp*255; }else { if(tp<0.5){ var ns=tp*(1+En); }else{ var ns=(tp+En)-(En*tp); }var aX=2*tp-ns; var xS=Math.round(255*Vc(aX,ns,Ri+(1/3))); var bP=Math.round(255*Vc(aX,ns,Ri)); var uq=Math.round(255*Vc(aX,ns,Ri-(1/3))); }xS=Math.round(xS); bP=Math.round(bP); uq=Math.round(uq); var kf=HF(xS.toString(16))+HF(bP.toString(16))+HF(uq.toString(16)); if(Ef==null){ kf=Ja(kf,this.Jn); }return kf; }; function Vc(Jc,Ep,BF) { if(BF<0) BF+=1; if(BF>1) BF-=1; if((6*BF)<1) return(Jc+(Ep-Jc)*6*BF); if((2*BF)<1) return(Ep); if((3*BF)<2) return(Jc+(Ep-Jc)*((2/3)-BF)*6); return(Jc); }function HF(IU){ if(IU.length==1) return '0'+IU; else return IU; }var Dc=180; var cr=180; var Xm=null; var wt=null; var iX; var eR; var ll; var Kd; function iR(Lh){ Nu.close(Lh); }function nj(){ if(colorsAndSettings.panelDropShadowPreference=='NEVER') return false; return true; }function he(){ return false; return!isIE; }function gV(tm){ var eS=''+tm; if(eS.length==1) eS='0'+eS; return eS; }var ws; var on; var jX; var TN; var qt=new Object(); var sc=new Object(); function HX(rR,xD,Da,oR){ if(he()){ if(oR){ for(var kD in panelDatas){ if(panelDatas[kD].IL!=uN) continue; panelDatas[kD].oR(); }Ua(); }}var baseScheme=cC(colorsAndSettings.baseScheme); if(rR){ if(document.styleSheets){ var rules=document.styleSheets.item(0).rules||document.styleSheets.item(0).cssRules; var Ag=rules.item(0); var Or=rules.item(1); var OH=rules.item(2); var xQ=rules.item(3); ws=baseScheme.jn.Ww(colorsAndSettings.hueOffset,colorsAndSettings.saturationOffset); on=baseScheme.kt.Ww(colorsAndSettings.hueOffset,colorsAndSettings.saturationOffset); jX=baseScheme.OR.Ww(colorsAndSettings.hueOffset,colorsAndSettings.saturationOffset); TN=baseScheme.Oe.Ww(colorsAndSettings.hueOffset,colorsAndSettings.saturationOffset); Ag.style.color='#'+ws; Ag.style.backgroundColor='#'+on; Or.style.color='#'+jX; Or.style.backgroundColor='#'+TN; for(var kD=0;kD<=10;kD++){ var gc=rules.item(4+(2*kD)); var qs=rules.item(4+(2*kD)+1); var Zn=(kD==10)?0:((kD/10)*360); var Ta=(kD==10)?-200:0; var GY=baseScheme.kt.Ww(colorsAndSettings.hueOffset+Zn,colorsAndSettings.saturationOffset+Ta,null,on); var fw=baseScheme.Oe.Ww(colorsAndSettings.hueOffset+Zn,colorsAndSettings.saturationOffset+Ta,null,TN); gc.style.backgroundColor='#'+GY; qs.style.backgroundColor='#'+fw; qt[gV(kD)]=GY; sc[gV(kD)]=fw; }OH.style.backgroundColor='#'+baseScheme.rA.Ww(colorsAndSettings.hueOffset+colorsAndSettings.backgroundHueOffset,colorsAndSettings.backgroundSaturationOffset,colorsAndSettings.backgroundLightnessOffset); xQ.style.color=Or.style.color; for(var kD in panelDatas){ var tc=panelDatas[kD]; tc.pM(); }}}if(xD){ var NX=baseScheme.jn.Ww(colorsAndSettings.hueOffset,colorsAndSettings.saturationOffset); var vi=baseScheme.OR.Ww(colorsAndSettings.hueOffset,colorsAndSettings.saturationOffset); ht=NX; Ot=vi; if(true){ iX="/web/dynamicImages/"+NX+"/collapse.gif"; eR="/web/dynamicImages/"+NX+"/expand.gif"; ll="/web/dynamicImages/"+NX+"/maximise.gif"; Kd="/web/dynamicImages/"+NX+"/dock.gif"; for(var kD=0;kD<document.images.length;kD++){ var ax=document.images[kD]; var IU; if(ax.src.indexOf('/web/dynamicImages/')!=-1){ if(ax.src.indexOf('undock-centered.gif')!=-1) continue; if(ax.src.indexOf('pixel.gif')!=-1) continue; if(ax.src.indexOf('/expand.gif')!=-1||ax.src.indexOf('/collapse.gif')!=-1||ax.src.indexOf('/maximise.gif')!=-1) IU=NX; else IU=vi; ax.src="/web/dynamicImages/"+IU+"/"+ax.src.substring(ax.src.lastIndexOf('/')+1); for(var kG in panelDatas){ var ix=document.getElementById(panelDatas[kG].id+'-vsbh'); if(ix!=null) ix.style.backgroundImage='url("/web/dynamicImages/'+vi+'/vertical-scroll-bar.gif")'; }}}}if(Xm==null){ Xm=NX; wt=vi; }}if(Da){ var FO=eM(); if(colorsAndSettings.backgroundMode=='PATTERN'){ FO.style.backgroundImage='url("/web/pattern/'+Math.round(colorsAndSettings.backgroundHueOffset)+'/'+(Math.round(colorsAndSettings.backgroundSaturationOffset-100))+'/'+Math.round(colorsAndSettings.backgroundLightnessOffset)+'/'+colorsAndSettings.backgroundPattern+'.gif")'; }if(colorsAndSettings.backgroundMode=='PLAIN_COLOR'){ FO.style.backgroundImage=''; }if(colorsAndSettings.backgroundMode=='WALLPAPER_IMAGE'){ if(colorsAndSettings.wallpaperMode=='CENTER'){ FO.style.backgroundPosition='center'; FO.style.backgroundRepeat='no-repeat'; FO.style.backgroundAttachment='fixed'; }if(colorsAndSettings.wallpaperMode=='TILE'){ FO.style.backgroundPosition='0% 0%'; FO.style.backgroundRepeat='repeat'; FO.style.backgroundAttachment='scroll'; }FO.style.backgroundImage='url("'+colorsAndSettings.wallpaperImageUrl+'")'; }}}function Ro(){ var GF=document.getElementById('scheme-config'); if(GF.style.display=='none'){ Nu.open(); GF.style.left='-1000px'; GF.style.top='-1000px'; GF.style.display='block'; vQ(); }else{ GF.style.display='none'; }}function vQ(){ var GF=document.getElementById('scheme-config'); GF.style.top=(Bk()-GF.offsetHeight)-(Bk()-LY())-6+'px'; GF.style.left='10px'; }function cC(baseSchemeId){ for(var kD=0;kD<baseSchemes.length;kD++) if(parseInt(baseSchemes[kD].id)==parseInt(baseSchemeId)) return baseSchemes[kD]; if(iL) alert('Error code 649 - Please report this as a bug to Protopage using the feedback form. Could not find base scheme for id '+baseSchemeId); }function MC(){ var gi=document.getElementById("base-scheme"); var baseSchemeId=gi.options[gi.selectedIndex].value; var Yt=cC(baseSchemeId); colorsAndSettings.baseScheme=Yt.id; colorsAndSettings.hueOffset=0; colorsAndSettings.saturationOffset=0; HX(true,true,false); }function Dn(){ var iu=new Array(); for(var kD in colorsAndSettings){ iu.push(new cQ(kD,colorsAndSettings[kD])); }var gN=new JX(accountId,protopageId,protopagePath,'save-colors-and-settings',iu); commandProcessor.pl(gN); }function NM(me,vJ,wN){ this.me=me; this.vJ=vJ; this.wN=wN; }function Tf(DM){ var var_xS=parseInt(DM.substring(0,2),16)/255; var Ix=parseInt(DM.substring(2,4),16)/255; var var_uq=parseInt(DM.substring(4,6),16)/255; if(var_xS>0.04045) var_xS=Math.pow(((var_xS+0.055)/1.055),2.4); else                   var_xS=var_xS/12.92; if(Ix>0.04045) Ix=Math.pow(((Ix+0.055)/1.055),2.4); else                   Ix=Ix/12.92; if(var_uq>0.04045) var_uq=Math.pow(((var_uq+0.055)/1.055),2.4); else                   var_uq=var_uq/12.92; var_xS=var_xS*100; Ix=Ix*100; var_uq=var_uq*100; var Vw=var_xS*0.4124+Ix*0.3576+var_uq*0.1805; var Jl=var_xS*0.2126+Ix*0.7152+var_uq*0.0722; var LL=var_xS*0.0193+Ix*0.1192+var_uq*0.9505; var wT=(4*Vw)/(Vw+(15*Jl)+(3*LL)); var RD=(9*Jl)/(Vw+(15*Jl)+(3*LL)); var var_Jl=Jl/100; if(var_Jl>0.008856) var_Jl=Math.pow(var_Jl,(1/3)); else                    var_Jl=(7.787*var_Jl)+(16/116); var JT=(4*vK)/(vK+(15*sW)+(3*ref_LL)); var EO=(9*sW)/(vK+(15*sW)+(3*ref_LL)); var Ap=(116*var_Jl)-16; Yv=13*Ap*(wT-JT); iV=13*Ap*(RD-EO); return new NM(Ap,Yv,iV); }NM.prototype.Ww=function(){ var Ap=this.me; var Yv=this.vJ; var iV=this.wN; var var_Jl=(Ap+16)/116; if(Math.pow(var_Jl,3)>0.008856) var_Jl=Math.pow(var_Jl,3); else                      var_Jl=(var_Jl-16/116)/7.787; var JT=(4*vK)/(vK+(15*sW)+(3*ref_LL)); var EO=(9*sW)/(vK+(15*sW)+(3*ref_LL)); var wT=Yv/(13*Ap)+JT; var RD=iV/(13*Ap)+EO; var Jl=var_Jl*100; var Vw=-(9*Jl*wT)/((wT-4)*RD-wT*RD); var LL=(9*Jl-(15*RD*Jl)-(RD*Vw))/(3*RD); JG=Vw/100; var_Jl=Jl/100; var_LL=LL/100; var var_xS=JG*3.2406+var_Jl*-1.5372+var_LL*-0.4986; var Ix=JG*-0.9689+var_Jl*1.8758+var_LL*0.0415; var var_uq=JG*0.0557+var_Jl*-0.2040+var_LL*1.0570; if(var_xS>0.0031308) var_xS=1.055*Math.pow(var_xS,(1/2.4))-0.055; else                     var_xS=12.92*var_xS; if(Ix>0.0031308) Ix=1.055*Math.pow(Ix,(1/2.4))-0.055; else                     Ix=12.92*Ix; if(var_uq>0.0031308) var_uq=1.055*Math.pow(var_uq,(1/2.4))-0.055; else                     var_uq=12.92*var_uq; var xS=var_xS*255; var bP=Ix*255; var uq=var_uq*255; if(xS>255) xS=255; if(bP>255) bP=255; if(uq>255) uq=255; if(xS<0) xS=0; if(bP<0) bP=0; if(uq<0) uq=0; xS=Math.round(xS); bP=Math.round(bP); uq=Math.round(uq); var kf=HF(xS.toString(16))+HF(bP.toString(16))+HF(uq.toString(16)); return kf; }; function Ja(Tp,qD){ if(Tp==qD) return Tp; var Jh=Tf(Tp); var FE=Tf(qD); Jh.me=FE.me; return Jh.Ww(); }var CallbackNotify=new Object(); CallbackNotify.KK=0; CallbackNotify.Bf=new Array(); CallbackNotify.Is=function(PU){ CallbackNotify.KK++; CallbackNotify.Bf[CallbackNotify.KK]=PU; return CallbackNotify.KK; }; CallbackNotify.callbackNotify=function(wV,NJ){ CallbackNotify.Bf[wV](NJ); }; CallbackNotify.Jw=function(wV){ return 'callbackFrame'+wV; }; CallbackNotify.MG=function(wV){ return '<iframe name="'+CallbackNotify.Jw(wV)+'" src="" style="position:absolute; left:-1000px; top:-1000px; width:1px; height:1px; border:0px; visibility:hidden;"></iframe>'; }; CallbackNotify.JL=function(wV){ return '<input type="hidden" name="callbackId" value="'+wV+'">'; }; function mG(jN,UG){ SU(jN); var If=jN.offsetWidth; if(jN.offsetWidth==0) If=parseInt(jN.style.width); var NQ=document.createElement('div'); NQ.style.position='absolute'; eM().appendChild(NQ); FP(NQ,UG,1,1); var vM=NQ.offsetWidth; eM().removeChild(NQ); var mV=Math.floor(If/vM); var TW=jN; FP(TW,UG,mV,vM); }function FP(YW,UG,mV,FK){ var table=document.createElement('table'); table.border=0; table.cellPadding=0; table.cellSpacing=0; var KR=document.createElement('tbody'); table.appendChild(KR); var fr=document.createElement('tr'); KR.appendChild(fr); var lR=Math.ceil(UG.length/mV); var nh=UG.length%mV; var NL=0; var ro=null; for(var kD=0;kD<UG.length;kD++){ var Af=UG[kD]; if(NL==0){ ro=document.createElement('td'); ro.vAlign='top'; fr.appendChild(ro); }ro.appendChild(Af); NL++; if((NL==lR)||kD==(UG.length-1)){ NL=0; var CC=document.createElement('div'); var FG=aT(); FG.src='/web/images/spacer.gif'; FG.border=0; FG.width=FK; FG.height=1; CC.appendChild(FG); ro.appendChild(CC); if(nh>0){ nh--; if(nh==0) lR--; }}}YW.appendChild(table); }var FT,Hr,cE,Na,Mp; var bK,jD; var gK,rw; function lu(event,rl,lI,jF,fC,Ym){ FT=rl; Hr=lI; cE=jF; Na=fC; Mp=Ym; if(isIE){ bK=window.event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft; jD=window.event.clientY+document.documentElement.scrollTop+document.body.scrollTop; }else{ bK=event.clientX+window.scrollX; jD=event.clientY+window.scrollY; }if(isIE){ document.attachEvent(kK,ls); document.attachEvent(Pc,Ti); window.event.cancelBubble=true; window.event.returnValue=false; }else{ document.addEventListener(Px,ls,true); document.addEventListener(jL,Ti,true); event.preventDefault(); }cE(FT,Hr,bK,jD); }function ls(event){ var x,y,PT,rq; if(isIE){ x=window.event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft; y=window.event.clientY+document.documentElement.scrollTop+document.body.scrollTop; }else{ x=event.clientX+window.scrollX; y=event.clientY+window.scrollY; }PT=x-bK; rq=y-jD; gK=PT; rw=rq; Na(FT,Hr,PT,rq,bK,jD); if(isIE){ window.event.cancelBubble=true; window.event.returnValue=false; }else{ event.preventDefault(); }}function Ti(event){ if(isIE){ document.detachEvent(kK,ls); document.detachEvent(Pc,Ti); }else{ document.removeEventListener(Px,ls,true); document.removeEventListener(jL,Ti,true); }Mp(FT,Hr,gK,rw,bK,jD); }var Po=new Array(); function hX(){ }hX.prototype.lS=function(){ this.or++; if(this.Zr) return; for(var kD in this.images){ if(!this.images[kD].complete){ return; }}this.Zr=true; clearInterval(this.Bd); this.PU(); }; hX.prototype.QX=function(images,PU){ this.or=0; this.Zr=false; this.images=images; this.PU=PU; var cX=this; for(var kD in images){ images[kD].onload=function(){ cX.lS(); }; }this.lS(); var id=uid(); Po[id]=this; this.Bd=setInterval(function(){ Po[id].lS(); },500); }; function VF(gj){ var SG=''; for(var kD in gj){ SG+=iP(kD,gj[kD]); }return SG; }function iP(name,PY){ if(PY==null) return ''; if(!(PY instanceof Array)){ return '<a n="'+escape(name)+'" v="'+escape(PY)+'"/>\n'; }else{ var SG=''; SG+='<a n="'+escape(name)+'">\n'; for(var kD in PY){ SG+=iP(kD,PY[kD]); }SG+='</a>\n'; return SG; }}function vw(xr){ if(xr==null||xr==''||xr=='null') return new Array(); var xZ=new RegExp('<a n="([^"]*)" v="([^"]*)"/>|<a n="([^"]*)">|(</a>)'); var kb=new Array(); var RJ=new Array(); var Uk=new Array(); var tags=xr.split('\n'); for(var kD in tags){ var Ok=tags[kD]; var KV=xZ.exec(Ok); if(KV==null) continue; var FD=false; var name=unescape(KV[1]); var value=unescape(KV[2]); if(KV[3]){ FD=true; name=unescape(KV[3]); }var UD=KV[4]; if(!UD){ if(!FD){ Uk[''+name]=value; }else{ kb.push(Uk); RJ.push(name); Uk=new Array(); }}else{ var fN=kb.pop(); var al=RJ.pop(); fN[al]=Uk; Uk=fN; }}return Uk; }var bL={ org:'http://www.JSON.org',copyright:'(c)2005 JSON.org',license:'http://www.crockford.com/JSON/license.html',stringify:function(LM){ var KJ,kD,Pr,eS='',wN; switch(typeof LM){ case 'object': if(LM){ if(LM instanceof Array){ for(kD=0;kD<LM.length;++kD){ wN=this.stringify(LM[kD]); if(eS){ eS+=','; }eS+=wN; }return '['+eS+']'; }else if(typeof LM.toString!='undefined'){ for(kD in LM){ wN=LM[kD]; if(typeof wN!='undefined'&&typeof wN!='function'){ wN=this.stringify(wN); if(eS){ eS+=','; }eS+=this.stringify(kD)+':'+wN; }}return '{'+eS+'}'; }}return 'null'; case 'number': return isFinite(LM)?String(LM):'null'; case 'string': Pr=LM.length; eS='"'; for(kD=0;kD<Pr;kD+=1){ KJ=LM.charAt(kD); if(KJ>=' '){ if(KJ=='\\'||KJ=='"'){ eS+='\\'; }eS+=KJ; }else{ switch(KJ){ case '\b': eS+='\\b'; break; case '\f': eS+='\\f'; break; case '\n': eS+='\\n'; break; case '\r': eS+='\\r'; break; case '\t': eS+='\\t'; break; default: KJ=KJ.charCodeAt(); eS+='\\u00'+Math.floor(KJ/16).toString(16)+(KJ%16).toString(16); }}}return eS+'"'; case 'boolean': return String(LM); default: return 'null'; }},parse:function(text){ var dp=0; var ch=' '; function error(KV){ throw{ name:'JSONError',message:KV,dp:dp-1,text:text
}; }function Nm(){ ch=text.charAt(dp); dp+=1; return ch; }function Io(){ while(ch!==''&&ch<=' '){ Nm(); }}function MX(){ var kD,eS='',TS,vJ; if(ch=='"'){ outer:while(Nm()){ if(ch=='"'){ Nm(); return eS; }else if(ch=='\\'){ switch(Nm()){ case 'b': eS+='\b'; break; case 'f': eS+='\f'; break; case 'n': eS+='\n'; break; case 'r': eS+='\r'; break; case 't': eS+='\t'; break; case 'u': vJ=0; for(kD=0;kD<4;kD+=1){ TS=parseInt(Nm(),16); if(!isFinite(TS)){ break outer; }vJ=vJ*16+TS; }eS+=String.fromCharCode(vJ); break; default: eS+=ch; }}else{ eS+=ch; }}}error("Bad string"); }function pP(){ var Su=[]; if(ch=='['){ Nm(); Io(); if(ch==']'){ Nm(); return Su; }while(ch){ Su.push(PY()); Io(); if(ch==']'){ Nm(); return Su; }else if(ch!=','){ break; }Nm(); Io(); }}error("Bad array"); }function Hh(){ var TM,TB={}; if(ch=='{'){ Nm(); Io(); if(ch=='}'){ Nm(); return TB; }while(ch){ TM=MX(); Io(); if(ch!=':'){ break; }Nm(); TB[TM]=PY(); Io(); if(ch=='}'){ Nm(); return TB; }else if(ch!=','){ break; }Nm(); Io(); }}error("Bad object"); }function XN(){ var tm='',wN; if(ch=='-'){ tm='-'; Nm(); }while(ch>='0'&&ch<='9'){ tm+=ch; Nm(); }if(ch=='.'){ tm+='.'; while(Nm()&&ch>='0'&&ch<='9'){ tm+=ch; }}if(ch=='e'||ch=='E'){ tm+='e'; Nm(); if(ch=='-'||ch=='+'){ tm+=ch; Nm(); }while(ch>='0'&&ch<='9'){ tm+=ch; Nm(); }}wN=+tm; if(!isFinite(wN)){ error("Bad number"); }else{ return wN; }}function YT(){ switch(ch){ case 't': if(Nm()=='r'&&Nm()=='u'&&Nm()=='e'){ Nm(); return true; }break; case 'f': if(Nm()=='a'&&Nm()=='l'&&Nm()=='s'&&Nm()=='e'){ Nm(); return false; }break; case 'n': if(Nm()=='u'&&Nm()=='l'&&Nm()=='l'){ Nm(); return null; }break; }error("Syntax error"); }function PY(){ Io(); switch(ch){ case '{': return Hh(); case '[': return pP(); case '"': return MX(); case '-': return XN(); default: return ch>='0'&&ch<='9'?XN():YT(); }}return PY(); }}; var sI=['Sun','Mon','Tue','Wed','Thu','Fri','Sat']; var Ff=['January','February','March','April','May','June','July','August','September','October','November','December']; function xv(EU){ var y=EU.getYear(); if(y>2000) return y; if(y>100) return 1900+y; return 2000+y; }function oU(EU){ var Cx='am'; var qQ=EU.getHours(); if(qQ>=12){ Cx='pm'; qQ-=12; }if(qQ==0) qQ=12; var ER=EU.getMinutes(); if(ER<10) ER="0"+ER; return qQ+':'+ER+' '+Cx; }function oE(value,label,VJ){ var kM=document.createElement('OPTION'); kM.value=value; if(isIE){ kM.text=label; VJ.add(kM); }else{ kM.innerHTML=Xw(label); VJ.appendChild(kM); }}function lK(MX){ var KJ=MX; KJ=ok(KJ,'&','&amp;'); KJ=ok(KJ,'<','&lt;'); KJ=ok(KJ,'>','&gt;'); KJ=ok(KJ,'\"','&quot;'); KJ=ok(KJ,'\'','&apos;'); return KJ; }function Xw(MX){ var KJ=MX; KJ=ok(KJ,'<','&lt;'); KJ=ok(KJ,'>','&gt;'); return KJ; }function Gj(rl,Ev,Dh){ if(fW){ rl.style.backgroundImage='url('+Ev+')'; }if(isIE){ rl.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+Ev+"', sizingMethod='crop')"; }rl.style.backgroundRepeat=Dh?'repeat':'no-repeat'; }function ok(eS,Su,FO){ if(!eS) return ''; for(var kD=0;kD<eS.length;kD++){ if(eS.charAt(kD)==Su) eS=eS.substring(0,kD)+FO+eS.substring(kD+1,eS.length); }return eS; }function At(name,value,Mo) { var kQ=new Date(); kQ.setTime(kQ.getTime()+(1000000000*1000)); var expires="; expires="+kQ.toGMTString(); document.cookie=name+"="+value+"; domain=.protopage.com; expires="+kQ.toGMTString()+"; path="+Mo; }function LG(name) { var iq=name+"="; var PO=document.cookie.split(';'); var PY=null; for(var kD=0;kD<PO.length;kD++) { var KJ=PO[kD]; while(KJ.charAt(0)==' ') KJ=KJ.substring(1,KJ.length); if(KJ.indexOf(iq)==0) PY=KJ.substring(iq.length,KJ.length); }return PY; }function SC(name,Mo){ var cookie_kQ=new Date(); cookie_kQ.setTime(cookie_kQ.getTime()-1000); document.cookie=name+"=null; domain=.protopage.com; expires="+cookie_kQ.toGMTString()+"; path="+Mo; }function Uq(){ var oK=new Array(); var je=0; var SI=0; var PO=document.cookie.split(';'); for(var kD=0;kD<PO.length;kD++) { var KJ=PO[kD]; while(KJ.charAt(0)==' ') KJ=KJ.substring(1,KJ.length); if(KJ.indexOf('untitled-')==0){ var mO=KJ.substring(0,KJ.indexOf('=')); je++; if(je>SI){ oK.push(mO); }}}for(var kD in oK) SC(oK[kD],'/'); }function Ut(){ var cM='cookies-enabled-test'; At(cM,'test','/'); if(LG(cM)==null){ return false; }else{ SC(cM,'/'); return true; }}function checkCookiesEnabled(){ if(!Ut()){ alert('You need to enable \'cookies\' in your web browser preferences before you can proceed'); return false; }return true; }function vB(){ var na=navigator.userAgent; if(na.indexOf('Mac')!=-1){ if(na.indexOf('MSIE')!=-1) return 'Please use the Firefox web browser on the Mac (download it from www.getfirefox.com).'; if(na.indexOf('Safari')!=-1) return 'Unfortunately, Protopage.com uses browser technologies that Safari does not yet support. We hope to bring back Safari support soon. Until then, we highly recommend you use the Firefox web browser (download it from www.getfirefox.com).'; }else if(na.indexOf('Win')!=-1){ if(na.indexOf('MSIE')!=-1){ var Su=na.indexOf('MSIE'); var FO=na.substring(Su).indexOf(' '); var KJ=na.substring(Su).indexOf(';'); var version=na.substring(Su).substring(FO+1,KJ); if(parseFloat(version)<5.5) return 'Please upgrade your version of Internet Explorer to version 5.5 or above, or use Firefox (www.getfirefox.com)'; }}return null; }function Sp(Iw){ window.open(Iw,'',''); return false; }function RV(Iw,UP){ var VH=0; var nb=0; var cl=0; var jp=0; if(UP!=null){ if(isIE){ cl=event.shiftKey; nb=event.altKey; VH=event.ctrlKey; }else{ cl=UP.shiftKey; VH=UP.ctrlKey; nb=UP.altKey; jp=UP.metaKey; }}if(VH||jp||cl){ return false; }else{ if(colorsAndSettings.openLinksInNewWindow){ window.open(Iw,'',''); return false; }else{ if(commandProcessor.SK.length>0){ if(!(commandProcessor.SK.length==1&&commandProcessor.SK[0].name=='save-panel-geometry')){ alert('We are still saving your changes to the Protopage server - you cannot navigate away from this page until your changes have been saved. (You can use shift-click to open links in a new window until then...)'); return false; }}return true; }}}var rJ=new Array(); function Xh(cp){ if(cp.name) return cp.name; if(!rJ[cp]){ var code=cp.toString(); var Su=code.indexOf(' '); var FO=code.indexOf('('); var name=code.substring(Su+1,FO); rJ[cp]=name; }return rJ[cp]; }function Ck(cp){return Xh(cp);}function eG(cp){return Xh(cp)+'();';}function Yu(){ if(isIE){ return document.documentElement.scrollTop+document.body.scrollTop; }else{ return window.scrollY; }}function mt(){ if(isIE){ return document.documentElement.scrollLeft+document.body.scrollLeft; }else{ return window.scrollX; }}function FX(){ if(isIE){ return document.documentElement.scrollLeft+document.body.scrollLeft+document.body.clientWidth; }else{ return window.scrollX+document.width; }}function Bk(){ if(isIE){ return document.documentElement.scrollTop+document.body.scrollTop+document.body.clientHeight; }else{ var FU=window.scrollY+eM().clientHeight; var Km=(document.documentElement.scrollWidth>window.innerWidth); if(Km) FU-=19; return FU; }}function rY(eS){ try{ return parseInt(eS); }catch(UP){ return 0; }}function HR(IJ,UP){ var KM; if(UP&&UP.which){ UP=UP; KM=UP.which; }else{ UP=event; KM=UP.keyCode; }if(KM==13){ document.getElementById('login').style.display='none'; document.getElementById(IJ).submit(); return false; }else{ return true; }}function oa(eS){ return eS.replace(/^\s+/,'').replace(/\s+$/,''); }var BK=new Date().getTime(); function uid(){ BK+=1; return(Math.round(Math.random()*10000000))+'-'+BK; }function eM(){ return document.getElementById('body'); }function SU(rl){ if(!rl) return; while(rl.childNodes.length>0) rl.removeChild(rl.childNodes[0]); }function pb(x,y){ this.x=x; this.y=y; this.mH=function(FE){ return new pb(this.x-FE.x,this.y-FE.y); }; }function wg(Su){ var FO=new Array(); for(var kD in Su) FO[kD]=Su[kD][0]; return FO; }function aT(){ if(Am!=undefined&&Am) return document.createElement('img'); else return new Image(); }function stopPropagation(event){ if(isIE){ window.event.cancelBubble=true; window.event.returnValue=false; }else{ event.cancelBubble=true; event.preventDefault(); event.stopPropagation(); }}function bU(Hh){ return eval('('+bL.stringify(Hh)+')'); }function Ul(rl,Co){ rl.onmousemove=function(event){Co(new Zc(rl,event));}; }function Lo(rl,Co){ rl.onmousedown=function(event){Co(new Zc(rl,event));}; }function LD(rl,Co){ rl.onmouseover=function(event){Co(new Zc(rl,event));}; }function Qe(rl,Co){ rl.onmouseup=function(event){Co(new Zc(rl,event));}; }function wQ(rl,Co){ rl.onmouseout=function(event){Co(new Zc(rl,event));}; }function qe(rl,Co){ rl.onclick=function(event){Co(new Zc(rl,event));}; }function fp(rl,Co){ rl.ondblclick=function(event){Co(new Zc(rl,event));}; }function Xq(rl,Co){ if(isIE){ rl.onmouseleave=function(event){ Co(new Zc(rl,event)); }; }else{ rl.onmouseout=function(event){ var Av,Qi; Av=event.currentTarget; Qi=event.relatedTarget; if(Av==rl&&Av!=Qi&&!Up(Av,Qi)){ Co(new Zc(rl,event)); }}; }}function Rm(elements,Co){ if(isIE){ for(var kD in elements){ var rl=elements[kD]; rl.onmouseleave=sa(rl,elements,Co); }}else{ for(var kD in elements){ var rl=elements[kD]; rl.onmouseout=Kc(rl,elements,Co); }}}function Kc(rl,elements,Co){ return function(event){ var Av,Qi; Av=event.currentTarget; Qi=event.relatedTarget; if(Av==rl&&Av!=Qi&&!Up(Av,Qi)){ for(var kG in elements) if(Qi==elements[kG]) return; Co(new Zc(rl,event)); }}; }function sa(rl,elements,Co){ return function(){ for(var kG in elements) if(window.event.toElement==elements[kG]) return; Co(new Zc(rl,window.event)); }; }function Up(Hc,LZ){ try{ if(!LZ) return false; while(LZ.parentNode) if((LZ=LZ.parentNode)==Hc) return true; return false; }catch(UP){ return false; }}function Zc(rl,event){ this.rl=rl; this.event=event; this.qO=null; this.Rt=null; this.kC=function(){ if(this.qO==null){ var KJ=WD(rl,event); this.qO=KJ.x; this.Rt=KJ.y; }return this.qO; }; this.sZ=function(){ if(this.qO==null){ this.kC(); }return this.Rt; }; }function ai(rl,xf,mU,Co){ var cp=function(event){ var Ek=new Zc(rl,event); Co(Ek); }; if(isIE){ rl.attachEvent(mU,cp); }else{ rl.addEventListener(xf,cp,true); }}function JP(rl,lI,Tm,bg,qg){ Lo(rl,function(Ek){ lu(Ek.event,rl,lI,Tm,bg,qg); }); }function WD(rl,event){ if(isIE||Am){ return new pb(window.event.offsetX,window.event.offsetY); }return RR(event).mH(SB(rl)); }function RR(event){ if(isIE){ var x=window.event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft; var y=window.event.clientY+document.documentElement.scrollTop+document.body.scrollTop; }else{ var x=event.clientX+window.scrollX; var y=event.clientY+window.scrollY; }return new pb(x,y); }function SB(rl){ var UP=rl; var x=0; var y=0; while(true){ var GF=UP.offsetParent; if(GF==undefined) break; x+=UP.offsetLeft; y+=UP.offsetTop; UP=GF; }return new pb(x,y); }function PP(pX,rP,ra){ if(!ra) if(!he()) return; try{ if(rP==100){ pX.style.filter=''; pX.style.mozOpacity=''; pX.style.opacity=''; }else{ pX.style.filter='alpha(opacity='+rP+')'; pX.style.mozOpacity=rP/100; pX.style.opacity=rP/100; }}catch(UP){ }}function Fs(){ if(isIE) return document.documentElement.scrollTop+document.body.scrollTop; else return window.scrollY; }function Rc(){ if(isIE) return document.documentElement.scrollLeft+document.body.scrollLeft; else return window.scrollX; }function ox(url,XW,PU){ var Er=bL.stringify(XW); bQ(url,Er,function(fZ){ if(PU) PU(eval('('+fZ+')')); }); }function bQ(url,oQ,PU){ var rg=CJ(); rg.open(oQ==null?"GET":"POST",url,true); rg.setRequestHeader("Content-Type","text/xml"); rg.onreadystatechange=function(){ var Uh=false; Uh=(rg.readyState==4); if(Uh){ var fZ=rg.responseText; PU(fZ); }}; rg.send(oQ); }function CJ(){ var rg=false; try{ rg=new ActiveXObject("Msxml2.XMLHTTP"); }catch(UP){ try{ rg=new ActiveXObject("Microsoft.XMLHTTP"); }catch(Vm){ rg=false; }}if(!rg&&typeof XMLHttpRequest!=undefined){ rg=new XMLHttpRequest(); }return rg; }function hC(YI,fT,WI){ this.YI=YI; this.fT=fT; this.WI=WI; this.Ug=function(Sj,eh){ return new Tl(this,Sj,eh,YI,fT,WI); }; }function BW(YI,defaultValue){ this.YI=YI; this.defaultValue=defaultValue; this.Ug=function(){ return new Ah(this,YI,defaultValue); }; }function dK(xP){ this.xP=xP; this.Ug=function(Sj,eh){ return new GU(this,Sj,eh,xP); }; }function YA(YI,defaultValue){ this.YI=YI; this.defaultValue=defaultValue; this.Ug=function(){ return new tb(this,YI,defaultValue); }; }function mW(WW,Su,FO,KJ,EU,UP,cp,EV,FU,kD,kG,TM,Pr,KV,tm,TB,GF,PN,CP,eS,TS,vJ,wN,da,x,y,sk){ this.WW=WW; this.Ug=function(Sj,eh){ return new this.WW(this,Sj,eh,Su,FO,KJ,EU,UP,cp,EV,FU,kD,kG,TM,Pr,KV,tm,TB,GF,PN,CP,eS,TS,vJ,wN,da,x,y,sk); }; }function pg(YI,label,description,defaultValue,eC){ this.YI=YI; this.label=label; this.description=description; this.defaultValue=defaultValue; this.eC=eC; this.Ug=function(){ return new Jf(this,YI,label,description,defaultValue,eC); }; }function cg(YI,label,description,defaultValue,eC,Wi){ this.YI=YI; this.label=label; this.description=description; this.defaultValue=defaultValue; this.eC=eC; this.Wi=Wi; this.Ug=function(){ return new bt(this,YI,label,description,defaultValue,eC,Wi); }; }function Nj(YI,label,description,defaultValue,eC,Wi){ this.YI=YI; this.label=label; this.description=description; this.defaultValue=defaultValue; this.eC=eC; this.Wi=Wi; this.Ug=function(){ return new vc(this,YI,label,description,defaultValue,eC,Wi); }; }function xp(YI,label,description,defaultValue){ this.YI=YI; this.label=label; this.description=description; this.defaultValue=defaultValue; this.Ug=function(){ return new jm(this,YI,label,description,defaultValue); }; }function kd(label,description){ this.label=label; this.description=description; this.Ug=function(){ return new Fw(this,label,description); }; }function Bq(YI,label,description,eD){ this.YI=YI; this.eD=eD; this.label=label; this.description=description; this.Ug=function(){ return new Mn(this,YI,label,description,eD); }; }function SP(label,value,sV){ this.label=label; this.value=value; this.sV=sV; }function Ah(ff,YI,defaultValue){ this.ff=ff; this.Hb=null; this.nF=function(PU){ this.Hb=PU; }; this.wF=function(){ if(this.Hb!=null) this.Hb(); }; this.pW=function(gN,lj,ci){ var DP=this.mI.contentWindow; DP.focus(); try{ DP.document.execCommand(gN,false,lj); }catch(UP){}DP.focus(); }; this.KN=function(kZ){ if(isIE){ var cc=this.mI.contentWindow.document.selection.createRange(); var eS=cc.htmlText; var Ke=new RegExp('<font size=([^>]+)>'); var KV=Ke.exec(eS.toLowerCase()); var gA=null; if(KV==null){ gA=3; }else{ for(var kD=1;kD<KV.length;kD++){ if(gA==null) gA=parseInt(KV[kD]); if(gA<parseInt(KV[kD])) gA=parseInt(KV[kD]); }if(gA==7) gA--; }this.pW('FontSize',gA+kZ); }else if(Am){ this.pW('FontSizeDelta',kZ); }else{ if(kZ==1) this.pW('IncreaseFontSize',''); else this.pW('DecreaseFontSize',''); }}; this.fL=function(Kp){ if(isIE){ var CP=this.mI.contentWindow.document.selection.createRange(); CP.pasteHTML(Kp); CP.collapse(false); CP.select(); }else{ this.pW('insertHTML',Kp); }}; this.UO=function(){ var window=this.mI.contentWindow; var document=this.mI.contentWindow.document; if(window.getSelection){ window.getSelection().collapseToEnd(); }else if(document.selection){ document.selection.empty(); }}; this.Ds=false; this.MH=function(){ if(this.Ds) return; if(this.NZ()){ this.Lp('rich'); this.Ew.checked=true; this.EL.checked=false; }else{ this.Lp('html'); this.Ew.checked=false; this.EL.checked=true; }this.Cr(); }; this.NZ=function(){ var Fe=false; if(this.value.toLowerCase().indexOf('<iframe')!=-1) Fe=true; if(this.value.toLowerCase().indexOf('<object')!=-1) Fe=true; if(this.value.toLowerCase().indexOf('<embed')!=-1) Fe=true; if(this.Fm()&&!Fe){ return true; }else{ return false; }}; this.Cr=function(){ var cX=this; if(this.BX=='rich'){ if((this.mI==undefined)||(this.mI.contentWindow==undefined)||(this.mI.contentWindow.document.getElementById('body')==undefined)){ setTimeout(function(){ cX.Cr(); },100); return; }}this.Ds=true; this.Rf(this.value); if(this.BX=='rich'){ this.pW('insertHTML',' '); this.pW('Undo',''); }}; this.Gu=function(){ if(!this.Ds) return; clearInterval(this.heightCheckIntervalHandle); this.Ds=false; }; this.Fm=function(){ return true; }; this.GQ=new Array(); this.uv=function(){ for(var kD in this.GQ)  this.GQ[kD](); }; this.bG=function(au,EG,jN,Ev,x,y,rD,PU,aQ){ var button=aT(); button.style.left=x+'px'; button.style.top=y+'px'; button.style.position='absolute'; button.src=Ev; button.title=EG; var gY=document.createElement('div'); gY.style.visibility='visible'; gY.style.left=x+'px'; gY.style.top=y+'px'; gY.style.width=29+'px'; gY.style.height=27+'px'; gY.style.position='absolute'; Gj(gY,bk+'/web/images/richtext/button-shadow.png',false); jN.appendChild(gY); jN.appendChild(button); var SO=this; var vh=function(){ if(gY.style.visibility=='hidden') return; button.style.top=(parseInt(button.style.top)+1)+'px'; button.style.left=(parseInt(button.style.left)+1)+'px'; gY.style.visibility='hidden'; au(); return false; }; if(isIE){ qe(button,vh); fp(button,vh); }else if(Am&&aQ){ LD(button,vh); }else Lo(button,vh); var PX=function(){ if(gY.style.visibility=='visible') return; button.style.top=(parseInt(button.style.top)-1)+'px'; button.style.left=(parseInt(button.style.left)-1)+'px'; gY.style.visibility='visible'; return false; }; Qe(button,PX); wQ(button,PX); this.GQ.push(PX); }; this.wS=function(ka){ var window=this.mI.contentWindow; var document=this.mI.contentWindow.document; if(window.getSelection){ if(window.getSelection()==''){ alert(ka); return false; }}else if(document.selection){ if(document.selection.createRange().htmlText==''){ alert(ka); return false; }}return true; }; this.oo=function(da){ var frame=document.createElement('iframe'); frame.frameBorder='0px'; frame.style.border='1px solid #000000'; frame.style.width=da+'px'; frame.style.height=264+'px'; frame.scrolling='auto'; return frame; }; this.fX=function(frame){ var uG='<body id="body" style="padding:5px; margin:5px; font-family: Arial, Helvetica, sans-serif;	font-size: 12px;"></body>'; var wI=frame.contentWindow.document; wI.open(); wI.write(uG); wI.close(); wI.designMode="On"; if(Am) wI.body.contentEditable='true'; }; this.NY=function(window,frame,su){ if(this.BX!='rich') return; if(isIE){ var tB=su; while(true){ if(tB.className.indexOf('scheme-body')!=-1) break; tB=tB.parentNode; }var cX=this; if(frame.contentWindow.document.getElementById('body')==undefined){ setTimeout(function(){ cX.NY(window,frame,su); },100); return; }frame.contentWindow.document.getElementById('body').style.color=tB.currentStyle.color; frame.contentWindow.document.getElementById('body').style.backgroundColor=tB.currentStyle.backgroundColor; setTimeout(function(){ if(isIE){ colorsAndSettings.backgroundHueOffset+=1; HX(true,false,false,false); colorsAndSettings.backgroundHueOffset-=1; }},100); }else{ frame.contentWindow.document.getElementById('body').style.color=window.getComputedStyle(su,null).color; frame.contentWindow.document.getElementById('body').style.backgroundColor=window.getComputedStyle(su,null).backgroundColor; }}; this.JN=function(OL,kT){ var cX=this; this.EY(OL,kT,function(x,y){ var color=cX.nr(x,y); cX.pW('ForeColor',color,true); }); }; this.BE=function(OL,kT){ var cX=this; this.EY(OL,kT,function(x,y){ var color=cX.nr(x,y); if(isIE||Am) cX.pW('BackColor',color,true); else cX.pW('hilitecolor',color,true); }); }; this.EY=function(x,y,DW){ this.bS.style.visibility='visible'; if(Am){ this.bS.style.left=(x-20)+'px'; this.bS.style.top=(y-48)+'px'; this.uv(); }else{ this.bS.style.left=(x-202)+'px'; this.bS.style.top=y+'px'; }var cX=this; Lo(this.bS,function(Ek){ DW(Ek.kC(),Ek.sZ()); cX.bS.style.visibility='hidden'; }); }; this.nr=function(x,y){ if(this.pi(x,y,2,2,34,22)) return '#000000'; if(this.pi(x,y,2,24,34,45)) return '#ffffff'; var Jh=new Cg('B2B8FF'); var FE=new Cg('0015FF'); var mZ=new Cg('000D9C'); var Su=36; for(var kD=0;kD<=10;kD++){ if(this.pi(x,y,Su,2,Su+13,15)){ if(kD==10) return Jh.Ww(0,-100); else return Jh.Ww(kD*36,0); }if(this.pi(x,y,Su,17,Su+13,30)){ if(kD==10) return FE.Ww(0,-100); else return FE.Ww(kD*36,0); }if(this.pi(x,y,Su,32,Su+13,45)){ if(kD==10) return mZ.Ww(0,-100); else return mZ.Ww(kD*36,0); }Su+=15; }return null; }; this.pi=function(x,y,qu,AY,Kq,mM){ if(((x<=Kq)&&(x>=qu))&&((y<=mM)&&(y>=AY))) return true; return false; }; this.CW=function(pX){ var Fj=0; var y=0; var nw=31; var rM=40; var cX=this; if(!Am){ this.bG(function(){cX.KN(1);},'Make text larger',pX,bk+'/web/images/richtext/larger-font.gif',Fj,y,null,null); Fj+=nw; this.bG(function(){cX.KN(-1);},'Make text smaller',pX,bk+'/web/images/richtext/smaller-font.gif',Fj,y,null,null); }if(!Am) Fj+=rM; this.bG(function(){cX.pW('Bold','');},'Bold',pX,bk+'/web/images/richtext/bold.gif',Fj,y,null,null); this.bG(function(){cX.pW('Italic','');},'Italic',pX,bk+'/web/images/richtext/italic.gif',Fj+=nw,y,null,null); this.bG(function(){cX.pW('Underline','');},'Underline',pX,bk+'/web/images/richtext/underline.gif',Fj+=nw,y,null,null); if(!Am) this.bG(function(){cX.pW('Strikethrough','');},'Strikethrough',pX,bk+'/web/images/richtext/strikethrough.gif',Fj+=nw,y,null,null); if(!Am) this.bG(function(){cX.pW('InsertUnorderedList','');},'Create bulleted list',pX,bk+'/web/images/richtext/bullets.gif',Fj+=rM,y,null,null); if(!Am) this.bG(function(){cX.pW('InsertOrderedList','');},'Create numbered list',pX,bk+'/web/images/richtext/numbered-bullets.gif',Fj+=nw,y,null,null); if(!Am) this.bG(function(){cX.pW('Indent','');},'Indent text',pX,bk+'/web/images/richtext/indent.gif',Fj+=nw,y,null,null); if(!Am) this.bG(function(){cX.pW('Outdent','');},'Outdent text',pX,bk+'/web/images/richtext/outdent.gif',Fj+=nw,y,null,null); if(!Am) this.bG(function(){cX.UO();cX.pW('InsertHorizontalRule','');},'Insert horizontal text divider',pX,bk+'/web/images/richtext/horiz-rule.gif',Fj+=nw,y,null,null); Fj+=rM; var IC=Fj+22; this.bG(function(){cX.JN(IC,y+26);},'Change text color',pX,bk+'/web/images/richtext/font-color.gif',Fj,y,null,null,true); Fj+=nw; var mr=Fj+22; this.bG(function(){cX.BE(mr,y+26);},'Change text background color',pX,bk+'/web/images/richtext/font-bg-color.gif',Fj,y,null,null,true); if(!Am) this.bG(function(){ if(cX.wS('Before pressing this button, first select the text you would like to turn into a link')==false) return false; var url=prompt('Enter the url for your new link:','http://'); if(url!=null&&url!='') cX.pW('CreateLink',url); },'Create web link',pX,bk+'/web/images/richtext/link.gif',Fj+=rM,y,null,null); this.bG(function(){cX.pW('Undo','');},'Undo action',pX,bk+'/web/images/richtext/undo.gif',Fj+=rM,y,null,null); this.bG(function(){cX.pW('Redo','');},'Redo action',pX,bk+'/web/images/richtext/redo.gif',Fj+=nw,y,null,null); this.bG(function(){ cX.mI.contentWindow.focus(); cX.mI.contentWindow.print(); },'Print',pX,bk+'/web/images/richtext/print.gif',Fj+=rM,y,null,null); pX.style.height='31px'; pX.style.overflow='visible'; this.bS=document.createElement('div'); var ax=aT(); ax.src=''+bk+'/web/images/richtext/color-selection.png'; ax.style.cursor='pointer'; this.bS.appendChild(ax); this.bS.style.position='absolute'; this.bS.style.visibility='hidden'; this.bS.style.width='218px'; this.bS.style.height='48px'; this.bS.style.zIndex='10'; this.bS.style.cursor='pointer'; pX.appendChild(this.bS); }; this.dQ=function(pX){ pX.style.paddingTop='10px'; var kA=uid(); var YP=uid(); var QL=uid(); var Kp=''; Kp+='Edit as:&nbsp;&nbsp;<input type="radio" name="'+QL+'" value="'+kA+'" checked>&nbsp;&nbsp;Rich text&nbsp;&nbsp;'; Kp+='<input type="radio" name="'+QL+'" value="'+YP+'" >&nbsp;&nbsp;HTML'; pX.innerHTML=Kp; pX.style.textAlign='left'; var cX=this; var UL=pX.getElementsByTagName('input'); this.Ew=UL[0]; this.EL=UL[1]; this.Ew.style.width='3ex'; this.EL.style.width='3ex'; this.Ew.onclick=function(){return cX.NN(cX.Ew,cX.EL,cX.Ew);}; this.EL.onclick=function(){return cX.NN(cX.Ew,cX.EL,cX.EL);}; }; this.NN=function(Ew,EL,sB){ if(sB==Ew){ if(this.BX=='rich') return true; if(!this.Fm()){ alert('Your browser does not support this feature. \n\nThe following browsers support rich text editing: Firefox, Safari 2.0, Internet Explorer'); EL.selected='true'; Ew.selected='false'; return false; }this.Lp('rich'); }if(sB==EL){ this.Lp('html'); if(this.mI!=undefined){ if(this.mI.style.height!=undefined){ this.JY.style.height=parseInt(this.mI.style.height)+'px'; }}}this.wF(); return true; }; this.YI=YI; this.defaultValue=defaultValue; this.pX=document.createElement("div"); this.gE=document.createElement("div"); this.gE.style.zIndex=100; this.gE.style.position='relative'; this.kl=document.createElement("div"); this.kl.style.zIndex=1; this.eg=document.createElement("div"); this.eg.style.zIndex=1; this.pX.appendChild(this.kl); this.pX.appendChild(this.eg); this.CW(this.gE); this.dQ(this.eg); this.BX=''; this.mI=null; this.JY=null; this.bY=function(da){ var rl=document.createElement('textarea'); rl.style.width=580+'px'; rl.style.height='264px'; rl.style.padding=''; rl.style.margin=''; return rl; }; this.Ee=function(){ this.NY(window,this.mI,this.pX); }; this.Lp=function(pr){ if((pr=='rich')&&(!this.Fm())) pr='html'; if(this.BX==pr) return; this.BX=pr; var XV=''; if(pr=='rich'){ this.pX.insertBefore(this.gE,this.pX.firstChild); if(this.JY!=null){ XV=this.JY.value; this.kl.removeChild(this.JY); this.value=XV; }if(this.mI==null) this.mI=this.oo(this.width); this.kl.appendChild(this.mI); this.fX(this.mI); this.Rf(this.value); this.NY(window,this.mI,this.pX); }else if(pr=='html'){ try{ if(this.gE!=null) this.pX.removeChild(this.gE); }catch(UP){ }if(this.mI!=null){ XV=this.mI.contentWindow.document.getElementById('body').innerHTML; this.kl.removeChild(this.mI); }if(this.JY==null) this.JY=this.bY(this.width); this.kl.appendChild(this.JY); this.JY.value=XV; }else alert('mode '+pr+' unrecognised'); }; this.width=300; this.lx=function(da){ this.width=da; this.pX.style.width=da+'px'; if(this.JY!=null) this.JY.style.width=da+'px'; if(this.mI!=null) this.mI.style.width=da+'px'; }; this.TE=function(qL){ var height=Math.round(qL-100); if(height<0) height=0; if(this.JY!=null) this.JY.style.height=height+'px'; if(this.mI!=null) this.mI.style.height=height+'px'; this.wF(); }; this.Rf=function(XV){ this.value=XV; if(!this.Ds) return; if(this.BX=='rich'){ var uG=''; uG+='<head><style>'; uG+='ol, ul { padding-left: 0px; margin-left: 3ex; }'; uG+='big { font-size:116%; }'; uG+='small { font-size:86%; }'; uG+='p { padding-top:0px; padding-bottom:0px; margin-top:0px; margin-bottom:0px }'; uG+='blockquote { margin:0 0 0 3ex; }'; uG+='</style></head>'; uG+='<body id="body" class="rich-text" style="padding:5px; margin:5px; font-family: Arial, Helvetica, sans-serif;	font-size: 12px;">'; uG+=XV
uG+='</body>'; var wI=this.mI.contentWindow.document; wI.open(); wI.write(uG); wI.close(); try{ this.mI.contentWindow.focus(); }catch(UP){}this.Ee(); }if(this.BX=='html') this.JY.value=XV; }; this.gL=function(){ if(this.BX=='rich') return this.mI.contentWindow.document.getElementById('body').innerHTML; if(this.BX=='html') return this.JY.value; alert('editMode unrecognised'); }; }function Tl(ff,Sj,eh,YI,fT,WI){ this.ff=ff; this.Sj=Sj; this.eh=eh; this.Hb=null; this.nF=function(PU){ this.Hb=PU; }; this.wF=function(){ if(this.Hb!=null) this.Hb(); }; this.pt=6; this.IM=3; this.YI=YI; this.fT=fT; this.WI=WI; this.VR=24; this.JB=9; this.eC=0; for(var kD=0;kD<fT.length;kD++) this.eC+=fT[kD].eC; this.eC+=(this.VR+this.JB); this.pB=new Array(); this.rows=new Array(); this.pX=document.createElement("div"); this.gE=document.createElement("div"); this.gE.style.position='relative'; this.gE.style.left=this.VR+'px'; this.hE=null; this.Fb=null; this.Xa=function(rl,lI,SL,JZ){ var ia=lI; ia.pX.style.zIndex=10; this.hE=parseInt(ia.pX.offsetTop); this.Fb=null; }; this.ne=function(rl,lI,PT,rq,SL,JZ){ var ia=lI; var cG=this.hE+rq; var pn=null; var qR=0; for(var kD=0;kD<this.rows.length;kD++){ var KJ=this.rows[kD]; if(KJ==ia) continue; var y=parseInt(KJ.pX.offsetTop); y-=50; if(pn==null) pn=y; if(pn>y) pn=y; }for(var kD=0;kD<this.rows.length;kD++){ var KJ=this.rows[kD]; if(KJ==ia) continue; var y=KJ.pX.offsetTop+KJ.pX.offsetHeight; y+=50; if(qR<y) qR=y; }if(cG<pn){ cG=pn; }if(cG>qR){ cG=qR; }ia.pX.style.top=cG+'px'; if(this.Fb==null) this.Fb=this.hE; var um=false; for(var kD=0;kD<this.rows.length;kD++){ var KJ=this.rows[kD]; if(KJ==ia) continue; Uj=parseInt(KJ.pX.offsetTop); if((Uj>=cG)&&(Uj<this.Fb)){ KJ.rV++; KJ.QT(); ia.rV--; um=true; }else if((Uj<=cG)&&(Uj>this.Fb)){ KJ.rV--; KJ.QT(); ia.rV++; um=true; }}if(um) this.Fb=cG; }; this.iZ=function(rl,lI,PT,rq,SL,JZ){ var ia=lI; ia.pX.style.zIndex=0; var cG=this.hE+rq; var ql=null; var sC=null; var TO=null; var PF=null; for(var kD=0;kD<this.rows.length;kD++){ var KJ=this.rows[kD]; if(KJ==ia) continue; Uj=parseInt(KJ.pX.offsetTop); if(cG>Uj){ if(TO==null){ TO=Uj; ql=KJ; }if(Uj>TO){ TO=Uj; ql=KJ; }}if(cG<Uj){ if(PF==null){ PF=Uj; sC=KJ; }if(Uj<PF){ PF=Uj; sC=KJ; }}}if(ql!=null) ia.rV=ql.rV+1; else if(sC!=null) ia.rV=sC.rV-1; this.rows.sort(Tw); this.KA(); }; this.Rf=function(jh){ var no=jh.length+this.IM; if(no<this.pt) no=this.pt; this.rows=new Array(); while(this.kl.childNodes.length>0) this.kl.removeChild(this.kl.childNodes[0]); for(var kD=0;kD<no;kD++){ var tD; if(kD<jh.length) tD=jh[kD]; else{ tD=new Array(); for(var kG=0;kG<this.fT.length;kG++) tD[kG]=''; }this.DS(tD); }}; this.DS=function(tD){ var cX=this; for(var kD=0;kD<this.rows.length;kD++){ var KJ=this.rows[kD]; }var rV=this.rows.length+1; var ia=new Tn(this.pB,tD,rV,this.VR,this.JB,this); for(var kD in ia.Ws){ ia.Ws[kD].Bu(function(){ cX.Pe(); }); }this.rows.push(ia); this.kl.appendChild(ia.pX); }; this.KU=function(tD){ for(var kD in this.rows){ if(this.rows[kD].Zg()){ var ia=this.rows[kD]; for(var kG in ia.Ws) ia.Ws[kG].Rf(tD[kG]); return; }}this.DS(tD); }; this.Pe=function(){ var CG=0; var Gn=0; for(var kD in this.rows){ if(this.rows[kD].Zg()) Gn++; }if(Gn<this.IM) CG=this.IM-Gn; if((this.rows.length+CG)<this.pt) CG=this.pt-(this.rows.length+CG); for(var kD=0;kD<CG;kD++) this.DS(null); if(CG!=0){ this.lx(this.width); this.wF(); }}; for(var kD=0;kD<fT.length;kD++){ var cA=fT[kD]; var US=new QA(cA); this.pB[kD]=US; this.gE.appendChild(US.pX); }this.kl=document.createElement("div"); this.kl.style.whiteSpace='nowrap'; this.kl.style.position='relative'; this.Rf(WI); this.pX.appendChild(this.gE); this.pX.appendChild(this.kl); this.gL=function(){ var jh=new Array(); for(var kD in this.rows){ var ia=this.rows[kD]; if(!ia.Zg()) jh.push(ia.gL()); }return jh; }; this.lx=function(da){ this.width=da; if(da<this.eC) da=this.eC; this.pX.style.width=da+'px'; var innerWidth=da-(this.VR+this.JB); var UJ=this.pB.length; var Hi=0; var Ts=0; var lc=new Array(); var tK=new Array(); Hi+=(this.VR+this.JB); for(var kD=0;kD<UJ;kD++){ var tq=this.pB[kD]; var x=tq.cA.eC; if(isNaN(x)||x==undefined||x==null) x=0; lc[kD]=x; Hi+=x; var GF=tq.cA.Wi; if(isNaN(GF)||GF==undefined||GF==null) GF=Math.floor(innerWidth/UJ); tK[kD]=GF; Ts+=GF; }var Nf=da-Hi; var hc=0; var aE=new Array(); for(var kD=0;kD<UJ;kD++){ aE[kD]=lc[kD]+Math.floor((tK[kD]/Ts)*Nf); this.pB[kD].lx(aE[kD]); this.pB[kD].An(hc); hc+=aE[kD]; }for(var kD=0;kD<this.rows.length;kD++){ var ia=this.rows[kD]; ia.lx(da,aE,this.VR,this.JB); }this.pX.style.height=((this.rows.length+1.5)*1.5)+'em'; }; this.KA=function(){ for(var kD=0;kD<this.rows.length;kD++){ var KJ=this.rows[kD]; KJ.rV=kD+1; KJ.QT(); }}; }function Tn(pB,tD,rV,VR,JB,Gs){ var cX=this; this.Gs=Gs; this.rV=rV; this.lv=1.5; this.pB=pB; this.tD=tD; if(this.tD==null){ this.tD=new Array(); for(var kD=0;kD<this.pB.length;kD++) this.tD.push(''); }this.pX=document.createElement("div"); this.pX.style.whiteSpace='nowrap'; this.pX.style.position='absolute'; this.QT=function(){ this.pX.style.top=(this.rV*this.lv)+'em'; for(var kD in cX.Ws){ var qr=cX.Ws[kD]; qr.CK(this.rV+kD); }}; this.Zg=function(){ for(var kD in cX.Ws){ var qr=cX.Ws[kD]; if(qr.gL()!='') return false; }return true; }; this.QT(); this.Al=document.createElement("div"); this.Al.style.position='absolute'; this.Al.style.left='0px'; this.Al.style.top='5px'; this.Al.style.overflow='visible'; this.Al.style.cursor='n-resize'; this.Al.innerHTML='<img src="/web/dynamicImages/'+Ot+'/vert-reorder.gif">'; JP(this.Al,this,function(Su,FO,KJ,EU,UP,cp){ cX.Gs.Xa(Su,FO,KJ,EU,UP,cp); },function(Su,FO,KJ,EU,UP,cp){ cX.Gs.ne(Su,FO,KJ,EU,UP,cp); },function(Su,FO,KJ,EU,UP,cp){ cX.Gs.iZ(Su,FO,KJ,EU,UP,cp); }); this.pX.appendChild(this.Al); this.jg=document.createElement("div"); this.jg.style.position='absolute'; this.jg.style.left=VR+'px'; this.jg.style.top='0px'; this.pX.appendChild(this.jg); this.Ws=new Array(); for(var kD=0;kD<pB.length;kD++){ var US=this.pB[kD]; var ge=US.cA.Ug(Gs.Sj,Gs.eh); ge.pX.style.position='absolute'; ge.pX.style.top='0px'; ge.pX.style.left='0px'; ge.Rf(this.tD[kD]); this.Ws[kD]=ge; this.jg.appendChild(ge.pX); }this.ln=document.createElement('div'); this.ln.style.position='absolute'; this.ln.style.left='0px'; this.ln.style.top='5px'; this.ln.style.overflow='visible'; this.ln.style.cursor='pointer'; this.ln.innerHTML='<img src="/web/dynamicImages/'+Ot+'/cross.gif">'; this.pX.appendChild(this.ln); this.ln.onmousedown=function(){ var rows=cX.Gs.rows; for(var kD=0;kD<rows.length;kD++){ var KJ=rows[kD]; if(KJ==cX){ cX.Gs.kl.removeChild(KJ.pX); rows.splice(kD,1); }}cX.Gs.KA(); cX.Gs.Pe(); cX.Gs.lx(cX.Gs.width); cX.Gs.wF(); }; this.lx=function(da,aE){ var UJ=this.pB.length; var hc=0; for(var kG=0;kG<this.Ws.length;kG++){ var ge=this.Ws[kG]; ge.lx(aE[kG]); ge.pX.style.left=hc+'px'; hc+=aE[kG]; }this.ln.style.left=hc+24+'px'; }; this.gL=function(){ var UC=new Array(); for(var kD=0;kD<this.Ws.length;kD++){ var ge=this.Ws[kD]; UC[kD]=ge.gL(); }return UC; }; }function Tw(Su,FO){ if(Su.rV<FO.rV) return-1; if(Su.rV==FO.rV) return 0; if(Su.rV>FO.rV) return 1; }function QA(cA){ this.cA=cA; this.pX=document.createElement("div"); this.pX.style.position='absolute'; this.pX.style.overflow='hidden'; this.pX.style.whiteSpace='nowrap'; this.pX.style.width=cA.eC+'px'; this.pX.style.top='0px'; this.pX.style.height='1.7em'; this.pX.innerHTML=cA.label; this.lx=function(da){ this.pX.style.width=da+'px'; }; this.An=function(x){ this.pX.style.left=x+'px'; }; }function sN(Sj){ this.Sj=Sj; }function tb(ff,YI,defaultValue){ this.ff=ff; this.YI=YI; this.defaultValue=defaultValue; this.jO=true; this.value=defaultValue; this.Rf=function(wN){ this.value=wN; }; this.gL=function(){ return this.value; }; }function Jf(ff,YI,label,description,defaultValue,eC){ this.ff=ff; this.YI=YI; this.label=label; this.description=description; this.defaultValue=defaultValue; this.eC=eC; this.TP=document.createElement("textarea"); this.TP.value=defaultValue; this.TP.style.padding='0px'; this.TP.style.margin='0px'; this.TP.style.width=eC+'px'; this.TP.rows=6; this.pX=document.createElement("div"); this.pX.appendChild(this.TP); this.Bu=function(PU){ this.TP.onmousedown=PU; this.TP.onkeypress=PU; }; this.CK=function(kD){ this.TP.tabIndex=kD; }; this.Rf=function(value){ this.TP.value=value; }; this.gL=function(){ return this.TP.value; }; this.lx=function(da){ if(da<this.eC) da=this.eC; this.TP.style.width=(da-10)+'px'; this.pX.style.width=da+'px'; }; }function bt(ff,YI,label,description,defaultValue,eC,Wi){ this.ff=ff; this.YI=YI; this.label=label; this.description=description; this.defaultValue=defaultValue; this.eC=eC; this.Wi=Wi; this.input=document.createElement("input"); this.input.value=defaultValue; this.input.style.padding='0px'; this.input.style.margin='0px'; this.pX=document.createElement("div"); this.pX.appendChild(this.input); this.Bu=function(PU){ this.input.onmousedown=PU; this.input.onkeypress=PU; }; this.CK=function(kD){ this.input.tabIndex=kD; }; this.Rf=function(value){ this.input.value=value; }; this.gL=function(){ return this.input.value; }; this.lx=function(da){ if(da<this.eC) da=this.eC; this.input.style.width=(da-10)+'px'; this.pX.style.width=da+'px'; }; this.lx(eC); }function vc(ff,YI,label,description,defaultValue,eC,Wi){ this.ff=ff; this.YI=YI; this.label=label; this.description=description; this.defaultValue=defaultValue; this.eC=eC; this.Wi=Wi; this.input=document.createElement("input"); this.input.type='password'; this.input.value=defaultValue; this.input.style.padding='0px'; this.input.style.margin='0px'; this.pX=document.createElement("div"); this.pX.appendChild(this.input); this.Bu=function(PU){ this.input.onmousedown=PU; this.input.onkeypress=PU; }; this.CK=function(kD){ this.input.tabIndex=kD; }; this.Rf=function(value){ this.input.value=value; }; this.gL=function(){ return this.input.value; }; this.lx=function(da){ if(da<this.eC) da=this.eC; this.input.style.width=(da-10)+'px'; this.pX.style.width=da+'px'; }; this.lx(eC); }function jm(ff,YI,label,description,defaultValue){ this.ff=ff; this.YI=YI; this.label=label; this.description=description; this.defaultValue=defaultValue; this.input=document.createElement("input"); this.input.type='checkbox'; this.input.value='isChecked'; this.input.style.padding='0px'; this.input.style.margin='0px'; this.pX=document.createElement("div"); this.pX.appendChild(this.input); this.Bu=function(PU){ this.input.onmousedown=PU; this.input.onkeypress=PU; }; this.CK=function(kD){ this.input.tabIndex=kD; }; this.Rf=function(value){ setTimeout(function(QZ,checked){ return function(){ QZ.checked=checked; }; }(this.input,value),1); }; this.gL=function(){ return this.input.checked; }; this.lx=function(da){ if(da<this.eC) da=this.eC; this.input.style.width=(da-10)+'px'; this.pX.style.width=da+'px'; }; if(this.defaultValue) this.Rf(true); }function Fw(ff,label,description){ this.ff=ff; this.label=label; this.description=description; this.pX=document.createElement("div"); this.pX.style.fontSize='11px'; this.pX.style.textTransform='uppercase'; this.pX.style.borderBottom='1px solid'; this.pX.innerHTML=label; this.lx=function(da){ this.pX.style.width=da+'px'; }; }function Mn(ff,YI,label,description,eD){ this.ff=ff; this.YI=YI; this.eD=eD; this.label=label; this.description=description; var cX=this; this.rl=document.createElement('div'); this.pX=this.rl; this.QL=uid(); var Kp=''; for(var kD in this.eD){ Kp+='<INPUT type="radio" name="'+this.QL+'" value="'+this.eD[kD].value+'">'; }this.rl.innerHTML=Kp; this.rl.style.textAlign='left'; var EM=this.rl.getElementsByTagName('INPUT'); this.DC=new Array(); this.nT=new Array(); for(var kD=0;kD<EM.length;kD++){ this.DC[kD]=EM[kD]; this.DC[kD].style.margin='0px'; this.DC[kD].style.padding='0px'; this.DC[kD].style.width='3ex'; this.DC[kD].align='left'; this.DC[kD].onclick=function(){cX.IA();}; }for(var kD in this.DC){ var rB=document.createElement('div'); this.nT[kD]=rB; rB.style.display='inline'; rB.className='scheme-body'; rB.style.paddingLeft='10px'; rB.appendChild(document.createTextNode(this.eD[kD].label)); this.rl.replaceChild(rB,this.DC[kD]); this.rl.insertBefore(this.DC[kD],rB); }var span=document.createElement('span'); span.style.width='100%'; this.rl.appendChild(span); for(var kD in this.eD){ if(this.eD[kD].sV) this.Rf(this.eD[kD].value); }}Mn.prototype.IA=function(){ for(var kD in this.DC){ if(this.DC[kD].checked){ this.value=this.DC[kD].value; break; }}if(this.xX){ this.xX(); }}; Mn.prototype.Rf=function(wN){ var cX=this; this.value=wN; for(var kD in this.DC){ var checked=this.DC[kD].value==wN; setTimeout(function(uX,checked){ return function(){ uX.checked=checked; }; }(this.DC[kD],checked),1); }}; Mn.prototype.gL=function(){ return this.value; }; Mn.prototype.lx=function(da){ this.pX.style.width=da+'px'; }; Mn.prototype.jt=function(){ var max=0; for(var kD in this.nT){ var da=parseInt(this.nT[kD].offsetWidth); if(da>max) max=da; }return max; }; Mn.prototype.LC=function(da){ for(var kD in this.nT){ var x=parseInt(this.nT[kD].offsetWidth); this.nT[kD].style.paddingRight=(da-x)+15+'px'; }}; Mn.prototype.Bu=function(PU){ this.xX=PU; }; function GU(ff,Sj,eh,xP){ this.ff=ff; this.xP=xP; this.Sj=Sj; this.eh=eh; var cX=this; this.Hb=null; this.nF=function(PU){ this.Hb=PU; }; this.wF=function(jd){ if(this.Hb!=null) this.Hb(jd); }; this.rO=new Array(); for(var kD in this.xP){ var qr=this.xP[kD].Ug(Sj,eh); this.rO[kD]=qr; if(qr.nF) qr.nF(function(){ cX.wF(); }); }this.pX=document.createElement('div'); var table=document.createElement('table'); table.className='scheme-body'; table.align='left'; table.cellPadding=0; table.cellSpacing=0; table.style.paddingLeft='24px'; table.style.paddingRight='24px'; this.pX.appendChild(table); var KR=document.createElement('tbody'); table.appendChild(KR); this.pe=new Array(); this.Yn=new Array(); for(var kD in this.rO){ var qr=this.rO[kD]; if(qr.isDisplayOnly) continue; var fr=document.createElement('tr'); KR.appendChild(fr); var tI=document.createElement('td'); var ec=document.createElement('td'); tI.vAlign='top'; ec.vAlign='top'; ec.style.fontSize='1px'; fr.appendChild(tI); fr.appendChild(ec); var label=document.createElement('span'); label.style.fontSize='13px'; label.style.fontWeight='bold'; label.style.whiteSpace='nowrap'; label.style.paddingRight='5ex'; label.appendChild(document.createTextNode(qr.label)); label.className='scheme-body'; tI.appendChild(label); ec.appendChild(qr.pX); ec.style.paddingBottom='0.3em'; this.pe.push(label); if(qr.description!=undefined&&qr.description!=null&&qr.description!=''){ var nY=document.createElement('tr'); KR.appendChild(nY); var fh=document.createElement('td'); var VZ=document.createElement('td'); nY.appendChild(fh); nY.appendChild(VZ); var CH=document.createElement('span'); CH.style.fontSize='11px'; VZ.style.paddingTop='0.3em'; VZ.style.paddingBottom='0.3em'; CH.appendChild(document.createTextNode(qr.description)); VZ.appendChild(CH); this.Yn[kD]=CH; }var NK=document.createElement('tr'); KR.appendChild(NK); var Oh=document.createElement('td'); Oh.colSpan=2; NK.appendChild(Oh); Oh.style.height='1ex'; }}GU.prototype.MH=function(){ var max=0; for(var kD in this.rO){ var qr=this.rO[kD]; if(qr instanceof Mn){ var da=qr.jt(); if(da>max) max=da; }}for(var kD in this.rO){ var qr=this.rO[kD]; if(qr instanceof Mn){ qr.LC(max); }if(qr.MH) qr.MH(); }}; GU.prototype.fG=function(gj){ for(var kD in this.rO){ var qr=this.rO[kD]; var xU=gj[qr.YI]; if(xU!=undefined) qr.Rf(xU); }}; GU.prototype.Pa=function(){ for(var kD in this.rO){ var qr=this.rO[kD]; if(qr.Rf){ this.Sj.uc.setAttribute(qr.YI,qr.gL()); }if(qr.Pa){ qr.Pa(); }}for(var kD in this.rO){ var qr=this.rO[kD]; if(qr.wG) qr.wG(); }}; GU.prototype.lx=function(da){ this.pX.style.width=da+'px'; }; function vW(){ return [new cg('attributeName','title','description','defaultValue',200,100)]; }function sg(){ return [new BW('content','')]; }function Pi(){ var aI=new cg('link','Link label (e.g. BBC News)','','',200,20); var eV=new cg('url','URL (e.g. www.bbc.co.uk/news or http://www.bbc.co.uk/news)','','',300,80); return [ new hC('links',[aI,eV],[['Example link','http://www.bbc.co.uk/news']]) ]; }function tF(cV,kD){ return function(){ cV(kD); }; }function hw(Gx){ var pX=document.createElement("div"); var ou=6; var nX='#5D5D5D'; var CT=16; var Js=5; var DU=0; for(var kD=0;kD<=10;kD++){ var hueOffset=36*kD; var xC=0; if(kD==10){ hueOffset=0; xC=-100; }var KI=JD(DU+(CT+Js)*kD,0,CT,CT,ou,(new Cg(on)).Ww(hueOffset,xC),(new Cg(TN)).Ww(hueOffset,xC),nX); pX.appendChild(KI); KI.onmousedown=tF(Gx,kD); }var oB=DU+(11*(CT+Js))-Js; var bm=CT; pX.style.width=oB+'px'; pX.style.height=bm+'px'; pX.style.position='relative'; pX.style.height=CT+'px'; return pX; }function JD(left,top,width,height,ho,Lx,iD,nX){ var pX=document.createElement('div'); pX.style.fontSize='1px'; pX.style.position='absolute'; pX.style.left=left+'px'; pX.style.top=top+'px'; pX.style.width=(width-2)+'px'; pX.style.height=(height-2)+'px'; pX.style.border='1px solid '+nX; pX.innerHTML='		<div style="width:'+(width-2)+'px; height:'+ho+'px; background-color: #'+Lx+'"></div>		<div style="width:'+(width-2)+'px; height:'+((height-2)-ho)+'px; background-color: #'+iD+'"></div>'; return pX; }function Ye(vo,xP,gj,Sj,eh,Hb){ var rO=new Array(); for(var kD=0;kD<xP.length;kD++){ var QW=xP[kD]; var er=QW.Ug(Sj,eh); rO[kD]=er; if(er.Rf){ if(gj!=null&&gj!=undefined){ var xU=gj[QW.YI]; if(xU!=undefined) er.Rf(xU); }}if(er.fG){ if(gj!=null&&gj!=undefined){ er.fG(gj); }}if(!Qn(er)){ vo.appendChild(er.pX); }if(er.nF) er.nF(Hb); }return rO; }function EX(rO,width,uD){ for(var kD=0;kD<rO.length;kD++){ var er=rO[kD]; if(!Qn(er)){ er.lx(width); if(er.TE) er.TE(uD); }}}function uJ(rO){ var vo=document.getElementById('panel-edit'); var da=FX()-50; vo.style.width=da+'px'; for(var kD=0;kD<rO.length;kD++){ var er=rO[kD]; if(!Qn(er)){ er.lx(da); }}}function Qn(er){ if(er.jO) return true; else return false; }function DH(){ }DH.prototype.vR=function(){ }; function xu(Bn,RX){ var cX=this; this.RX=RX; this.attributes=new Object(); this.Zl=new Object(); this.Bn=Bn; this.mC(); this.lE(function(){ cX.Ce().vR(); }); }xu.prototype.nS=function(){ return this.RX.WQ; }; xu.prototype.KO=function(){ if(this.AO) this.AO.call(this.Ce()); }; xu.prototype.lE=function(AO){ this.AO=AO; }; xu.prototype.nf=function(){ return(this.Bn.pr=='MAXIMIZED'); }; xu.prototype.fd=function(){ if(this.KQ) this.KQ.call(this.Ce(),this.nf()); }; xu.prototype.sS=function(KQ){ this.KQ=KQ; }; xu.prototype.mC=function(){ try{ this.attributes=eval('('+this.Bn.content+')'); }catch(UP){alert(UP);alert(this.Bn.content);}if(this.attributes==null||this.attributes==undefined) this.attributes=new Object(); }; xu.prototype.AM=function(){ this.Bn.content=bL.stringify(this.attributes); jf(this.Bn); }; xu.prototype.Ce=function(){ return this.Bn.Sj; }; xu.prototype.Fl=function(Kp){ this.EF().innerHTML=Kp; this.jQ(); }; xu.prototype.EF=function(){ return document.getElementById(this.Bn.id+'-pc'); }; xu.prototype.FB=function(){ SU(this.EF()); }; xu.prototype.jQ=function(){ jQ(this.Bn); }; xu.prototype.ST=function(state){ document.getElementById(this.Bn.id+'-maxi').style.display=state?'block':'none'; }; xu.prototype.Mh=function(){ document.getElementById(this.Bn.id+'-ae').style.display='none'; }; xu.prototype.NU=function(state){ document.getElementById(this.Bn.id+'-rs').style.visibility=state?'visible':'hidden'; }; xu.prototype.getAttribute=function(name){ return this.attributes[name]; }; xu.prototype.setAttribute=function(name,value){ this.attributes[name]=value; }; xu.prototype.removeAttribute=function(name){ delete this.attributes[name]; }; xu.prototype.Tj=function(){ return this.attributes; }; xu.prototype.ts=function(name){ return this.Zl[name]; }; xu.prototype.ZQ=function(name,value){ this.Zl[name]=value; }; xu.prototype.PS=function(name){ delete this.Zl[name]; }; xu.prototype.gh=function(){ return this.Zl; }; xu.prototype.vI=function(){}; xu.prototype.bo=function(){}; xu.prototype.CR=function(){}; xu.prototype.jv=function(){}; xu.prototype.Gg=function(){}; xu.prototype.Qd=function(name){}; xu.prototype.mk=function(name,value){}; xu.prototype.HN=function(name){}; xu.prototype.Jj=function(){}; xu.prototype.iO=function(){}; xu.prototype.Gf=function(){}; xu.prototype.vb=function(){}; xu.prototype.VI=function(){}; xu.prototype.hY=function(){}; xu.prototype.Rg=function(){}; xu.prototype.ub=function(){}; xu.prototype.lx=function(){}; xu.prototype.xE=function(){}; xu.prototype.Wx=function(){}; xu.prototype.Kx=function(wN){ this.Bn.title=wN; DY(this.Bn); }; xu.prototype.Oi=function(){}; xu.prototype.te=function(){}; xu.prototype.Ob=function(){}; xu.prototype.JP=function(){}; xu.prototype.VK=function(){}; xu.prototype.oe=function(){}; xu.prototype.Ov=function(nB){ this.nB=nB; }; xu.prototype.jM=function(xq){ if(this.nB) this.nB.call(this.Ce(),parseInt(va(this.Bn.id).style.width),xq); }; xu.prototype.rp=function(NE){ this.NE=NE; }; xu.prototype.HA=function(){ if(this.NE) this.NE.call(this.Ce()); }; xu.prototype.cs=function(){}; xu.prototype.MT=function(){}; xu.prototype.wp=function(id){}; xu.prototype.bQ=function(){}; xu.prototype.HW=function(){}; xu.prototype.CY=function(){}; xu.prototype.PK=function(){}; xu.prototype.aN=function(){}; xu.prototype.Of=function(Pd){}; xu.prototype.ZS=function(){}; xu.prototype.Mt=function(){}; xu.prototype.CV=function(eo,Hg,PU){ var oQ=bL.stringify(Hg); bQ("/"+protopagePath+"/_api/ws/"+eo,oQ,function(fZ){ var mo=eval('('+fZ+')'); PU(mo); }); }; var rv=new Array(); function xB(){ rv[Us]=Ph; rv[bf]=WE; rv[Ei]=vn; rv[lA]=hS; rv[YJ]=lp; rv[Eh]=Bh; rv[fl]=qw; rv[RB]=OD; rv[DZ]=Oa; rv[RT]=tM; }function XI(kE,UQ,PU){ if(rv[kE]){ PU(rv[kE]); }else{ bQ('/_api/widgetSource?id='+kE,function(data){ var RX=new Function(); RX.prototype=new DH(); var Nh=RX.prototype; var So=eval(data); var ON=So[0]; var WQ=eval('('+So[1]+')'); var YH=So[2]; RX.WQ=WQ; var EQ=new Array(); eval(ON); rv[widgetClassId]=RX; }); }}function po(){ }function og(eS){ var kD=eS.indexOf('http://'); if(kD==-1) return 'http://'+eS; if(kD==0) return eS; return eS.substring(kD); }function ZZ(feedContentRequests,iW){ if(feedContentRequests.length==0) iW(new Array()); for(var kD in feedContentRequests) feedContentRequests[kD].locatorUrl=og(feedContentRequests[kD].locatorUrl); var gN=new Object(); gN.name='requestFeedContent'; gN.feedContentRequests=feedContentRequests; var oQ=bL.stringify(gN); bQ('/_api/feed',oQ,function(fZ){ var Nr=eval('('+fZ+')'); var feeds=Nr.feeds; var error=Nr.error; iW(feeds,error); }); }function Ph(){ }function hn(){ var eV=new cg('locatorUrl','News page or feed URL (e.g. www.cnn.com or http://rss.cnn.com/rss/cnn_topstories.rss)',null,'www.cnn.com',300,100); return [ new mW(Ph.jG),
new hC('feeds',[eV],[]),
new mW(Ph.xa),new mW(Ph.VG) ]; }Ph.VG=function(ff,Sj,eh){ this.ff=ff; var cX=this; var ih=24; this.Sj=Sj; this.pX=document.createElement("div"); this.pX.style.paddingLeft=ih+'px'; this.pX.style.paddingRight=ih+'px'; this.pX.style.width='200px'; this.Rj=document.createElement('div'); this.Rj.appendChild(document.createTextNode('Import feeds from OPML / Bloglines')); this.Rj.style.paddingTop='30px'; this.Rj.style.paddingBottom='10px'; this.Rj.style.textDecoration='underline'; this.Rj.style.cursor='pointer'; this.Jx=false; this.Rj.onmousedown=function(){ cX.body.style.display=cX.Jx?'none':'block'; cX.Jx=!cX.Jx; cX.wF(); }; this.body=document.createElement('div'); this.body.style.display='none'; var Kj=CallbackNotify.Is(function(NJ){ if(NJ=='error'){ alert("There was a problem with the OPML file you uploaded - please check it is a valid OPML file."); return; }; var iC=null; for(var TM in eh.rO) if(eh.rO[TM].YI=='feeds') iC=eh.rO[TM]; var nR=NJ; for(var kD in nR){ var nH=nR[kD]; iC.KU([nH]); }iC.Pe(); iC.wF(); }); var Xu=CallbackNotify.Is(function(NJ){ if(NJ=='error'){ alert("There was a problem with the Bloglines import - please check that the Bloglines username is entered correctly."); return; }; var iC=null; for(var TM in eh.rO) if(eh.rO[TM].YI=='feeds') iC=eh.rO[TM]; var nR=NJ; for(var kD in nR){ var nH=nR[kD]; iC.KU([nH]); }iC.Pe(); iC.wF(); }); this.body.innerHTML=' <div>Upload an OPML file exported from your newsreader application:</div>													<form method="post" enctype="multipart/form-data" action="/_api/opmlImport" target="'+CallbackNotify.Jw(Kj)+'">													'+CallbackNotify.JL(Kj)+'														<td><input type="file" name="opmlFile" style="min-width: 0px; padding: 1px; margin: 0px;"></td>														<td><input type="submit" value="Go" style="min-width: 0px; padding: 1px 1px 1px 1px; margin: 1px 1px 1px 1px;"></td>	                        </tr></table>													</form>													'+CallbackNotify.MG(Kj)+'													<div>OR, import the public feeds from a Bloglines username:</div>													<form method="get" action="/_api/opmlImport" target="'+CallbackNotify.Jw(Xu)+'">													'+CallbackNotify.JL(Xu)+'														<td><input type="text" name="bloglinesId" style="min-width: 0px; padding: 1px; margin: 0px;"></td>														<td><input type="submit" value="Go" style="min-width: 0px; padding: 1px; margin: 0px;"></td>	                        </tr></table></form>'+CallbackNotify.MG(Xu); this.pX.appendChild(this.Rj); this.pX.appendChild(this.body); this.eC=100; this.lx=function(da){ if(da<this.eC) da=this.eC; this.pX.style.width=(da-ih*2)+'px'; }; this.Hb=null; this.nF=function(PU){ this.Hb=PU; }; this.wF=function(){ if(this.Hb!=null) this.Hb(); }; }; Ph.jG=function(ff,Sj,eh){ this.ff=ff; var cX=this; this.Sj=Sj; var ih=24; this.pX=document.createElement("div"); this.pX.style.paddingLeft=ih+'px'; this.pX.style.paddingRight=ih+'px'; this.pX.style.paddingBottom=20+'px'; this.pX.style.width='200px'; this.rh=document.createElement('input'); this.rh.style.width='3ex'; this.rh.style.padding='0px'; this.rh.style.margin='0px'; this.rh.type='checkbox'; this.rh.checked=(this.Sj.uc.getAttribute('headlinesOnly')); if(isIE&&cX.rh.checked){ setTimeout(function(){ cX.rh.checked=true; },1); }this.WR=document.createElement('input'); this.WR.style.width='3ex'; this.WR.style.textAlign='center'; this.WR.style.padding='0px'; this.WR.style.marginLeft='0ex'; this.WR.style.marginRight='0ex'; this.WR.type='text'; if(this.Sj.uc.getAttribute('maxHeadlinesPerFeed')) this.WR.value=this.Sj.uc.getAttribute('maxHeadlinesPerFeed'); else this.WR.value='3'; this.Ai=document.createElement('input'); this.Ai.style.width='3ex'; this.Ai.style.padding='0px'; this.Ai.style.margin='0px'; this.Ai.type='checkbox'; this.Ai.checked=true; this.Ai.checked=(this.Sj.uc.getAttribute('showFullArticlesWhenMaximized')==true); if(isIE&&cX.Ai.checked){ setTimeout(function(){ cX.Ai.checked=true; },1); }this.Wj=document.createElement('input'); this.Wj.style.width='3ex'; this.Wj.style.textAlign='center'; this.Wj.style.padding='0px'; this.Wj.style.marginLeft='0ex'; this.Wj.style.marginRight='0ex'; this.Wj.type='text'; if(this.Sj.uc.getAttribute('maxHeadlinesPerFeedWhenMaximized')) this.Wj.value=this.Sj.uc.getAttribute('maxHeadlinesPerFeedWhenMaximized'); else this.Wj.value='7'; var Ir=document.createElement('table'); Ir.cellPadding=2; Ir.cellSpacing=0; Ir.border=0; var hU=document.createElement('tbody'); Ir.appendChild(hU); var fo=document.createElement('tr'); var nY=document.createElement('tr'); hU.appendChild(fo); hU.appendChild(nY); var IN=document.createElement('td'); var JS=document.createElement('td'); var ke=document.createElement('td'); var vP=document.createElement('td'); var Cq=document.createElement('td'); var mL=document.createElement('td'); var jC=document.createElement('td'); var gC=document.createElement('td'); var kX=document.createElement('td'); var On=document.createElement('td'); IN.className='scheme-body'; JS.className='scheme-body'; ke.className='scheme-body'; vP.className='scheme-body'; Cq.className='scheme-body'; mL.className='scheme-body'; jC.className='scheme-body'; gC.className='scheme-body'; kX.className='scheme-body'; On.className='scheme-body'; fo.appendChild(IN); fo.appendChild(JS); fo.appendChild(ke); fo.appendChild(vP); fo.appendChild(Cq); nY.appendChild(mL); nY.appendChild(jC); nY.appendChild(gC); nY.appendChild(kX); nY.appendChild(On); var wr=document.createElement('span'); wr.style.fontWeight='bold'; wr.style.paddingRight='12px'; wr.appendChild(document.createTextNode('Normal display:')); wr.style.whiteSpace='nowrap'; IN.appendChild(wr); JS.appendChild(document.createTextNode('Show headlines only')); ke.appendChild(this.rh); this.rh.style.marginRight='16px'; this.rh.style.marginLeft='0px'; vP.appendChild(document.createTextNode('Max. headlines per news feed')); vP.style.whiteSpace='nowrap'; Cq.appendChild(this.WR); var GV=document.createElement('span'); GV.style.fontWeight='bold'; GV.style.paddingRight='12px'; GV.style.whiteSpace='nowrap'; GV.appendChild(document.createTextNode('When maximized:')); mL.appendChild(GV); jC.appendChild(document.createTextNode('Show full articles (where available)')); jC.style.whiteSpace='nowrap'; gC.appendChild(this.Ai); this.Ai.style.marginRight='16px'; this.Ai.style.marginLeft='0px'; kX.appendChild(document.createTextNode('Max. headlines per news feed')); On.appendChild(this.Wj); this.pX.appendChild(Ir); this.eC=100; this.lx=function(da){ if(da<this.eC) da=this.eC; this.pX.style.width=(da-ih*2)+'px'; }; this.Pa=function(){ this.Sj.uc.setAttribute('headlinesOnly',this.rh.checked); this.Sj.uc.setAttribute('maxHeadlinesPerFeed',this.WR.value); this.Sj.uc.setAttribute('showFullArticlesWhenMaximized',this.Ai.checked); this.Sj.uc.setAttribute('maxHeadlinesPerFeedWhenMaximized',this.Wj.value); }; }; Ph.xa=function(ff,Sj,eh){ this.ff=ff; var cX=this; var ih=24; this.Sj=Sj; this.pX=document.createElement("div"); this.pX.className='scheme-body'; this.pX.style.paddingLeft=ih+'px'; this.pX.style.paddingRight=ih+'px'; this.pX.style.width='200px'; this.Rj=document.createElement('div'); this.Rj.appendChild(document.createTextNode('You can also add feeds to the table above by choosing from our directory:')); this.Rj.paddingBottom='16px'; this.jc=document.createElement('div'); this.tT=new Array(); this.hl=null; for(var kD in qC){ var KJ=document.createElement('div'); KJ.className='scheme-body'; KJ.style.marginLeft='0px'; KJ.style.marginRight='14px'; KJ.style.marginTop='4px'; KJ.style.marginBottom='4px'; KJ.style.fontWeight='bold'; KJ.style.cursor='pointer'; KJ.style.whiteSpace='nowrap'; KJ.onmousedown=function(Hh,kD){ return function(){ var uH=new Array(); cX.uH=uH; cX.Qs=kD; for(var kG in cX.tT){ if(kG!=kD) cX.tT[kG].className='scheme-body'; }var Uc=qC[kD][1]; for(var kG in Uc){ var cp=document.createElement('div'); cp.className='scheme-body'; cp.style.marginLeft='0px'; cp.style.marginRight='14px'; cp.style.marginTop='4px'; cp.style.marginBottom='4px'; cp.style.cursor='pointer'; cp.style.whiteSpace='nowrap'; var BB=document.createElement('a'); var XB=document.createTextNode('(add)'); BB.appendChild(XB); BB.style.fontSize='11px'; BB.style.textDecoration='underline'; BB.style.paddingRight='6px'; BB.onclick=function(label,qb,It,XB){ return function(){ XB.replaceData(0,XB.length,'(added)'); var iC=null; for(var TM in eh.rO) if(eh.rO[TM].YI=='feeds') iC=eh.rO[TM]; var nH=(It!=null)?It:qb; iC.KU(['('+label+')     '+nH]); iC.Pe(); }; }(Uc[kG][0],Uc[kG][1],Uc[kG][2],XB); var dW=document.createElement('a'); dW.appendChild(document.createTextNode('(preview)')); dW.className='scheme-body'; dW.style.fontSize='11px'; dW.style.textDecoration='underline'; dW.style.paddingRight='6px'; dW.onclick=function(qb){ return function(){ Sp(qb); return false; }; }(Uc[kG][1]); cp.appendChild(dW); cp.appendChild(BB); cp.appendChild(document.createTextNode(Uc[kG][0])); uH.push(cp); }mG(cX.eK,uH); cX.wF(); }; }(KJ,kD); KJ.onmouseover=function(Hh){ return function(){ Hh.className='scheme-header'; }; }(KJ); KJ.onmouseout=function(Hh,kD){ return function(){ if(cX.Qs!=kD) Hh.className='scheme-body'; }; }(KJ,kD); KJ.appendChild(document.createTextNode(qC[kD][0])); this.tT.push(KJ); }this.eK=document.createElement('div'); this.pX.appendChild(this.Rj); this.pX.appendChild(this.jc); this.pX.appendChild(this.eK); this.eC=100; this.lx=function(da){ if(da<this.eC) da=this.eC; this.pX.style.width=(da-ih*2)+'px'; this.jc.style.width=this.pX.style.width; this.eK.style.width=this.pX.style.width; mG(this.jc,this.tT); if(this.uH) mG(this.eK,this.uH); }; this.Hb=null; this.nF=function(PU){ this.Hb=PU; }; this.wF=function(){ if(this.Hb!=null) this.Hb(); }; }; Ph.WQ=hn(); Ph.prototype=new DH(); Ph.prototype.vR=function(){ var cX=this; this.uc.FB(); this.uc.EF().className='news-feed-body'; this.QI(); if(!this.Hn){ this.Hn=true; setInterval(function(){cX.QI(3500000);},3600000); }this.uc.sS(function(nf){ cX.QI(); if(!nf){ if(cX.qJ!=null){ clearInterval(cX.qJ); }}else{ cX.qJ=setInterval(function(){ jW(cX.uc.Bn.id); },1000); }}); }; Ph.prototype.oO=function(){ if(this.Qh==undefined) this.Qh=1; this.Qh++; if(this.Qh>30) return; var cX=this; setTimeout(function(){ cX.QI(4000); },5000); }; Ph.prototype.QI=function(lH){ if(lH!=undefined&&lH!=null){ var bW=(new Date()).getTime(); if((bW-aB)<lH) return; }var cX=this; cX.uc.FB(); var wx=document.createElement('div'); wx.appendChild(document.createTextNode('Retrieving feeds...')); this.uc.EF().appendChild(wx); this.uc.jQ(); var hF=wg(this.uc.getAttribute('feeds')); var Mq=this.uc.Tj(); var headlinesOnly=Mq.headlinesOnly; var maxHeadlinesPerFeed=Mq.maxHeadlinesPerFeed; var showFullArticlesWhenMaximized=Mq.showFullArticlesWhenMaximized; var maxHeadlinesPerFeedWhenMaximized=Mq.maxHeadlinesPerFeedWhenMaximized; var nf=this.uc.nf(); var feedContentRequests=new Array(); for(var kD in hF){ var qF=new po(); qF.locatorUrl=og(hF[kD]); qF.includeBylines=true; if(nf&&showFullArticlesWhenMaximized) qF.includeBylines=false; if((!nf)&&(headlinesOnly)) qF.includeBylines=false; qF.includeFullEntryBodies=(nf&&showFullArticlesWhenMaximized); qF.maxEntries=nf?maxHeadlinesPerFeedWhenMaximized:maxHeadlinesPerFeed; qF.lastReadTimestamp=0; if(Mq.lastReadTimestamps!=undefined){ if(Mq.lastReadTimestamps[qF.locatorUrl]!=undefined){ qF.lastReadTimestamp=Mq.lastReadTimestamps[qF.locatorUrl]; }}feedContentRequests.push(qF); }ZZ(feedContentRequests,function(feeds,error){ cX.uc.FB(); cX.uc.EF().appendChild(cX.wH(feeds,error)); if(isIE) setTimeout(function(){cX.uc.jQ();},500); cX.uc.jQ(); }); }; Ph.prototype.wH=function(feeds,error){ var gx=new Array(); var Mq=this.uc.Tj(); var headlinesOnly=Mq.headlinesOnly; var maxHeadlinesPerFeed=Mq.maxHeadlinesPerFeed; var showFullArticlesWhenMaximized=Mq.showFullArticlesWhenMaximized; var maxHeadlinesPerFeedWhenMaximized=Mq.maxHeadlinesPerFeedWhenMaximized; var nf=this.uc.nf(); var maxEntries=nf?maxHeadlinesPerFeedWhenMaximized:maxHeadlinesPerFeed; var cX=this; var pX=document.createElement('div'); pX.style.width='100%'; pX.style.overflow='hidden'; var Cd=false; if(feeds){ for(var kD=0;kD<feeds.length;kD++){ var CM=feeds[kD]; var kH=(kD==(feeds.length-1)); var Wp=(!CM.state); var SV=document.createElement('div'); if(kH){ SV.style.paddingBottom='0px'; }else{ if(CM.entries&&CM.entries.length==0){ SV.style.paddingBottom=(nf)?'10px':'0px'; }else{ SV.style.paddingBottom=(nf)?'20px':'8px'; }}var jB=document.createElement('div'); var lt=document.createElement('div'); var bx=new Object(); var Rr; var sY; Rr=this.aG(CM,SV,jB,lt,nf,bx); SV.appendChild(Rr); gx.push(Rr); if(nf){ sY=this.aG(CM,SV,jB,lt,nf,bx); gx.push(sY); bx.sY=sY; }bx.jB=jB; jB.style.fontSize=nf?'15px':'11px'; jB.style.paddingBottom='3px'; jB.style.borderBottom='1px solid'; jB.style.marginBottom='12px'; jB.style.textTransform='uppercase'; jB.style.fontWeight='bold'; if(Wp){ var AK=document.createElement('a'); AK.appendChild(document.createTextNode(CM.title)); AK.href=CM.link; AK.target='_NEW'; AK.style.textDecoration='none'; jB.appendChild(AK); }else{ jB.appendChild(document.createTextNode(CM.locatorUrl)); }SV.appendChild(jB); if(Wp){ var gu=0; var dX=true; for(var kG in CM.entries){ var Wt=CM.entries[kG]; var Yw=(Wt.byline==''||Wt.byline==null||Wt.byline==undefined||oa(Wt.byline)==''); if(!Yw){ dX=false; break; }}var cY=true; for(var kG in CM.entries){ var Wt=CM.entries[kG]; var Zg=(Wt.content==''||Wt.content==null||Wt.content==undefined||oa(Wt.content)==''); if(!Zg){ cY=false; break; }}for(var kG in CM.entries){ gu++; if(gu>maxEntries) break; var XZ=(kG==(CM.entries.length-1)); var Wt=CM.entries[kG]; var Dw=document.createElement('div'); if(Rr) Dw.onmouseover=Rr.onmouseout; if(sY) Dw.onmouseover=sY.onmouseout; Dw.style.paddingBottom=((headlinesOnly&&!nf))?'0px':'12px'; if((kH&&XZ)||(dX&&cY)) Dw.style.paddingBottom='0px'; var mE=document.createElement('div'); if(nf){ mE.style.fontSize='15px'; }else{ mE.style.fontSize='11px'; }if(!headlinesOnly) mE.style.fontWeight='bold'; if(headlinesOnly){ mE.style.overflow='hidden'; mE.style.whiteSpace='nowrap'; }mE.style.clear='both'; mE.innerHTML=Wt.headline; if(nf&&showFullArticlesWhenMaximized){ var MR=document.createElement('a'); MR.href=Wt.link; MR.target='_NEW'; MR.style.textDecoration='none'; MR.appendChild(mE); Dw.appendChild(MR); }else{ Dw.appendChild(mE); }if(!(headlinesOnly&&!nf)){ if(!dX){ var rH=document.createElement('div'); rH.style.fontSize=nf?'13px':'11px'; rH.style.fontWeight='normal'; if(nf){ rH.style.paddingBottom='10px'; if(!XZ) rH.style.borderBottom='1px dashed'; }rH.innerHTML=Wt.byline; Dw.appendChild(rH); }if(!cY){ var Ni=document.createElement('div'); Ni.style.fontSize=nf?'13px':'11px'; Ni.style.paddingBottom='10px'; if(!XZ) Ni.style.borderBottom='1px dashed'; Ni.style.fontWeight='normal'; Ni.innerHTML=Wt.content; Dw.appendChild(Ni); }}if(nf&&!cY){ lt.appendChild(Dw); }else{ var BP=document.createElement('a'); BP.href=Wt.link; BP.target='_NEW'; BP.style.textDecoration='none'; BP.appendChild(Dw); lt.appendChild(BP); }}SV.appendChild(lt); if(nf&&(CM.entries.length>0)){ var PA=document.createElement('div'); PA.style.marginTop='16px'; PA.style.marginBottom='30px'; PA.style.borderBottom='1px solid'; SV.appendChild(sY); SV.appendChild(PA); bx.PA=PA; }}else{ var wf='This feed is not available'; if(CM.state=='AWAITING_DISCOVERY'||CM.state=='AWAITING_INITIAL_FEED_RETRIEVAL'){ wf='We are currently indexing this feed. Please wait...'; Cd=true; }if(CM.state=='NO_FEED_FOUND'){ wf='No news feed could be detected from this source. Please enter the RSS/ATOM feed URL directly if one exists.'; }if(CM.state=='LOCATOR_URL_UNREACHABLE'){ wf='We could not connect to this page address to retrieve the news feed. Please check you have entered the address correctly.'; }if(CM.state=='FEED_URL_UNREACHABLE'){ wf='We could not connect to the feed address you have specified. The service may be down or the address may be incorrect.'; }if(CM.state=='FEED_UNPARSEABLE'){ wf='There appears to be an error with the news feed from this source. If this problem persists, please contact our technical support team.'; }SV.appendChild(document.createTextNode(wf)); }pX.appendChild(SV); }}if(error){ pX.appendChild(document.createTextNode('News feeds are temporarily unavailable. Service will resume shortly.')); }else if(feeds.length==0) pX.appendChild(document.createTextNode('Click \'edit\' to choose some news feeds for this panel.')); if(Cd) this.oO(); return pX; }; Ph.prototype.aG=function(CM,SV,jB,lt,nf,bx){ var cX=this; var CQ=document.createElement('div'); if(isIE) CQ.style.styleFloat='right'; else CQ.style.cssFloat='right'; CQ.style.textTransform='none'; CQ.style.textAlign='right'; CQ.style.fontWeight='bold'; CQ.className='scheme-body'; CQ.style.paddingLeft='12px'; if(!nf) CQ.style.clear='both'; if(nf) CQ.style.height='4.5ex'; var OU=document.createElement('div'); OU.style.fontSize='10px'; OU.style.cursor='pointer'; if(nf) OU.style.paddingTop='1.6ex'; OU.appendChild(document.createTextNode('mark')); OU.style.display='block'; var MV=document.createElement('div'); MV.style.paddingLeft='6px'; MV.style.paddingBottom='6px'; MV.style.cursor='pointer'; MV.style.fontSize='12px'; MV.appendChild(document.createTextNode('mark as read')); MV.style.display='none'; MV.style.textDecoration='underline'; var iS=document.createElement('div'); MV.style.paddingLeft='6px'; iS.style.cursor='pointer'; iS.style.fontSize='12px'; iS.appendChild(document.createTextNode('un-mark as read')); iS.style.display='none'; iS.style.textDecoration='underline'; CQ.appendChild(OU); CQ.appendChild(MV); CQ.appendChild(iS); MV.onclick=function(CM,lt,bx){ return function(){ var VW=0; for(var kG in CM.entries){ var iQ=CM.entries[kG].timestamp; if(iQ>VW) VW=iQ; }var lastReadTimestamps=cX.uc.getAttribute('lastReadTimestamps'); if(!lastReadTimestamps) lastReadTimestamps=new Object(); lastReadTimestamps[CM.locatorUrl]=(''+VW); cX.uc.setAttribute('lastReadTimestamps',lastReadTimestamps); cX.uc.AM(); var Wm=lt.offsetHeight; if(CQ==bx.sY) if(nf) window.scrollBy(0,-1*Wm); SU(lt); SV.style.paddingBottom='0px'; cX.uc.jQ(); if(bx.PA) bx.PA.style.borderBottom='none'; if(bx.sY) bx.sY.style.display='none'; }; }(CM,lt,bx); iS.onclick=function(CM,lt){ return function(){ var lastReadTimestamps=cX.uc.getAttribute('lastReadTimestamps'); if(!lastReadTimestamps) lastReadTimestamps=new Object(); lastReadTimestamps[CM.locatorUrl]=(''+0); cX.uc.setAttribute('lastReadTimestamps',lastReadTimestamps); cX.uc.AM(); cX.QI(); lt.appendChild(document.createTextNode('Retrieving entries...')); cX.uc.jQ(); }; }(CM,lt); CQ.onmouseover=function(OU,iS,MV,nf,jB){ return function(){ if(!nf) jB.style.marginBottom='4.5ex'; OU.style.display='none'; iS.style.display='block'; MV.style.display='block'; }; }(OU,iS,MV,nf,jB); Xq(CQ,function(OU,iS,MV,nf,jB){ return function(){ if(!nf) jB.style.marginBottom='12px'; OU.style.display='block'; iS.style.display='none'; MV.style.display='none'; }; }(OU,iS,MV,nf,jB)); return CQ; };function Oa(){ }Oa.WQ=function(){ return [ ]; }(); Oa.prototype=new DH(); Oa.prototype.vR=function(){ var cX=this; this.uc.FB(); this.uc.EF().innerHTML='  <iframe style="margin-left: 0px;	margin-top: 0px;	margin-right: 0px;	margin-bottom: 0px;" width="100%" allowtransparency="true" background-color="transparent" border=0 height=250 width=470 frameborder=0 marginheight=0 marginwidth=0 scrolling=no src="/web/static/ft/archives-search-frame.html">'; }; function qw(){ }qw.WQ=function(){ return [ ]; }(); qw.prototype=new DH(); qw.prototype.vR=function(){ var cX=this; this.uc.FB(); this.uc.EF().innerHTML='  <iframe style="margin-left: 0px;	margin-top: 0px;	margin-right: 0px;	margin-bottom: 0px;" width="100%" height=84 border=0 allowtransparency="true" background-color="transparent" frameborder=0 marginheight=0 marginwidth=0 scrolling=no src="/web/static/ft/currency-converter-frame.html">'; }; function OD(){ }OD.WQ=function(){ return [ ]; }(); OD.prototype=new DH(); OD.prototype.vR=function(){ var cX=this; this.uc.FB(); this.uc.EF().innerHTML='	<div align="center">	<a href="http://mwprices.ft.com/custom/ft-com/html-marketsDataTools.asp" target="_NEW">    <img src="http://chart.bigcharts.com/custom/ft-com/indices-xx.gifquote" border=0>  </a></div>'; }; function tM(){ }tM.WQ=function(){ return [ ]; }(); tM.prototype=new DH(); tM.prototype.vR=function(){ var cX=this; this.uc.FB(); this.uc.EF().innerHTML='  <iframe style="margin-left: 0px;    margin-top: 0px;    margin-right: 0px;    margin-bottom: 0px;" width="100%" height=74 border=0 allowtransparency="true" background-color="transparent" frameborder=0 marginheight=0 marginwidth=0 scrolling=no src="/web/static/ft/news-quotes-search.html">'; }; function lp(){ }lp.prototype=new DH(); lp.WQ=[ new dK([ new cg('url','Web site address','Please note that some web sites may try to redirect you away from Protopage when they are loaded by this widget.','http://www.google.com',400),new xp('disableScrollbars','Never display scrollbars','If the web page is larger than the size of your widget, scrollbars will normally be displayed. Tick this box to prevent scrollbars from appearing.',false),new cg('verticalOffset','Vertical offset','You can increase this value to crop out the top part of the web page displayed.','0',40),new cg('horizontalOffset','Horizontal offset','You can increase this value to crop out the left part of the web page displayed.','0',40) ]) ]; lp.prototype.vR=function(){ var cX=this; this.uc.ST(false); this.uc.FB(); this.uc.lE(function(){ cX.DO=true; cX.uc.setAttribute('safetyTimeoutCompleted',false); cX.uc.AM(); cX.vR(); setTimeout(function(){ cX.uc.setAttribute('safetyTimeoutCompleted',true); cX.uc.AM(); },15000); }); var url=this.uc.getAttribute('url'); var TC=this.uc.getAttribute('safetyTimeoutCompleted'); if(TC==null) TC=false; if(this.DO==undefined) this.DO=false; if(!url||url==''){ var pX=this.uc.EF(); pX.appendChild(document.createTextNode('Click the edit button to enter a web page address, or ')); var Su=document.createElement('a'); Su.appendChild(document.createTextNode('click here')); Su.href='#'; pX.appendChild(Su); pX.appendChild(document.createTextNode(' to display a sample web page.')); Su.onclick=function(){ cX.uc.setAttribute('url','http://maps.google.com?q=London'); cX.uc.setAttribute('safetyTimeoutCompleted',true); cX.uc.setAttribute('disableScrollbars',false); cX.uc.setAttribute('verticalOffset','0'); cX.uc.setAttribute('horizontalOffset','0'); cX.uc.AM(); cX.vR(); return false; }; }else{ if(TC||this.DO){ this.AH(url); }else{ this.uc.EF().innerHTML='Web page failed safety check. Because some web pages may attempt to redirect you away from Protopage, we use a safety check which waits 15 seconds before confirming the web address that you have entered. To try loading the page again, click the edit button and then click Save Changes. Then, make sure you wait at least 15 seconds before navigating away from your Protopage.'; }}}; lp.prototype.AH=function(url){ var cX=this; fU(this.uc.Bn.id,true); this.uc.Bn.va().style.padding='0px'; this.uc.Bn.nq().style.padding='0px'; var cp=document.createElement('iframe'); this.iframe=cp; if(this.uc.getAttribute('disableScrollbars')==true){ cp.scrolling='no'; }else cp.scrolling='auto'; cp.allowTransparency=true; cp.border=0; cp.frameBorder='no'; cp.hideFocus=true; cp.ct=0; cp.pY=0; cp.hspace=0; cp.vspace=0; this.CA(); this.uc.EF().appendChild(cp); cp.src=url; cp.style.position='absolute'; this.uc.Ov(function(){ cX.CA(); }); }; lp.prototype.CA=function(){ var YX=Math.abs(rY(this.uc.getAttribute('verticalOffset'))); var Ya=Math.abs(rY(this.uc.getAttribute('horizontalOffset'))); var tc=this.uc.Bn; var y=tc.height; y-=8; y-=NA(tc.id); var da=tc.width+Ya; var FU=y+YX; this.iframe.width=da; this.iframe.height=FU; this.iframe.style.width=da+'px'; this.iframe.style.height=FU+'px'; this.iframe.style.left=(-1*Ya)+'px'; this.iframe.style.top=(-1*YX)+'px'; }; function vn(){ }function EB(){ var Su=new Bq('serviceType','Inbox type','',[new SP('Gmail','gmail',true),new SP('POP3','pop3',false),new SP('IMAP','imap',false)]); var FO=new cg('username','Login','','',200); var KJ=new Nj('password','Password','','',200); var EU=new cg('serverAddress','POP3/IMAP server address','','',200); var UP=new cg('port','IMAP server port (Optional)','','',40); var cp=new xp('useSSL','Server uses SSL','',false); var EV=new cg('webmailUrl','Webmail URL (Optional)','e.g., http://www.mywebmail.com/','',200); var FU=new cg('maxMessages','Maximum no. of emails to display','','7',40); var kD=new xp('includeBodyPreviews','Include message preview','',true); return [ new dK([ Su,FO,KJ,EU,UP,cp,EV,FU,kD
]),new mW(vn.wR,Su) ]; }vn.wR=function(ff,Sj,eh,ti){ this.ff=ff; this.Sj=Sj; this.eh=eh; this.ti=ti; var cX=this; this.jO=true; this.GD=function(){ var value=this.sK.gL(); if(value=='gmail'){ this.QY(this.eh.rO[0].rO[3].pX,false); this.QY(this.eh.rO[0].rO[4].pX,false); this.QY(this.eh.rO[0].rO[5].pX,false); this.QY(this.eh.rO[0].rO[6].pX,false); }else{ this.QY(this.eh.rO[0].rO[3].pX,true); this.QY(this.eh.rO[0].rO[4].pX,true); this.QY(this.eh.rO[0].rO[5].pX,true); this.QY(this.eh.rO[0].rO[6].pX,true); }if(value=='pop3'||value=='imap'){ var Rn=this.eh.rO[0].pe[3]; SU(Rn); Rn.appendChild(document.createTextNode(value=='pop3'?'POP3 server address':'IMAP server address')); Rn=this.eh.rO[0].pe[4]; SU(Rn); Rn.appendChild(document.createTextNode(value=='pop3'?'POP3 server port (Optional)':'IMAP server port (Optional)')); }this.eh.rO[0].wF(true); }; this.QY=function(fM,state){ var fr=this.pE(fM); var Lt=fr.nextSibling; fr.style.display=state?(isIE?'block':'table-row'):'none'; Lt.style.display=state?(isIE?'block':'table-row'):'none'; }; this.pE=function(rl){ var UP=rl; while(UP!=undefined&&UP!=null){ if(UP.tagName.toLowerCase()=='tr') return UP; if(UP=UP.parentNode); }}; }; vn.wR.prototype.MH=function(){ var cX=this; var Ld=this.eh.rO[0].rO[2]; delete Ld.Rf; delete Ld.gL; Ld.Pa=function(){}; Ld.wG=function(){ if(Ld.input.value!='') cX.Sj.uc.setAttribute('passwordSet',true); if(Ld.input.value!='*__pp_ibp_set'&&Ld.input.value!=''){ cX.Sj.RU(0,false,Ld.input.value,function(mo){ cX.Sj.Pj(mo); }); }else{ cX.Sj.RU(0,false,null,function(mo){ cX.Sj.Pj(mo); }); }}; var XM=function(){ if(Ld.input.value=='*__pp_ibp_set'){ Ld.input.value=''; cX.Sj.uc.setAttribute('passwordSet',false); alert('For security reasons, you must re-enter your password if you change your email inbox settings.'); }}; this.eh.rO[0].rO[0].Bu(function(){ cX.GD(); XM(); }); this.eh.rO[0].rO[1].Bu(XM); this.eh.rO[0].rO[3].Bu(XM); this.eh.rO[0].rO[4].Bu(XM); this.eh.rO[0].rO[5].Bu(XM); this.eh.rO[0].rO[6].Bu(XM); if(this.Sj.uc.getAttribute('passwordSet')) Ld.input.value='*__pp_ibp_set'; this.sK=this.eh.rO[0].rO[0]; this.GD(); }; vn.WQ=EB(); vn.prototype=new DH(); vn.prototype.vR=function(){ var cX=this; this.uc.lE(function(){}); this.uc.FB(); if(loggedIn==false){ this.uc.EF().appendChild(document.createTextNode('For security reasons, you must be logged in to view the contents of this email inbox.')); return; }this.pX=this.uc.EF(); this.AG=document.createElement('div'); this.Ht=document.createElement('div'); this.OO=document.createElement('div'); this.OO.style.paddingTop='11px'; this.OO.style.overflow='hidden'; this.OO.style.width='100%'; this.pX.appendChild(this.AG); this.pX.appendChild(this.Ht); this.pX.appendChild(this.OO); this.bR=document.createElement('div'); if(this.uc.getAttribute('username')==undefined){ this.bR.appendChild(document.createTextNode('This widget provides a preview of the unread messages in your email inbox. Click the edit button to set up your email account details...')); }else this.bR.appendChild(document.createTextNode('Retrieving inbox...')); this.uc.EF().appendChild(this.bR); if(this.uc.getAttribute('username')!=undefined){ this.RU(5*60*1000,true,null,function(mo){ cX.Pj(mo); }); }}; vn.prototype.Ra=function(jY){ var cX=this; SU(this.AG); this.AG.style.textDecoration='none'; this.AG.style.fontSize='11px'; if(isIE) this.AG.style.styleFloat='right'; else this.AG.style.cssFloat='right'; if(jY){ this.AG.appendChild(document.createTextNode('checking...')); this.AG.style.cursor='default'; this.AG.onclick=function(){}; }else{ this.AG.appendChild(document.createTextNode('check now')); this.AG.style.cursor='pointer'; this.AG.onclick=function(){ cX.RU(10*1000,false,null,function(mo){ cX.Pj(mo); }); }; }}; vn.prototype.RU=function(ms,tO,fA,PU){ this.Ra(true); var qF=new Object(); qF['methodName']='getInboxPreview'; qF['accountId']=accountId; qF['returnInboxPreviewIfOutOfDate']=tO; qF['maxTimeSinceLastUpdateMs']=ms+''; qF['username']=this.uc.getAttribute('username'); if(fA!=null) qF['password']=fA; qF['serverAddress']=this.uc.getAttribute('serverAddress'); qF['useSSL']=this.uc.getAttribute('useSSL'); qF['port']=this.uc.getAttribute('port'); qF['serviceType']=this.uc.getAttribute('serviceType'); qF['maxMessages']=this.uc.getAttribute('maxMessages'); qF['includeBodyPreviews']=this.uc.getAttribute('includeBodyPreviews'); this.uc.CV('inboxService',qF,function(mo){PU(mo);}); }; vn.prototype.Pj=function(Dd){ var cX=this; if(Dd['error']!=undefined){ SU(this.bR); this.bR.style.display='block'; this.AG.style.display='none'; this.Ht.style.display='none'; this.OO.style.display='none'; var Qm=Dd['error']; var message; if(Qm=='AUTH_FAILED'){ message='The username and password combination you have specified is incorrect.'; }else if(Qm=='UNKNOWN_HOST'){ message='The email server address you specified cannot be reached.'; }else if(Qm=='GENERAL_RETRIEVAL_FAILURE'){ message='There has been a problem connecting to your email server. This may happen often with some email providers when their servers are under heavy load.'; }else if(Qm=='PASSWORD_NOT_SET'){ message='Please check that you have entered a password for this email inbox. For security reasons, you must re-enter your password if you change the email server configuration settings.'; }else if(Qm=='AWAITING_INITIAL_RETRIEVAL'){ message='Retrieving inbox...'; setTimeout(function(){ cX.RU(60*1000,true,null,function(mo){ cX.Pj(mo); }); },4*1000); }else{ message='This widget is temporarily unavailable. Service will resume shortly.'; }this.bR.appendChild(document.createTextNode(message)); return; }else{ this.bR.style.display='none'; this.AG.style.display='block'; this.Ht.style.display='block'; this.OO.style.display='block'; }SU(this.Ht); SU(this.OO); var status=Dd['status']; var kW=Dd['totalUnreadMessages']; var AA=Dd['updateDurationMs']; var OT=Dd['messagePreviews']; if(status=='MESSAGES_ENCLOSED_AWAITING_INITIAL'){ this.Ra(true); setTimeout(function(){ cX.RU(4*60*1000,true,null,function(mo){ cX.Pj(mo); }); },AA+1700); }else if(status=='AWAITING_RETRIEVAL'){ setTimeout(function(){ cX.RU(60*1000,true,null,function(mo){ cX.Pj(mo); }); },4*1000); var hg=document.createElement('div'); hg.style.clear='both'; this.Ht.appendChild(hg); return; }else{ this.Ra(false); setTimeout(function(){ cX.Ra(true); cX.RU(4*60*1000,true,null,function(mo){ cX.Pj(mo); }); },5*60*1000); }this.Ht.style.fontSize='11px'; this.Ht.appendChild(document.createTextNode(kW+' '+' new messages')); this.Ht.style.paddingBottom='4px'; this.Ht.style.borderBottom='1px solid'; for(var kD in OT){ var Gw=OT[kD]; var eL=document.createElement('div'); eL.style.paddingBottom=this.uc.getAttribute('includeBodyPreviews')?'6px':'2px'; eL.style.whiteSpace='nowrap'; var Eo=document.createElement('img'); Eo.src='/web/images/widgets/inbox/email-icon.gif'; Eo.border=0; var Ka=document.createElement('div'); Ka.style.whiteSpace='nowrap'; Ka.style.paddingLeft='7px'; var HK=document.createElement('span'); HK.style.fontSize='11px'; HK.style.whiteSpace='nowrap'; HK.style.fontWeight='bold'; HK.appendChild(document.createTextNode(Gw['senderName'])); var sQ=document.createElement('span'); sQ.appendChild(document.createTextNode('-')); sQ.style.paddingLeft='5px'; sQ.style.paddingRight='5px'; sQ.style.whiteSpace='nowrap'; sQ.style.fontSize='11px'; var IR=document.createElement('span'); IR.style.whiteSpace='nowrap'; IR.style.overflow='hidden'; IR.style.fontSize='11px'; IR.appendChild(document.createTextNode(Gw['subject'])); Ka.appendChild(HK); Ka.appendChild(sQ); Ka.appendChild(IR); var table=document.createElement('table'); table.className='scheme-body'; table.cellSpacing=0; table.cellPadding=0; table.border=0; var KR=document.createElement('tbody'); var fr=document.createElement('tr'); var IN=document.createElement('td'); IN.appendChild(Eo); var JS=document.createElement('td'); JS.appendChild(Ka); fr.appendChild(IN); fr.appendChild(JS); KR.appendChild(fr); table.appendChild(KR); eL.appendChild(table); var nY=document.createElement('tr'); var ke=document.createElement('td'); var vP=document.createElement('td'); KR.appendChild(nY); nY.appendChild(ke); nY.appendChild(vP); var LP=true; var Iw=Gw['link']; if(!Iw) LP=false; if(Iw!=undefined&&Iw=='') LP=false; if(!LP&&this.uc.getAttribute('webmailUrl')){ if(this.uc.getAttribute('webmailUrl')!=''){ LP=true; Iw=this.uc.getAttribute('webmailUrl'); if(Iw.toLowerCase().indexOf('http')==-1) Iw='http://'+Iw; }}fr.onclick=function(Iw,LP){ return function(){ if(!LP) return; Sp(Iw); LP=true; }; }(Iw,LP); if(LP) fr.style.cursor='pointer'; if(this.uc.getAttribute('includeBodyPreviews')){ var PL=document.createElement('div'); PL.style.whiteSpace='nowrap'; PL.style.overflow='hidden'; PL.style.fontSize='11px'; PL.style.paddingLeft='7px'; PL.appendChild(document.createTextNode(Gw['bodyPreview'])); vP.appendChild(PL); nY.onclick=fr.onclick; if(LP) nY.style.cursor='pointer'; }this.OO.appendChild(eL); }this.uc.jQ(); }; function hS(){ }hS.prototype=new DH(); hS.WQ=[ new dK([ new pg('description','Description','This text will appear underneath the photo.','',400) ]) ]; hS.prototype.vR=function(){ var cX=this; this.uc.FB(); var url=this.uc.getAttribute('url'); var description=this.uc.getAttribute('description'); if(url!=null){ var kF=uid(); if(description==null||description==''){ fU(this.uc.Bn.id,true); }this.uc.Bn.va().style.padding='0px'; this.uc.Bn.nq().style.padding='0px'; this.uc.EF().innerHTML='<table class="scheme-body" align="center" cellpadding=0 cellspacing=0><tr><td align="center"><image width="'+this.uc.getAttribute('imageWidth')+'" height="'+this.uc.getAttribute('imageHeight')+'" src="'+url+'"></td></tr><tr><td align="left" style="padding-left:10px; padding-top:3px; font-size:11px;" id="'+kF+'"></td></tr></table>'; document.getElementById(kF).appendChild(document.createTextNode(description)); }else{ this.uc.Bn.xj=1; var Yx=document.createElement('div'); Yx.appendChild(document.createTextNode('Uploading, please wait...')); Yx.style.display='none'; this.uc.EF().appendChild(Yx); var rL=document.createElement('div'); this.uc.EF().appendChild(rL); var table=document.createElement('table'); table.className='scheme-body'; table.align='center'; table.cellSpacing=0; table.cellPadding=5; table.border=0; var KR=document.createElement('tbody'); var fo=document.createElement('tr'); var nY=document.createElement('tr'); var NK=document.createElement('tr'); var Zo=document.createElement('tr'); var Xi=document.createElement('tr'); var aF=document.createElement('tr'); var IN=document.createElement('td'); var JS=document.createElement('td'); var ke=document.createElement('td'); var vP=document.createElement('td'); var Cq=document.createElement('td'); var mL=document.createElement('td'); var mK=document.createElement('a'); mK.href=''; mK.onclick=function(UP){ stopPropagation(UP); cX.uc.setAttribute('url','/web/images/widgets/photo/mountain-lake-sample.jpg'); cX.uc.setAttribute('description','Alberta Rockies overlooking Lake Louise at the Jasper National Park, Canada.'); cX.uc.setAttribute('imageWidth',256); cX.uc.setAttribute('imageHeight',192); cX.GX(); cX.vR(); return false; }; var gO=document.createElement('div'); var GH=document.createElement('div'); gO.style.whiteSpace='nowrap'; GH.style.whiteSpace='nowrap'; gO.appendChild(document.createTextNode('Upload a photo from your computer,')); GH.appendChild(document.createTextNode('or ')); GH.appendChild(mK); mK.appendChild(document.createTextNode('click here')); GH.appendChild(document.createTextNode(' to see a sample photo')); IN.appendChild(gO); IN.appendChild(GH); var mj=CallbackNotify.Is(function(NJ){ if(NJ['error']!=null){ alert("There was a problem with the image file you uploaded - please check it is a valid JPG or GIF file"); table.style.display='block'; Yx.style.display='none'; return; }; var da=NJ['width']; var FU=NJ['height']; cX.uc.setAttribute('imageWidth',da); cX.uc.setAttribute('imageHeight',FU); cX.uc.setAttribute('url',NJ['url']); cX.uc.setAttribute('imageId',NJ['imageId']); cX.GX(); cX.vR(); }); var IJ=mj+'-formId'; var VX=mj+'-maxWidth'; var Oo=mj+'-maxHeight'; var WX=mj+'-accountId'; var gF=mj+'-protopageId'; var Aa=mj+'-optionGroup'; var Dt=Aa+'-A'; var Gt=Aa+'-B'; var mD=mj+'-maxWidthTextFieldId'; var ko=mj+'-maxHeightTextFieldId'; var Bo=mj+'-photoTitleTextFieldId'; var dD=mj+'-photoDescriptionTextAreaId'; var qE=mj+'-uploadButtonId'; var FA=document.createElement('div'); FA.innerHTML='      <form id="'+IJ+'" method="post" enctype="multipart/form-data" action="'+'/'+protopagePath+'/_api/imageUploadGateway" target="'+CallbackNotify.Jw(mj)+'">			'+CallbackNotify.JL(mj)+'			<input type="file" name="image" style="min-width: 0px; padding: 1px; margin: 0px;">			<input type="hidden" name="maxWidth" id="'+VX+'" value="'+20+'">			<input type="hidden" name="maxHeight" id="'+Oo+'" value="'+20+'">			<input type="hidden" name="accountId" id="'+WX+'" value="'+accountId+'">			<input type="hidden" name="protopageId" id="'+gF+'" value="'+protopageId+'">			<input type="hidden" name="type" value="photo-widget"></form>'; JS.appendChild(FA); var kx=document.createElement('div'); kx.innerHTML=CallbackNotify.MG(mj); eM().appendChild(kx); var iY=document.createElement('table'); iY.className='scheme-body'; var JI=document.createElement('tbody'); var iB=document.createElement('tr'); var hx=document.createElement('tr'); var lQ=document.createElement('tr'); var Bv=document.createElement('td'); var dw=document.createElement('td'); var NG=document.createElement('td'); var oG=document.createElement('td'); var xt=document.createElement('td'); var WJ=document.createElement('td'); iY.appendChild(JI); JI.appendChild(iB); JI.appendChild(hx); JI.appendChild(lQ); iB.appendChild(Bv); iB.appendChild(dw); hx.appendChild(NG); hx.appendChild(oG); lQ.appendChild(xt); lQ.appendChild(WJ); Bv.align='left'; Bv.innerHTML='<input align="left" style="margin:0px; padding:0px" type="radio" id="'+Dt+'" name="'+Aa+'" value="true" checked>'; var Dv=document.createElement('div'); Dv.style.display='inline'; Dv.style.padding='5px'; Dv.style.whiteSpace='nowrap'; Dv.appendChild(document.createTextNode('Resize photo to fit inside this panel')); dw.appendChild(Dv); NG.align='left'; NG.innerHTML='<input align="left" style="margin:0px; padding:0px" type="radio" id="'+Gt+'" name="'+Aa+'" value="true">'; var Qg=document.createElement('div'); Qg.style.display='inline'; Qg.style.padding='5px'; Qg.style.whiteSpace='nowrap'; Qg.appendChild(document.createTextNode('Resize photo to fit dimensions:')); oG.appendChild(Qg); WJ.innerHTML='<span style="padding-left:5px"><input id="'+mD+'" type="text" disabled="true" style="width:4.5ex; margin:0px; padding:0px;" value="100"></span> x <span><input id="'+ko+'" type="text" disabled="true" style="width:4.5ex; margin:0px; padding:0px;" value="100"></span> pixels'; ke.appendChild(iY); vP.innerHTML='<div style="white-space:nowrap">Title your photo (optional)</div><input id="'+Bo+'" type="text" style="width:30ex; margin:0px; padding:0px;">'; Cq.innerHTML='<div style="white-space:nowrap">Add a description (optional)</div><textarea  id="'+dD+'" rows="3" class="scheme-body" style="color:#000000; background-color:#ffffff; width:200px; margin:0px; padding:0px;">'; mL.innerHTML='<input type="button" id="'+qE+'" value="Upload" style="min-width: 0px; padding: 1px 1px 1px 1px; margin: 1px 1px 1px 1px;">'; rL.appendChild(table); table.appendChild(KR); KR.appendChild(fo); KR.appendChild(nY); KR.appendChild(NK); KR.appendChild(Zo); KR.appendChild(Xi); KR.appendChild(aF); fo.appendChild(IN); nY.appendChild(JS); NK.appendChild(ke); Zo.appendChild(vP); Xi.appendChild(Cq); aF.appendChild(mL); document.getElementById(Dt).onmousedown=function(){ document.getElementById(mD).disabled=true; document.getElementById(ko).disabled=true; cX.VP(); }; document.getElementById(Gt).onmousedown=function(){ document.getElementById(mD).disabled=false; document.getElementById(ko).disabled=false; }; document.getElementById(Dt).onkeypress=document.getElementById(Dt).onmousedown; document.getElementById(Gt).onkeypress=document.getElementById(Gt).onmousedown; document.getElementById(qE).onclick=function(){ var vF=document.getElementById(mD).value; document.getElementById(VX).value=vF; var Ge=document.getElementById(ko).value; document.getElementById(Oo).value=Ge; cX.uc.Kx(document.getElementById(Bo).value); cX.uc.setAttribute('description',document.getElementById(dD).value); At('photoWidgetLastUsedMaxWidthDimension',vF,'/'); At('photoWidgetLastUsedMaxHeightDimension',Ge,'/'); table.style.display='none'; Yx.style.display='block'; cX.uc.jQ(); document.getElementById(IJ).submit(); }; var AE=LG('photoWidgetLastUsedMaxWidthDimension'); var eU=LG('photoWidgetLastUsedMaxHeightDimension'); if(AE!=null&&AE!=''){ document.getElementById(Dt).checked=false; document.getElementById(Gt).checked=true; document.getElementById(mD).value=AE; document.getElementById(ko).value=eU; document.getElementById(mD).disabled=false; document.getElementById(ko).disabled=false; }this.uc.Ov(function(){ if(document.getElementById(Dt)){ if(document.getElementById(Dt).checked){ cX.VP(); }}}); }this.uc.rp(function(){ if(cX.uc.getAttribute('imageId')==undefined){ return; }var qF=new Object(); qF['accountId']=''+accountId; qF['command']='delete'; qF['imageId']=cX.uc.getAttribute('imageId'); ox('/'+protopagePath+'/_api/imageManageGateway',qF); }); this.VP=function(){ document.getElementById(mD).value=cX.uc.Bn.width; document.getElementById(ko).value=cX.uc.Bn.height-NA(cX.uc.Bn.id)-1; }; this.GX=function(){ var y=0; y+=1; y+=NA(cX.uc.Bn.id); y+=cX.uc.getAttribute('imageHeight'); var eb=cX.uc.getAttribute('description'); if(eb!=null&&eb!=''){ var eY=document.createElement('div'); eY.style.visibility='hidden'; eY.style.fontSize='11px'; eY.style.paddingLeft='10px'; eY.style.paddingTop='3px'; eY.style.width=cX.uc.getAttribute('imageWidth')+'px'; eY.className='scheme-body'; eY.appendChild(document.createTextNode(eb)); eM().appendChild(eY); y+=eY.offsetHeight; eM().removeChild(eY); }var tc=cX.uc.Bn; tc.width=cX.uc.getAttribute('imageWidth'); tc.height=y; EE(Sl(tc.id),va(tc.id),cX.uc.Bn.width,cX.uc.Bn.height); cX.uc.Bn.xj=0; WV(tc); cX.uc.AM(); }; this.uc.jQ(); }; function Bh(){ }function DQ(){ var oI=new cg('searchTitle','Quick search title',null,'',300,100); var eV=new cg('searchUrl','Quick search url',null,'',300,100); return [ new hC('searches',[oI,eV],[]),new mW(Bh.io),]; }Bh.io=function(ff,Sj,eh){ this.ff=ff; var cX=this; var ih=24; this.Sj=Sj; this.pX=document.createElement("div"); this.pX.className='scheme-body'; this.pX.style.paddingLeft=ih+'px'; this.pX.style.paddingRight=ih+'px'; this.pX.style.width='200px'; this.Rj=document.createElement('div'); this.Rj.appendChild(document.createTextNode('You can also add feeds to the table above by choosing from our directory:')); this.Rj.paddingBottom='16px'; this.jc=document.createElement('div'); this.tT=new Array(); this.hl=null; for(var kD in qC){ var KJ=document.createElement('div'); KJ.className='scheme-body'; KJ.style.marginLeft='0px'; KJ.style.marginRight='14px'; KJ.style.marginTop='4px'; KJ.style.marginBottom='4px'; KJ.style.fontWeight='bold'; KJ.style.cursor='pointer'; KJ.style.whiteSpace='nowrap'; KJ.onmousedown=function(Hh,kD){ return function(){ var uH=new Array(); cX.uH=uH; cX.Qs=kD; for(var kG in cX.tT){ if(kG!=kD) cX.tT[kG].className='scheme-body'; }var Uc=qC[kD][1]; for(var kG in Uc){ var cp=document.createElement('div'); cp.className='scheme-body'; cp.style.marginLeft='0px'; cp.style.marginRight='14px'; cp.style.marginTop='4px'; cp.style.marginBottom='4px'; cp.style.cursor='pointer'; cp.style.whiteSpace='nowrap'; var BB=document.createElement('a'); var XB=document.createTextNode('(add)'); BB.appendChild(XB); BB.style.fontSize='11px'; BB.style.textDecoration='underline'; BB.style.paddingRight='6px'; BB.onclick=function(label,qb,It,XB){ return function(){ XB.replaceData(0,XB.length,'(added)'); var iC=null; for(var TM in eh.rO) if(eh.rO[TM].YI=='feeds') iC=eh.rO[TM]; var nH=(It!=null)?It:qb; iC.KU(['('+label+')     '+nH]); iC.Pe(); }; }(Uc[kG][0],Uc[kG][1],Uc[kG][2],XB); var dW=document.createElement('a'); dW.appendChild(document.createTextNode('(preview)')); dW.className='scheme-body'; dW.style.fontSize='11px'; dW.style.textDecoration='underline'; dW.style.paddingRight='6px'; dW.onclick=function(qb){ return function(){ Sp(qb); return false; }; }(Uc[kG][1]); cp.appendChild(dW); cp.appendChild(BB); cp.appendChild(document.createTextNode(Uc[kG][0])); uH.push(cp); }mG(cX.eK,uH); cX.wF(); }; }(KJ,kD); KJ.onmouseover=function(Hh){ return function(){ Hh.className='scheme-header'; }; }(KJ); KJ.onmouseout=function(Hh,kD){ return function(){ if(cX.Qs!=kD) Hh.className='scheme-body'; }; }(KJ,kD); KJ.appendChild(document.createTextNode(qC[kD][0])); this.tT.push(KJ); }this.eK=document.createElement('div'); this.pX.appendChild(this.Rj); this.pX.appendChild(this.jc); this.pX.appendChild(this.eK); this.eC=100; this.lx=function(da){ if(da<this.eC) da=this.eC; this.pX.style.width=(da-ih*2)+'px'; this.jc.style.width=this.pX.style.width; this.eK.style.width=this.pX.style.width; mG(this.jc,this.tT); if(this.uH) mG(this.eK,this.uH); }; this.Hb=null; this.nF=function(PU){ this.Hb=PU; }; this.wF=function(){ if(this.Hb!=null) this.Hb(); }; }; Bh.WQ=DQ(); Bh.prototype=new DH(); Bh.prototype.vR=function(){ var cX=this; this.uc.FB(); var Fv=this.uc.EF(); var Vd=this.uc.getAttribute('searches'); for(var kD in Vd){ var search=Vd[kD]; var title=search[0]; var url=search[1]; var cP=url.indexOf('&'); if(cP==-1) cP=url.length; var DB=url.substring(0,cP); var Ax=url.substring(cP,url.length); var form=document.createElement('form'); form.action=DB; form.method='GET'; form.target='_NEW'; var nk=Ax.split('&'); for(var kG in nk){ var ta=nk[kG].split('='); var input=document.createElement('input'); input.name=ta[0]; if(kG==nk.length-1){ input.style='width:140px;'; input.value=title; input.onmousedown=function(input){ return function(){ input.select(); }; }(input); input.onfocus=input.onmousedown; }else{ input.type='hidden'; input.value=ta[1]; }form.appendChild(input); }var submit=document.createElement('input'); submit.type='submit'; submit.value='Go'; }}; function WE(){ }function Mi(){ return [ new dK([ new mW(WE.oh),new Bq('speedUnits','Wind speed units','',[new SP('mph','m',true),new SP('km/h','k',false)]),new Bq('temperatureUnits','Temperature units','',[new SP('Celsius','c',false),new SP('Fahrenheit','f',true)]),new xp('compactMode','Compact display mode','',true) ]) ]; }WE.oh=function(ff,Sj,eh){ this.ff=ff; this.label='City (Worldwide) or zip code (U.S. only)'; this.description=null; var cX=this; this.Sj=Sj; this.eh=eh; this.pX=document.createElement('div'); this.Tb=document.createElement('div'); this.uL=document.createElement('div'); this.pX.appendChild(this.Tb); this.pX.appendChild(this.uL); var gS=Sj.uc.getAttribute('locationLabel'); this.cf=Sj.uc.getAttribute('locationLabel'); this.Dl=Sj.uc.getAttribute('locationId'); this.input=document.createElement("input"); this.input.value=gS; this.input.style.padding='0px'; this.input.style.paddingRight='5px'; this.input.style.margin='0px'; this.input.style.display='inline'; this.hT=document.createElement('input'); this.hT.type='button'; this.hT.value='Search'; this.hT.style.padding='0px'; this.hT.style.margin='0px'; this.hT.style.display='inline'; this.hT.style.fontSize='12px'; this.hT.onclick=function(){ if(cX.input.value==null||cX.input.value=='') return false; cX.hT.disabled=true; var qF=new Object(); qF['methodName']='searchLocations'; qF['searchTerm']=cX.input.value; SU(cX.uL); cX.Sj.uc.CV('weatherService',qF,function(mo){ cX.Li(mo); }); return false; }; this.input.onkeyup=function(UP){ var ib=UP; if(!ib) ib=window.event; if(ib) if(ib.keyCode==13) cX.hT.onclick(); }; this.Li=function(mo){ cX.hT.disabled=false; var sd=mo['locationMatches']; var Rk=new Array(); if(sd.length==0){ cX.uL.style.paddingTop='6px'; cX.uL.style.paddingBottom='10px'; cX.uL.className='scheme-body'; cX.uL.appendChild(document.createTextNode('No matching cities found. Please try another search.')); }else{ if(sd.length>1){ var Hm=document.createElement('div'); Hm.className='scheme-body'; Hm.appendChild(document.createTextNode('Select one of the following matches:')); cX.uL.appendChild(Hm); }for(var kD in sd){ var match=sd[kD]; var mX=document.createElement('div'); mX.style.textDecoration='underline'; mX.style.cursor='pointer'; mX.style.fontSize='12px'; mX.appendChild(document.createTextNode(match.label)); cX.uL.appendChild(mX); cX.uL.style.paddingTop='6px'; cX.uL.style.paddingBottom='10px'; Rk.push(mX); mX.onclick=function(match,mX){ return function(){ for(var kG in Rk){ if(Rk[kG]==mX) mX.className='scheme-header'; else Rk[kG].className='scheme-body'; }cX.input.value=match.label; var vv=match.label; if(vv.indexOf(',')!=-1) vv=vv.substring(0,vv.indexOf(',')); eh.lN.value=vv; cX.Dl=match.id; cX.cf=match.label; }}(match,mX); if(sd.length==1) mX.onclick(); }}BC(eh.uc.Bn.id); cX.wF(); }; this.Tb.appendChild(this.input); this.Tb.appendChild(this.hT); this.lx=function(da){ this.pX.style.width=da+'px'; }; this.Hb=null; this.nF=function(PU){ this.Hb=PU; }; this.wF=function(){ if(this.Hb!=null) this.Hb(); }; this.MH=function(){ this.input.select(); }; this.Pa=function(){ this.Sj.uc.setAttribute('locationId',this.Dl); this.Sj.uc.setAttribute('locationLabel',this.cf); }; }; WE.WQ=Mi(); WE.prototype=new DH(); WE.prototype.vR=function(){ var cX=this; this.uc.FB(); this.uc.EF().appendChild(document.createTextNode('Retrieving weather...')); if(this.uc.getAttribute('locationId')==undefined){ this.uc.setAttribute('locationId','USCA1024'); this.uc.setAttribute('locationLabel','Santa Monica, CA'); this.uc.setAttribute('speedUnits','m'); this.uc.setAttribute('temperatureUnits','f'); }this.sG(); }; WE.prototype.sG=function(){ var cX=this; var qF=new Object(); qF['methodName']='getWeather'; qF['locId']=this.uc.getAttribute('locationId'); this.uc.CV('weatherService',qF,function(mo){ cX.YC(mo); }); }; WE.prototype.YC=function(ip){ var cX=this; this.uc.FB(); if(ip['error']!=undefined){ this.uc.EF().appendChild(document.createTextNode('This widget is temporarily unavailable. Service will resume shortly.')); return; }if(this.uc.getAttribute('compactMode')) this.oc(ip); else this.qN(ip); this.uc.jQ(); setTimeout(function(){ cX.sG(); },30*60*1000); }; WE.prototype.oc=function(ip){ var cX=this; var table=document.createElement('table'); table.className='scheme-body'; table.cellPadding=0; table.cellSpacing=0; table.style.width='100%'; table.align='center'; table.border=0; var KR=document.createElement('tbody'); var wZ=document.createElement('tr'); var ZB=document.createElement('td'); var Ec=document.createElement('td'); var fj=document.createElement('tr'); var KY=document.createElement('td'); KY.colSpan=2; KY.align='center'; var Zb=document.createElement('tr'); var Ox=document.createElement('td'); Ox.colSpan=2; Ox.align='center'; ZB.width='50%'; Ec.width='50%'; ZB.align='center'; Ec.align='center'; ZB.vAlign='middle'; Ec.vAlign='middle'; table.appendChild(KR); KR.appendChild(wZ); wZ.appendChild(ZB); wZ.appendChild(Ec); KR.appendChild(fj); fj.appendChild(KY); KR.appendChild(Zb); Zb.appendChild(Ox); var tk=this.uc.getAttribute('temperatureUnits')=='f'?ip['currentConditions']['tempF']:ip['currentConditions']['tempC']; ZB.appendChild(document.createTextNode(tk+'')); ZB.style.fontSize='28px'; var Yh=ip['currentConditions']['icon']; if(Yh.length==1) Yh='0'+Yh; var Zv='/web/images/weather/small_icons/'+Yh+'.png'; var IZ=document.createElement('div'); IZ.style.width='64px'; IZ.style.height='48px'; Gj(IZ,Zv,false); Ec.appendChild(IZ); KY.appendChild(document.createTextNode(ip['currentConditions']['desc'])); var UU=document.createElement('div'); UU.style.fontSize='9px'; UU.style.paddingTop='4px'; UU.innerHTML='<a style="text-decoration:none; white-space:nowrap" href="http://www.weather.com" target="_NEW">Weather by weather.com&reg;</a>'; Ox.appendChild(UU); this.uc.EF().appendChild(table); }; WE.prototype.qN=function(ip){ var cX=this; var table=document.createElement('table'); table.className='scheme-body'; table.cellPadding=0; table.cellSpacing=0; table.style.width='100%'; table.align='center'; var KR=document.createElement('tbody'); var wZ=document.createElement('tr'); var ZB=document.createElement('td'); var Ec=document.createElement('td'); var pL=document.createElement('td'); ZB.width='33%'; Ec.width='33%'; pL.width='33%'; ZB.align='center'; Ec.align='center'; pL.align='center'; var fj=document.createElement('tr'); var KY=document.createElement('td'); KY.colSpan=3; var Zb=document.createElement('tr'); var Ox=document.createElement('td'); Ox.colSpan=3; table.appendChild(KR); KR.appendChild(wZ); KR.appendChild(fj); KR.appendChild(Zb); wZ.appendChild(ZB); wZ.appendChild(Ec); wZ.appendChild(pL); fj.appendChild(KY); Zb.appendChild(Ox); ZB.appendChild(this.RW(ip)); Ec.appendChild(this.xK(ip)); var Yh=ip['currentConditions']['icon']; if(Yh.length==1) Yh='0'+Yh; var Zv='/web/images/weather/medium_icons/'+Yh+'.png'; var IZ=document.createElement('div'); IZ.style.width='100px'; IZ.style.height='75px'; Gj(IZ,Zv,false); pL.appendChild(IZ); KY.appendChild(this.GL(ip)); Ox.appendChild(this.kI(ip)); this.uc.EF().appendChild(table); }; WE.prototype.RW=function(ip){ var table=document.createElement('table'); table.className='scheme-body'; var KR=document.createElement('tbody'); var wZ=document.createElement('tr'); var fj=document.createElement('tr'); var ZB=document.createElement('td'); var KY=document.createElement('td'); table.appendChild(KR); KR.appendChild(wZ); KR.appendChild(fj); wZ.appendChild(ZB); fj.appendChild(KY); var tk=this.uc.getAttribute('temperatureUnits')=='f'?ip['currentConditions']['tempF']:ip['currentConditions']['tempC']; ZB.appendChild(document.createTextNode(tk+'')); ZB.style.fontSize='32px'; ZB.align='center'; KY.align='center'; KY.appendChild(document.createTextNode(ip['currentConditions']['desc'])); return table; }; WE.prototype.xK=function(ip){ var table=document.createElement('table'); table.className='scheme-body'; var KR=document.createElement('tbody'); var wZ=document.createElement('tr'); var fj=document.createElement('tr'); var Zb=document.createElement('tr'); var ga=document.createElement('tr'); var ZB=document.createElement('td'); var KY=document.createElement('td'); var Ox=document.createElement('td'); var nJ=document.createElement('td'); ZB.style.fontSize='11px'; KY.style.fontSize='11px'; Ox.style.fontSize='11px'; nJ.style.fontSize='11px'; table.appendChild(KR); KR.appendChild(wZ); KR.appendChild(fj); KR.appendChild(Zb); KR.appendChild(ga); wZ.appendChild(ZB); fj.appendChild(KY); Zb.appendChild(Ox); ga.appendChild(nJ); ZB.align='left'; KY.align='left'; Ox.align='left'; nJ.align='left'; var tk=this.uc.getAttribute('temperatureUnits')=='f'?ip['currentConditions']['feelsLikeF']:ip['currentConditions']['feelsLikeC']; ZB.appendChild(document.createTextNode('Feels like '+tk+'')); var Ks=this.uc.getAttribute('speedUnits')=='m'?ip['currentConditions']['windSpeedMph']:ip['currentConditions']['windSpeedKmh']; if(!isNaN(Ks)) Ks+=this.uc.getAttribute('speedUnits')=='m'?' mph':' km/h'; KY.appendChild(document.createTextNode('Wind '+Ks)); Ox.appendChild(document.createTextNode('Humidity '+ip['currentConditions']['humidityPercent']+'%')); nJ.appendChild(document.createTextNode('UV Index '+ip['currentConditions']['uvIndex'])); return table; }; WE.prototype.GL=function(ip){ var table=document.createElement('table'); table.width='100%'; table.cellPadding=0; table.cellSpacing=0; var KR=document.createElement('tbody'); var wZ=document.createElement('tr'); var ZB=document.createElement('td'); var Ec=document.createElement('td'); var pL=document.createElement('td'); var XU=document.createElement('td'); table.appendChild(KR); KR.appendChild(wZ); wZ.appendChild(ZB); wZ.appendChild(Ec); wZ.appendChild(pL); wZ.appendChild(XU); ZB.align='center'; Ec.align='center'; pL.align='center'; XU.align='center'; ZB.appendChild(this.Sd(ip['forecast']['forecasts'][0])); Ec.appendChild(this.Sd(ip['forecast']['forecasts'][1])); pL.appendChild(this.Sd(ip['forecast']['forecasts'][2])); XU.appendChild(this.Sd(ip['forecast']['forecasts'][3])); return table; }; WE.prototype.Sd=function(KG){ var table=document.createElement('table'); table.className='scheme-body'; var KR=document.createElement('tbody'); var wZ=document.createElement('tr'); var fj=document.createElement('tr'); var Zb=document.createElement('tr'); var ZB=document.createElement('td'); var KY=document.createElement('td'); var Ox=document.createElement('td'); table.appendChild(KR); KR.appendChild(wZ); KR.appendChild(fj); KR.appendChild(Zb); wZ.appendChild(ZB); fj.appendChild(KY); Zb.appendChild(Ox); ZB.align='center'; KY.align='center'; Ox.align='center'; ZB.style.fontSize='11px'; KY.style.fontSize='11px'; Ox.style.fontSize='11px'; var Yh=KG['icon']; if(Yh.length==1) Yh='0'+Yh; var Zv='/web/images/weather/small_icons/'+Yh+'.png'; var IZ=document.createElement('div'); IZ.style.width='64px'; IZ.style.height='48px'; Gj(IZ,Zv,false); ZB.appendChild(IZ); var EN=this.uc.getAttribute('temperatureUnits')=='f'?KG['dayHighTempF']:KG['dayHighTempC']; var tP=this.uc.getAttribute('temperatureUnits')=='f'?KG['dayLowTempF']:KG['dayLowTempC']; KY.appendChild(document.createTextNode(KG['dayOfWeekLabel'])); if(KG.partOfDay=='d') Ox.appendChild(document.createTextNode('High '+EN+'')); else Ox.appendChild(document.createTextNode('Low '+tP+'')); return table; }; WE.prototype.kI=function(ip){ var table=document.createElement('table'); table.className='scheme-body'; table.align='center'; table.cellPadding=0; table.cellSpacing=0; table.border=0; table.style.paddingTop='14px'; var KR=document.createElement('tbody'); var wZ=document.createElement('tr'); var ZB=document.createElement('td'); var Ec=document.createElement('td'); table.appendChild(KR); KR.appendChild(wZ); wZ.appendChild(ZB); wZ.appendChild(Ec); ZB.align='center'; Ec.align='center'; var nG=document.createElement('a'); nG.href='http://www.weather.com'
nG.target='_NEW'; var Jq=new Image(); Jq.src='/web/images/weather/twc-logo.gif'; Jq.border=0; nG.appendChild(Jq); ZB.appendChild(nG); var pX=document.createElement('div'); pX.style.paddingLeft='14px'; pX.style.fontSize='9px'; var UU=document.createElement('div'); UU.innerHTML='<a style="text-decoration:none" href="http://www.weather.com" target="_NEW">Weather data provided by weather.com&reg;</a>'; pX.appendChild(UU); var dO=document.createElement('div'); pX.appendChild(dO); var links=ip['promoLinks']['links']; for(var kD in links){ var link=links[kD]; var Su=document.createElement('a'); Su.href=link.url; Su.appendChild(document.createTextNode(link.label)); Su.target='_NEW'; Su.style.paddingRight='4px'; dO.appendChild(Su); }Ec.appendChild(pX); return table; }; 